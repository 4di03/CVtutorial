System.register(["./chunk-vendor.js","./chunk-frameworks.js","./chunk-failbot.js"],function(){"use strict";var G,Re,ee,se,Be,ze,He,ct,xe,dt,pt,ft;return{setters:[function(re){G=re.ab,Re=re.ac,ee=re.a,se=re.o,Be=re.f,ze=re.k},function(re){He=re.a4,ct=re.aA,xe=re.y,dt=re.x,pt=re.$},function(re){ft=re.a}],execute:function(){var re={exports:{}};/*!
 * Braintree End-to-End Encryption Library
 * https://www.braintreepayments.com
 * Copyright (c) 2009-2014 Braintree, a division of PayPal, Inc.
 *
 * JSBN
 * Copyright (c) 2005  Tom Wu
 *
 * Both Licensed under the MIT License.
 * http://opensource.org/licenses/MIT
 *
 * ASN.1 JavaScript decoder
 * Copyright (c) 2008-2009 Lapo Luchini <lapo@lapo.it>
 * Licensed under the ISC License.
 * http://opensource.org/licenses/ISC
 */(function(E,I){(function(){function e(u,c){u instanceof e?(this.enc=u.enc,this.pos=u.pos):(this.enc=u,this.pos=c)}e.prototype.get=function(u){if(u==null&&(u=this.pos++),u>=this.enc.length)throw"Requesting byte offset "+u+" on a stream of length "+this.enc.length;return this.enc[u]},e.prototype.hexDigits="0123456789ABCDEF",e.prototype.hexByte=function(u){return this.hexDigits.charAt(u>>4&15)+this.hexDigits.charAt(u&15)},e.prototype.hexDump=function(u,c){for(var d="",f=u;f<c;++f)switch(d+=this.hexByte(this.get(f)),f&15){case 7:d+="  ";break;case 15:d+=`
`;break;default:d+=" "}return d},e.prototype.parseStringISO=function(u,c){for(var d="",f=u;f<c;++f)d+=String.fromCharCode(this.get(f));return d},e.prototype.parseStringUTF=function(u,c){for(var d="",f=0,w=u;w<c;){var f=this.get(w++);f<128?d+=String.fromCharCode(f):f>191&&f<224?d+=String.fromCharCode((f&31)<<6|this.get(w++)&63):d+=String.fromCharCode((f&15)<<12|(this.get(w++)&63)<<6|this.get(w++)&63)}return d},e.prototype.reTime=/^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,e.prototype.parseTime=function(u,c){var d=this.parseStringISO(u,c),f=this.reTime.exec(d);return f?(d=f[1]+"-"+f[2]+"-"+f[3]+" "+f[4],f[5]&&(d+=":"+f[5],f[6]&&(d+=":"+f[6],f[7]&&(d+="."+f[7]))),f[8]&&(d+=" UTC",f[8]!="Z"&&(d+=f[8],f[9]&&(d+=":"+f[9]))),d):"Unrecognized time: "+d},e.prototype.parseInteger=function(u,c){var d=c-u;if(d>4){d<<=3;var f=this.get(u);if(f==0)d-=8;else for(;f<128;)f<<=1,--d;return"("+d+" bit)"}for(var w=0,O=u;O<c;++O)w=w<<8|this.get(O);return w},e.prototype.parseBitString=function(u,c){var d=this.get(u),f=(c-u-1<<3)-d,w="("+f+" bit)";if(f<=20){var O=d;w+=" ";for(var M=c-1;M>u;--M){for(var q=this.get(M),B=O;B<8;++B)w+=q>>B&1?"1":"0";O=0}}return w},e.prototype.parseOctetString=function(u,c){var d=c-u,f="("+d+" byte) ";d>20&&(c=u+20);for(var w=u;w<c;++w)f+=this.hexByte(this.get(w));return d>20&&(f+=String.fromCharCode(8230)),f},e.prototype.parseOID=function(u,c){for(var d,f=0,w=0,O=u;O<c;++O){var M=this.get(O);f=f<<7|M&127,w+=7,M&128||(d==null?d=parseInt(f/40)+"."+f%40:d+="."+(w>=31?"bigint":f),f=w=0),d+=String.fromCharCode()}return d};function n(u,c,d,f,w){this.stream=u,this.header=c,this.length=d,this.tag=f,this.sub=w}n.prototype.typeName=function(){if(this.tag==null)return"unknown";var u=this.tag>>6;this.tag>>5&1;var c=this.tag&31;switch(u){case 0:switch(c){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString";default:return"Universal_"+c.toString(16)}case 1:return"Application_"+c.toString(16);case 2:return"["+c+"]";case 3:return"Private_"+c.toString(16)}},n.prototype.content=function(){if(this.tag==null)return null;var u=this.tag>>6;if(u!=0)return this.sub==null?null:"("+this.sub.length+")";var c=this.tag&31,d=this.posContent(),f=Math.abs(this.length);switch(c){case 1:return this.stream.get(d)==0?"false":"true";case 2:return this.stream.parseInteger(d,d+f);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(d,d+f);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(d,d+f);case 6:return this.stream.parseOID(d,d+f);case 16:case 17:return"("+this.sub.length+" elem)";case 12:return this.stream.parseStringUTF(d,d+f);case 18:case 19:case 20:case 21:case 22:case 26:return this.stream.parseStringISO(d,d+f);case 23:case 24:return this.stream.parseTime(d,d+f)}return null},n.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(this.sub==null?"null":this.sub.length)+"]"},n.prototype.print=function(u){if(u==null&&(u=""),document.writeln(u+this),this.sub!=null){u+="  ";for(var c=0,d=this.sub.length;c<d;++c)this.sub[c].print(u)}},n.prototype.toPrettyString=function(u){u==null&&(u="");var c=u+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(c+="+"),c+=this.length,this.tag&32?c+=" (constructed)":(this.tag==3||this.tag==4)&&this.sub!=null&&(c+=" (encapsulates)"),c+=`
`,this.sub!=null){u+="  ";for(var d=0,f=this.sub.length;d<f;++d)c+=this.sub[d].toPrettyString(u)}return c},n.prototype.posStart=function(){return this.stream.pos},n.prototype.posContent=function(){return this.stream.pos+this.header},n.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},n.decodeLength=function(u){var c=u.get(),d=c&127;if(d==c)return d;if(d>3)throw"Length over 24 bits not supported at position "+(u.pos-1);if(d==0)return-1;c=0;for(var f=0;f<d;++f)c=c<<8|u.get();return c},n.hasContent=function(u,c,d){if(u&32)return!0;if(u<3||u>4)return!1;var f=new e(d);u==3&&f.get();var w=f.get();if(w>>6&1)return!1;try{var O=n.decodeLength(f);return f.pos-d.pos+O==c}catch{return!1}},n.decode=function(u){u instanceof e||(u=new e(u,0));var c=new e(u),d=u.get(),f=n.decodeLength(u),w=u.pos-c.pos,O=null;if(n.hasContent(d,f,u)){var M=u.pos;if(d==3&&u.get(),O=[],f>=0){for(var q=M+f;u.pos<q;)O[O.length]=n.decode(u);if(u.pos!=q)throw"Content size is not correct for container starting at offset "+M}else try{for(;;){var B=n.decode(u);if(B.tag==0)break;O[O.length]=B}f=M-u.pos}catch(F){throw"Exception while decoding undefined length content: "+F}}else u.pos+=f;return new n(c,w,f,d,O)};var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l="=";function o(u){var c,d,f="";for(c=0;c+3<=u.length;c+=3)d=parseInt(u.substring(c,c+3),16),f+=t.charAt(d>>6)+t.charAt(d&63);for(c+1==u.length?(d=parseInt(u.substring(c,c+1),16),f+=t.charAt(d<<2)):c+2==u.length&&(d=parseInt(u.substring(c,c+2),16),f+=t.charAt(d>>2)+t.charAt((d&3)<<4));(f.length&3)>0;)f+=l;return f}function r(u){var c="",d,f=0,w,O;for(d=0;d<u.length&&u.charAt(d)!=l;++d)O=t.indexOf(u.charAt(d)),!(O<0)&&(f==0?(c+=N(O>>2),w=O&3,f=1):f==1?(c+=N(w<<2|O>>4),w=O&15,f=2):f==2?(c+=N(w),c+=N(O>>2),w=O&3,f=3):(c+=N(w<<2|O>>4),c+=N(O&15),f=0));return f==1&&(c+=N(w<<2)),c}function i(u){var c=r(u),d,f=new Array;for(d=0;2*d<c.length;++d)f[d]=parseInt(c.substring(2*d,2*d+2),16);return f}var s;function a(u,c,d){u!=null&&(typeof u=="number"?this.fromNumber(u,c,d):c==null&&typeof u!="string"?this.fromString(u,256):this.fromString(u,c))}function p(){return new a(null)}function m(u,c,d,f,w,O){for(;--O>=0;){var M=c*this[u++]+d[f]+w;w=Math.floor(M/67108864),d[f++]=M&67108863}return w}function h(u,c,d,f,w,O){for(var M=c&32767,q=c>>15;--O>=0;){var B=this[u]&32767,F=this[u++]>>15,V=q*B+F*M;B=M*B+((V&32767)<<15)+d[f]+(w&1073741823),w=(B>>>30)+(V>>>15)+q*F+(w>>>30),d[f++]=B&1073741823}return w}function y(u,c,d,f,w,O){for(var M=c&16383,q=c>>14;--O>=0;){var B=this[u]&16383,F=this[u++]>>14,V=q*B+F*M;B=M*B+((V&16383)<<14)+d[f]+w,w=(B>>28)+(V>>14)+q*F,d[f++]=B&268435455}return w}navigator.appName=="Microsoft Internet Explorer"?(a.prototype.am=h,s=30):navigator.appName!="Netscape"?(a.prototype.am=m,s=26):(a.prototype.am=y,s=28),a.prototype.DB=s,a.prototype.DM=(1<<s)-1,a.prototype.DV=1<<s;var g=52;a.prototype.FV=Math.pow(2,g),a.prototype.F1=g-s,a.prototype.F2=2*s-g;var S="0123456789abcdefghijklmnopqrstuvwxyz",x=new Array,C,T;for(C="0".charCodeAt(0),T=0;T<=9;++T)x[C++]=T;for(C="a".charCodeAt(0),T=10;T<36;++T)x[C++]=T;for(C="A".charCodeAt(0),T=10;T<36;++T)x[C++]=T;function N(u){return S.charAt(u)}function v(u,c){var d=x[u.charCodeAt(c)];return d==null?-1:d}function _(u){for(var c=this.t-1;c>=0;--c)u[c]=this[c];u.t=this.t,u.s=this.s}function P(u){this.t=1,this.s=u<0?-1:0,u>0?this[0]=u:u<-1?this[0]=u+this.DV:this.t=0}function R(u){var c=p();return c.fromInt(u),c}function U(u,c){var d;if(c==16)d=4;else if(c==8)d=3;else if(c==256)d=8;else if(c==2)d=1;else if(c==32)d=5;else if(c==4)d=2;else{this.fromRadix(u,c);return}this.t=0,this.s=0;for(var f=u.length,w=!1,O=0;--f>=0;){var M=d==8?u[f]&255:v(u,f);if(M<0){u.charAt(f)=="-"&&(w=!0);continue}w=!1,O==0?this[this.t++]=M:O+d>this.DB?(this[this.t-1]|=(M&(1<<this.DB-O)-1)<<O,this[this.t++]=M>>this.DB-O):this[this.t-1]|=M<<O,O+=d,O>=this.DB&&(O-=this.DB)}d==8&&(u[0]&128)!=0&&(this.s=-1,O>0&&(this[this.t-1]|=(1<<this.DB-O)-1<<O)),this.clamp(),w&&a.ZERO.subTo(this,this)}function D(){for(var u=this.s&this.DM;this.t>0&&this[this.t-1]==u;)--this.t}function b(u){if(this.s<0)return"-"+this.negate().toString(u);var c;if(u==16)c=4;else if(u==8)c=3;else if(u==2)c=1;else if(u==32)c=5;else if(u==4)c=2;else return this.toRadix(u);var d=(1<<c)-1,f,w=!1,O="",M=this.t,q=this.DB-M*this.DB%c;if(M-- >0)for(q<this.DB&&(f=this[M]>>q)>0&&(w=!0,O=N(f));M>=0;)q<c?(f=(this[M]&(1<<q)-1)<<c-q,f|=this[--M]>>(q+=this.DB-c)):(f=this[M]>>(q-=c)&d,q<=0&&(q+=this.DB,--M)),f>0&&(w=!0),w&&(O+=N(f));return w?O:"0"}function A(){var u=p();return a.ZERO.subTo(this,u),u}function L(){return this.s<0?this.negate():this}function k(u){var c=this.s-u.s;if(c!=0)return c;var d=this.t;if(c=d-u.t,c!=0)return this.s<0?-c:c;for(;--d>=0;)if((c=this[d]-u[d])!=0)return c;return 0}function H(u){var c=1,d;return(d=u>>>16)!=0&&(u=d,c+=16),(d=u>>8)!=0&&(u=d,c+=8),(d=u>>4)!=0&&(u=d,c+=4),(d=u>>2)!=0&&(u=d,c+=2),(d=u>>1)!=0&&(u=d,c+=1),c}function X(){return this.t<=0?0:this.DB*(this.t-1)+H(this[this.t-1]^this.s&this.DM)}function ne(u,c){var d;for(d=this.t-1;d>=0;--d)c[d+u]=this[d];for(d=u-1;d>=0;--d)c[d]=0;c.t=this.t+u,c.s=this.s}function ae(u,c){for(var d=u;d<this.t;++d)c[d-u]=this[d];c.t=Math.max(this.t-u,0),c.s=this.s}function le(u,c){var d=u%this.DB,f=this.DB-d,w=(1<<f)-1,O=Math.floor(u/this.DB),M=this.s<<d&this.DM,q;for(q=this.t-1;q>=0;--q)c[q+O+1]=this[q]>>f|M,M=(this[q]&w)<<d;for(q=O-1;q>=0;--q)c[q]=0;c[O]=M,c.t=this.t+O+1,c.s=this.s,c.clamp()}function Z(u,c){c.s=this.s;var d=Math.floor(u/this.DB);if(d>=this.t){c.t=0;return}var f=u%this.DB,w=this.DB-f,O=(1<<f)-1;c[0]=this[d]>>f;for(var M=d+1;M<this.t;++M)c[M-d-1]|=(this[M]&O)<<w,c[M-d]=this[M]>>f;f>0&&(c[this.t-d-1]|=(this.s&O)<<w),c.t=this.t-d,c.clamp()}function ce(u,c){for(var d=0,f=0,w=Math.min(u.t,this.t);d<w;)f+=this[d]-u[d],c[d++]=f&this.DM,f>>=this.DB;if(u.t<this.t){for(f-=u.s;d<this.t;)f+=this[d],c[d++]=f&this.DM,f>>=this.DB;f+=this.s}else{for(f+=this.s;d<u.t;)f-=u[d],c[d++]=f&this.DM,f>>=this.DB;f-=u.s}c.s=f<0?-1:0,f<-1?c[d++]=this.DV+f:f>0&&(c[d++]=f),c.t=d,c.clamp()}function Me(u,c){var d=this.abs(),f=u.abs(),w=d.t;for(c.t=w+f.t;--w>=0;)c[w]=0;for(w=0;w<f.t;++w)c[w+d.t]=d.am(0,f[w],c,w,0,d.t);c.s=0,c.clamp(),this.s!=u.s&&a.ZERO.subTo(c,c)}function Ne(u){for(var c=this.abs(),d=u.t=2*c.t;--d>=0;)u[d]=0;for(d=0;d<c.t-1;++d){var f=c.am(d,c[d],u,2*d,0,1);(u[d+c.t]+=c.am(d+1,2*c[d],u,2*d+1,f,c.t-d-1))>=c.DV&&(u[d+c.t]-=c.DV,u[d+c.t+1]=1)}u.t>0&&(u[u.t-1]+=c.am(d,c[d],u,2*d,0,1)),u.s=0,u.clamp()}function Oe(u,c,d){var f=u.abs();if(!(f.t<=0)){var w=this.abs();if(w.t<f.t){c!=null&&c.fromInt(0),d!=null&&this.copyTo(d);return}d==null&&(d=p());var O=p(),M=this.s,q=u.s,B=this.DB-H(f[f.t-1]);B>0?(f.lShiftTo(B,O),w.lShiftTo(B,d)):(f.copyTo(O),w.copyTo(d));var F=O.t,V=O[F-1];if(V!=0){var W=V*(1<<this.F1)+(F>1?O[F-2]>>this.F2:0),z=this.FV/W,K=(1<<this.F1)/W,Q=1<<this.F2,te=d.t,pe=te-F,ie=c==null?p():c;for(O.dlShiftTo(pe,ie),d.compareTo(ie)>=0&&(d[d.t++]=1,d.subTo(ie,d)),a.ONE.dlShiftTo(F,ie),ie.subTo(O,O);O.t<F;)O[O.t++]=0;for(;--pe>=0;){var me=d[--te]==V?this.DM:Math.floor(d[te]*z+(d[te-1]+Q)*K);if((d[te]+=O.am(0,me,d,pe,0,F))<me)for(O.dlShiftTo(pe,ie),d.subTo(ie,d);d[te]<--me;)d.subTo(ie,d)}c!=null&&(d.drShiftTo(F,c),M!=q&&a.ZERO.subTo(c,c)),d.t=F,d.clamp(),B>0&&d.rShiftTo(B,d),M<0&&a.ZERO.subTo(d,d)}}}function ke(u){var c=p();return this.abs().divRemTo(u,null,c),this.s<0&&c.compareTo(a.ZERO)>0&&u.subTo(c,c),c}function ye(u){this.m=u}function it(u){return u.s<0||u.compareTo(this.m)>=0?u.mod(this.m):u}function Fe(u){return u}function ot(u){u.divRemTo(this.m,null,u)}function st(u,c,d){u.multiplyTo(c,d),this.reduce(d)}function at(u,c){u.squareTo(c),this.reduce(c)}ye.prototype.convert=it,ye.prototype.revert=Fe,ye.prototype.reduce=ot,ye.prototype.mulTo=st,ye.prototype.sqrTo=at;function ut(){if(this.t<1)return 0;var u=this[0];if((u&1)==0)return 0;var c=u&3;return c=c*(2-(u&15)*c)&15,c=c*(2-(u&255)*c)&255,c=c*(2-((u&65535)*c&65535))&65535,c=c*(2-u*c%this.DV)%this.DV,c>0?this.DV-c:-c}function Y(u){this.m=u,this.mp=u.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<u.DB-15)-1,this.mt2=2*u.t}function J(u){var c=p();return u.abs().dlShiftTo(this.m.t,c),c.divRemTo(this.m,null,c),u.s<0&&c.compareTo(a.ZERO)>0&&this.m.subTo(c,c),c}function ue(u){var c=p();return u.copyTo(c),this.reduce(c),c}function ve(u){for(;u.t<=this.mt2;)u[u.t++]=0;for(var c=0;c<this.m.t;++c){var d=u[c]&32767,f=d*this.mpl+((d*this.mph+(u[c]>>15)*this.mpl&this.um)<<15)&u.DM;for(d=c+this.m.t,u[d]+=this.m.am(0,f,u,c,0,this.m.t);u[d]>=u.DV;)u[d]-=u.DV,u[++d]++}u.clamp(),u.drShiftTo(this.m.t,u),u.compareTo(this.m)>=0&&u.subTo(this.m,u)}function be(u,c){u.squareTo(c),this.reduce(c)}function fe(u,c,d){u.multiplyTo(c,d),this.reduce(d)}Y.prototype.convert=J,Y.prototype.revert=ue,Y.prototype.reduce=ve,Y.prototype.mulTo=fe,Y.prototype.sqrTo=be;function we(){return(this.t>0?this[0]&1:this.s)==0}function de(u,c){if(u>4294967295||u<1)return a.ONE;var d=p(),f=p(),w=c.convert(this),O=H(u)-1;for(w.copyTo(d);--O>=0;)if(c.sqrTo(d,f),(u&1<<O)>0)c.mulTo(f,w,d);else{var M=d;d=f,f=M}return c.revert(d)}function Ue(u,c){var d;return u<256||c.isEven()?d=new ye(c):d=new Y(c),this.exp(u,d)}a.prototype.copyTo=_,a.prototype.fromInt=P,a.prototype.fromString=U,a.prototype.clamp=D,a.prototype.dlShiftTo=ne,a.prototype.drShiftTo=ae,a.prototype.lShiftTo=le,a.prototype.rShiftTo=Z,a.prototype.subTo=ce,a.prototype.multiplyTo=Me,a.prototype.squareTo=Ne,a.prototype.divRemTo=Oe,a.prototype.invDigit=ut,a.prototype.isEven=we,a.prototype.exp=de,a.prototype.toString=b,a.prototype.negate=A,a.prototype.abs=L,a.prototype.compareTo=k,a.prototype.bitLength=X,a.prototype.mod=ke,a.prototype.modPowInt=Ue,a.ZERO=R(0),a.ONE=R(1);function Ce(u,c){return new a(u,c)}function qe(u,c){if(c<u.length+11)throw new Error("Message too long for RSA");for(var d=new Array,f=u.length-1;f>=0&&c>0;){var w=u.charCodeAt(f--);w<128?d[--c]=w:w>127&&w<2048?(d[--c]=w&63|128,d[--c]=w>>6|192):(d[--c]=w&63|128,d[--c]=w>>6&63|128,d[--c]=w>>12|224)}d[--c]=0;for(var O=0,M=0,q=0;c>2;)q==0&&(M=j.random.randomWords(1,0)[0]),O=M>>q&255,q=(q+8)%32,O!=0&&(d[--c]=O);return d[--c]=2,d[--c]=0,new a(d)}function _e(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function lt(u,c){if(u!=null&&c!=null&&u.length>0&&c.length>0)this.n=Ce(u,16),this.e=parseInt(c,16);else throw new Error("Invalid RSA public key")}function je(u){return u.modPowInt(this.e,this.n)}function Qt(u){var c=qe(u,this.n.bitLength()+7>>3);if(c==null)return null;var d=this.doPublic(c);if(d==null)return null;var f=d.toString(16);return(f.length&1)==0?f:"0"+f}_e.prototype.doPublic=je,_e.prototype.setPublic=lt,_e.prototype.encrypt=Qt;var j={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(u){this.toString=function(){return"CORRUPT: "+this.message},this.message=u},invalid:function(u){this.toString=function(){return"INVALID: "+this.message},this.message=u},bug:function(u){this.toString=function(){return"BUG: "+this.message},this.message=u},notReady:function(u){this.toString=function(){return"NOT READY: "+this.message},this.message=u}}};E.exports&&(E.exports=j),j.cipher.aes=function(u){this._tables[0][0][0]||this._precompute();var c,d,f,w,O,M=this._tables[0][4],q=this._tables[1],B=u.length,F=1;if(B!==4&&B!==6&&B!==8)throw new j.exception.invalid("invalid aes key size");for(this._key=[w=u.slice(0),O=[]],c=B;c<4*B+28;c++)f=w[c-1],(c%B===0||B===8&&c%B===4)&&(f=M[f>>>24]<<24^M[f>>16&255]<<16^M[f>>8&255]<<8^M[f&255],c%B===0&&(f=f<<8^f>>>24^F<<24,F=F<<1^(F>>7)*283)),w[c]=w[c-B]^f;for(d=0;c;d++,c--)f=w[d&3?c:c-4],c<=4||d<4?O[d]=f:O[d]=q[0][M[f>>>24]]^q[1][M[f>>16&255]]^q[2][M[f>>8&255]]^q[3][M[f&255]]},j.cipher.aes.prototype={encrypt:function(u){return this._crypt(u,0)},decrypt:function(u){return this._crypt(u,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var u=this._tables[0],c=this._tables[1],d=u[4],f=c[4],w,O,M,q=[],B=[],F,V,W,z,K,Q;for(w=0;w<256;w++)B[(q[w]=w<<1^(w>>7)*283)^w]=w;for(O=M=0;!d[O];O^=F||1,M=B[M]||1)for(z=M^M<<1^M<<2^M<<3^M<<4,z=z>>8^z&255^99,d[O]=z,f[z]=O,W=q[V=q[F=q[O]]],Q=W*16843009^V*65537^F*257^O*16843008,K=q[z]*257^z*16843008,w=0;w<4;w++)u[w][O]=K=K<<24^K>>>8,c[w][z]=Q=Q<<24^Q>>>8;for(w=0;w<5;w++)u[w]=u[w].slice(0),c[w]=c[w].slice(0)},_crypt:function(u,c){if(u.length!==4)throw new j.exception.invalid("invalid aes block size");var d=this._key[c],f=u[0]^d[0],w=u[c?3:1]^d[1],O=u[2]^d[2],M=u[c?1:3]^d[3],q,B,F,V=d.length/4-2,W,z=4,K=[0,0,0,0],Q=this._tables[c],te=Q[0],pe=Q[1],ie=Q[2],me=Q[3],Se=Q[4];for(W=0;W<V;W++)q=te[f>>>24]^pe[w>>16&255]^ie[O>>8&255]^me[M&255]^d[z],B=te[w>>>24]^pe[O>>16&255]^ie[M>>8&255]^me[f&255]^d[z+1],F=te[O>>>24]^pe[M>>16&255]^ie[f>>8&255]^me[w&255]^d[z+2],M=te[M>>>24]^pe[f>>16&255]^ie[w>>8&255]^me[O&255]^d[z+3],z+=4,f=q,w=B,O=F;for(W=0;W<4;W++)K[c?3&-W:W]=Se[f>>>24]<<24^Se[w>>16&255]<<16^Se[O>>8&255]<<8^Se[M&255]^d[z++],q=f,f=w,w=O,O=M,M=q;return K}},j.bitArray={bitSlice:function(u,c,d){return u=j.bitArray._shiftRight(u.slice(c/32),32-(c&31)).slice(1),d===void 0?u:j.bitArray.clamp(u,d-c)},extract:function(u,c,d){var f,w=Math.floor(-c-d&31);return(c+d-1^c)&-32?f=u[c/32|0]<<32-w^u[c/32+1|0]>>>w:f=u[c/32|0]>>>w,f&(1<<d)-1},concat:function(u,c){if(u.length===0||c.length===0)return u.concat(c);var d=u[u.length-1],f=j.bitArray.getPartial(d);return f===32?u.concat(c):j.bitArray._shiftRight(c,f,d|0,u.slice(0,u.length-1))},bitLength:function(u){var c=u.length,d;return c===0?0:(d=u[c-1],(c-1)*32+j.bitArray.getPartial(d))},clamp:function(u,c){if(u.length*32<c)return u;u=u.slice(0,Math.ceil(c/32));var d=u.length;return c=c&31,d>0&&c&&(u[d-1]=j.bitArray.partial(c,u[d-1]&2147483648>>c-1,1)),u},partial:function(u,c,d){return u===32?c:(d?c|0:c<<32-u)+u*1099511627776},getPartial:function(u){return Math.round(u/1099511627776)||32},equal:function(u,c){if(j.bitArray.bitLength(u)!==j.bitArray.bitLength(c))return!1;var d=0,f;for(f=0;f<u.length;f++)d|=u[f]^c[f];return d===0},_shiftRight:function(u,c,d,f){var w,O=0,M;for(f===void 0&&(f=[]);c>=32;c-=32)f.push(d),d=0;if(c===0)return f.concat(u);for(w=0;w<u.length;w++)f.push(d|u[w]>>>c),d=u[w]<<32-c;return O=u.length?u[u.length-1]:0,M=j.bitArray.getPartial(O),f.push(j.bitArray.partial(c+M&31,c+M>32?d:f.pop(),1)),f},_xor4:function(u,c){return[u[0]^c[0],u[1]^c[1],u[2]^c[2],u[3]^c[3]]}},j.codec.hex={fromBits:function(u){var c="",d;for(d=0;d<u.length;d++)c+=((u[d]|0)+263882790666240).toString(16).substr(4);return c.substr(0,j.bitArray.bitLength(u)/4)},toBits:function(u){var c,d=[],f;for(u=u.replace(/\s|0x/g,""),f=u.length,u=u+"00000000",c=0;c<u.length;c+=8)d.push(parseInt(u.substr(c,8),16)^0);return j.bitArray.clamp(d,f*4)}},j.codec.utf8String={fromBits:function(u){var c="",d=j.bitArray.bitLength(u),f,w;for(f=0;f<d/8;f++)(f&3)===0&&(w=u[f/4]),c+=String.fromCharCode(w>>>24),w<<=8;return decodeURIComponent(escape(c))},toBits:function(u){u=unescape(encodeURIComponent(u));var c=[],d,f=0;for(d=0;d<u.length;d++)f=f<<8|u.charCodeAt(d),(d&3)===3&&(c.push(f),f=0);return d&3&&c.push(j.bitArray.partial(8*(d&3),f)),c}},j.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(u,c,d){var f="",w,O=0,M=j.codec.base64._chars,q=0,B=j.bitArray.bitLength(u);for(d&&(M=M.substr(0,62)+"-_"),w=0;f.length*6<B;)f+=M.charAt((q^u[w]>>>O)>>>26),O<6?(q=u[w]<<6-O,O+=26,w++):(q<<=6,O-=6);for(;f.length&3&&!c;)f+="=";return f},toBits:function(u,c){u=u.replace(/\s|=/g,"");var d=[],f,w=0,O=j.codec.base64._chars,M=0,q;for(c&&(O=O.substr(0,62)+"-_"),f=0;f<u.length;f++){if(q=O.indexOf(u.charAt(f)),q<0)throw new j.exception.invalid("this isn't base64!");w>26?(w-=26,d.push(M^q>>>w),M=q<<32-w):(w+=6,M^=q<<32-w)}return w&56&&d.push(j.bitArray.partial(w&56,M,1)),d}},j.codec.base64url={fromBits:function(u){return j.codec.base64.fromBits(u,1,1)},toBits:function(u){return j.codec.base64.toBits(u,1)}},j.beware===void 0&&(j.beware={}),j.beware["CBC mode is dangerous because it doesn't protect message integrity."]=function(){j.mode.cbc={name:"cbc",encrypt:function(u,c,d,f){if(f&&f.length)throw new j.exception.invalid("cbc can't authenticate data");if(j.bitArray.bitLength(d)!==128)throw new j.exception.invalid("cbc iv must be 128 bits");var w,O=j.bitArray,M=O._xor4,q=O.bitLength(c),B=0,F=[];if(q&7)throw new j.exception.invalid("pkcs#5 padding only works for multiples of a byte");for(w=0;B+128<=q;w+=4,B+=128)d=u.encrypt(M(d,c.slice(w,w+4))),F.splice(w,0,d[0],d[1],d[2],d[3]);return q=(16-(q>>3&15))*16843009,d=u.encrypt(M(d,O.concat(c,[q,q,q,q]).slice(w,w+4))),F.splice(w,0,d[0],d[1],d[2],d[3]),F},decrypt:function(u,c,d,f){if(f&&f.length)throw new j.exception.invalid("cbc can't authenticate data");if(j.bitArray.bitLength(d)!==128)throw new j.exception.invalid("cbc iv must be 128 bits");if(j.bitArray.bitLength(c)&127||!c.length)throw new j.exception.corrupt("cbc ciphertext must be a positive multiple of the block size");var w,O=j.bitArray,M=O._xor4,q,B,F=[];for(f=f||[],w=0;w<c.length;w+=4)q=c.slice(w,w+4),B=M(d,u.decrypt(q)),F.splice(w,0,B[0],B[1],B[2],B[3]),d=q;if(q=F[w-1]&255,q==0||q>16)throw new j.exception.corrupt("pkcs#5 padding corrupt");if(B=q*16843009,!O.equal(O.bitSlice([B,B,B,B],0,q*8),O.bitSlice(F,F.length*32-q*8,F.length*32)))throw new j.exception.corrupt("pkcs#5 padding corrupt");return O.bitSlice(F,0,F.length*32-q*8)}}},j.misc.hmac=function(u,c){this._hash=c=c||j.hash.sha256;var d=[[],[]],f,w=c.prototype.blockSize/32;for(this._baseHash=[new c,new c],u.length>w&&(u=c.hash(u)),f=0;f<w;f++)d[0][f]=u[f]^909522486,d[1][f]=u[f]^1549556828;this._baseHash[0].update(d[0]),this._baseHash[1].update(d[1])},j.misc.hmac.prototype.encrypt=j.misc.hmac.prototype.mac=function(u,c){var d=new this._hash(this._baseHash[0]).update(u,c).finalize();return new this._hash(this._baseHash[1]).update(d).finalize()},j.hash.sha256=function(u){this._key[0]||this._precompute(),u?(this._h=u._h.slice(0),this._buffer=u._buffer.slice(0),this._length=u._length):this.reset()},j.hash.sha256.hash=function(u){return new j.hash.sha256().update(u).finalize()},j.hash.sha256.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(u){typeof u=="string"&&(u=j.codec.utf8String.toBits(u));var c,d=this._buffer=j.bitArray.concat(this._buffer,u),f=this._length,w=this._length=f+j.bitArray.bitLength(u);for(c=512+f&-512;c<=w;c+=512)this._block(d.splice(0,16));return this},finalize:function(){var u,c=this._buffer,d=this._h;for(c=j.bitArray.concat(c,[j.bitArray.partial(1,1)]),u=c.length+2;u&15;u++)c.push(0);for(c.push(Math.floor(this._length/4294967296)),c.push(this._length|0);c.length;)this._block(c.splice(0,16));return this.reset(),d},_init:[],_key:[],_precompute:function(){var u=0,c=2,d;function f(w){return(w-Math.floor(w))*4294967296|0}e:for(;u<64;c++){for(d=2;d*d<=c;d++)if(c%d===0)continue e;u<8&&(this._init[u]=f(Math.pow(c,1/2))),this._key[u]=f(Math.pow(c,1/3)),u++}},_block:function(u){var c,d,f,w,O=u.slice(0),M=this._h,q=this._key,B=M[0],F=M[1],V=M[2],W=M[3],z=M[4],K=M[5],Q=M[6],te=M[7];for(c=0;c<64;c++)c<16?d=O[c]:(f=O[c+1&15],w=O[c+14&15],d=O[c&15]=(f>>>7^f>>>18^f>>>3^f<<25^f<<14)+(w>>>17^w>>>19^w>>>10^w<<15^w<<13)+O[c&15]+O[c+9&15]|0),d=d+te+(z>>>6^z>>>11^z>>>25^z<<26^z<<21^z<<7)+(Q^z&(K^Q))+q[c],te=Q,Q=K,K=z,z=W+d|0,W=V,V=F,F=B,B=d+(F&V^W&(F^V))+(F>>>2^F>>>13^F>>>22^F<<30^F<<19^F<<10)|0;M[0]=M[0]+B|0,M[1]=M[1]+F|0,M[2]=M[2]+V|0,M[3]=M[3]+W|0,M[4]=M[4]+z|0,M[5]=M[5]+K|0,M[6]=M[6]+Q|0,M[7]=M[7]+te|0}},j.random={randomWords:function(u,c){var d=[],f,w=this.isReady(c),O;if(w===this._NOT_READY)throw new j.exception.notReady("generator isn't seeded");for(w&this._REQUIRES_RESEED&&this._reseedFromPools(!(w&this._READY)),f=0;f<u;f+=4)(f+1)%this._MAX_WORDS_PER_BURST===0&&this._gate(),O=this._gen4words(),d.push(O[0],O[1],O[2],O[3]);return this._gate(),d.slice(0,u)},setDefaultParanoia:function(u){this._defaultParanoia=u},addEntropy:function(u,c,d){d=d||"user";var f,w,O,M=new Date().valueOf(),q=this._robins[d],B=this.isReady(),F=0;switch(f=this._collectorIds[d],f===void 0&&(f=this._collectorIds[d]=this._collectorIdNext++),q===void 0&&(q=this._robins[d]=0),this._robins[d]=(this._robins[d]+1)%this._pools.length,typeof u){case"number":c===void 0&&(c=1),this._pools[q].update([f,this._eventId++,1,c,M,1,u|0]);break;case"object":var V=Object.prototype.toString.call(u);if(V==="[object Uint32Array]"){for(O=[],w=0;w<u.length;w++)O.push(u[w]);u=O}else for(V!=="[object Array]"&&(F=1),w=0;w<u.length&&!F;w++)typeof u[w]!="number"&&(F=1);if(!F){if(c===void 0)for(c=0,w=0;w<u.length;w++)for(O=u[w];O>0;)c++,O=O>>>1;this._pools[q].update([f,this._eventId++,2,c,M,u.length].concat(u))}break;case"string":c===void 0&&(c=u.length),this._pools[q].update([f,this._eventId++,3,c,M,u.length]),this._pools[q].update(u);break;default:F=1}if(F)throw new j.exception.bug("random: addEntropy only supports number, array of numbers or string");this._poolEntropy[q]+=c,this._poolStrength+=c,B===this._NOT_READY&&(this.isReady()!==this._NOT_READY&&this._fireEvent("seeded",Math.max(this._strength,this._poolStrength)),this._fireEvent("progress",this.getProgress()))},isReady:function(u){var c=this._PARANOIA_LEVELS[u!==void 0?u:this._defaultParanoia];return this._strength&&this._strength>=c?this._poolEntropy[0]>this._BITS_PER_RESEED&&new Date().valueOf()>this._nextReseed?this._REQUIRES_RESEED|this._READY:this._READY:this._poolStrength>=c?this._REQUIRES_RESEED|this._NOT_READY:this._NOT_READY},getProgress:function(u){var c=this._PARANOIA_LEVELS[u||this._defaultParanoia];return this._strength>=c||this._poolStrength>c?1:this._poolStrength/c},startCollectors:function(){if(!this._collectorsStarted){if(window.addEventListener)window.addEventListener("load",this._loadTimeCollector,!1),window.addEventListener("mousemove",this._mouseCollector,!1);else if(document.attachEvent)document.attachEvent("onload",this._loadTimeCollector),document.attachEvent("onmousemove",this._mouseCollector);else throw new j.exception.bug("can't attach event");this._collectorsStarted=!0}},stopCollectors:function(){!this._collectorsStarted||(window.removeEventListener?(window.removeEventListener("load",this._loadTimeCollector,!1),window.removeEventListener("mousemove",this._mouseCollector,!1)):window.detachEvent&&(window.detachEvent("onload",this._loadTimeCollector),window.detachEvent("onmousemove",this._mouseCollector)),this._collectorsStarted=!1)},addEventListener:function(u,c){this._callbacks[u][this._callbackI++]=c},removeEventListener:function(u,c){var d,f,w=this._callbacks[u],O=[];for(f in w)w.hasOwnProperty(f)&&w[f]===c&&O.push(f);for(d=0;d<O.length;d++)f=O[d],delete w[f]},_pools:[new j.hash.sha256],_poolEntropy:[0],_reseedCount:0,_robins:{},_eventId:0,_collectorIds:{},_collectorIdNext:0,_strength:0,_poolStrength:0,_nextReseed:0,_key:[0,0,0,0,0,0,0,0],_counter:[0,0,0,0],_cipher:void 0,_defaultParanoia:6,_collectorsStarted:!1,_callbacks:{progress:{},seeded:{}},_callbackI:0,_NOT_READY:0,_READY:1,_REQUIRES_RESEED:2,_MAX_WORDS_PER_BURST:65536,_PARANOIA_LEVELS:[0,48,64,96,128,192,256,384,512,768,1024],_MILLISECONDS_PER_RESEED:3e4,_BITS_PER_RESEED:80,_gen4words:function(){for(var u=0;u<4&&(this._counter[u]=this._counter[u]+1|0,!this._counter[u]);u++);return this._cipher.encrypt(this._counter)},_gate:function(){this._key=this._gen4words().concat(this._gen4words()),this._cipher=new j.cipher.aes(this._key)},_reseed:function(u){this._key=j.hash.sha256.hash(this._key.concat(u)),this._cipher=new j.cipher.aes(this._key);for(var c=0;c<4&&(this._counter[c]=this._counter[c]+1|0,!this._counter[c]);c++);},_reseedFromPools:function(u){var c=[],d=0,f;for(this._nextReseed=c[0]=new Date().valueOf()+this._MILLISECONDS_PER_RESEED,f=0;f<16;f++)c.push(Math.random()*4294967296|0);for(f=0;f<this._pools.length&&(c=c.concat(this._pools[f].finalize()),d+=this._poolEntropy[f],this._poolEntropy[f]=0,!(!u&&this._reseedCount&1<<f));f++);this._reseedCount>=1<<this._pools.length&&(this._pools.push(new j.hash.sha256),this._poolEntropy.push(0)),this._poolStrength-=d,d>this._strength&&(this._strength=d),this._reseedCount++,this._reseed(c)},_mouseCollector:function(u){var c=u.x||u.clientX||u.offsetX||0,d=u.y||u.clientY||u.offsetY||0;j.random.addEntropy([c,d],2,"mouse")},_loadTimeCollector:function(u){j.random.addEntropy(new Date().valueOf(),2,"loadtime")},_fireEvent:function(u,c){var d,f=j.random._callbacks[u],w=[];for(d in f)f.hasOwnProperty(d)&&w.push(f[d]);for(d=0;d<w.length;d++)w[d](c)}},function(){try{var u=new Uint32Array(32);crypto.getRandomValues(u),j.random.addEntropy(u,1024,"crypto.getRandomValues")}catch{}}(),function(){for(var u in j.beware)j.beware.hasOwnProperty(u)&&j.beware[u]()}();var Ae={sjcl:j,version:"1.3.10"};Ae.generateAesKey=function(){return{key:j.random.randomWords(8,0),encrypt:function(u){return this.encryptWithIv(u,j.random.randomWords(4,0))},encryptWithIv:function(u,c){var d=new j.cipher.aes(this.key),f=j.codec.utf8String.toBits(u),w=j.mode.cbc.encrypt(d,f,c),O=j.bitArray.concat(c,w);return j.codec.base64.fromBits(O)}}},Ae.create=function(u){return new Ae.EncryptionClient(u)},Ae.EncryptionClient=function(u){var c=this,d=[];c.publicKey=u,c.version=Ae.version;var f=function(F,V){var W,z,K;W=document.createElement(F);for(z in V)V.hasOwnProperty(z)&&(K=V[z],W.setAttribute(z,K));return W},w=function(F){return window.jQuery&&F instanceof jQuery?F[0]:F.nodeType&&F.nodeType===1?F:document.getElementById(F)},O=function(F){var V=[],W,z,K,Q;if(F.typeName()==="INTEGER"&&(W=F.posContent(),z=F.posEnd(),K=F.stream.hexDump(W,z).replace(/[ \n]/g,""),V.push(K)),F.sub!==null)for(Q=0;Q<F.sub.length;Q++)V=V.concat(O(F.sub[Q]));return V},M=function(F){var V=[],W=F.children,z,K;for(K=0;K<W.length;K++)z=W[K],z.nodeType===1&&z.attributes["data-encrypted-name"]?V.push(z):z.children&&z.children.length>0&&(V=V.concat(M(z)));return V},q=function(){var F,V,W,z,K,Q;try{K=i(u),F=n.decode(K)}catch{throw"Invalid encryption key. Please use the key labeled 'Client-Side Encryption Key'"}if(W=O(F),W.length!==2)throw"Invalid encryption key. Please use the key labeled 'Client-Side Encryption Key'";return z=W[0],V=W[1],Q=new _e,Q.setPublic(z,V),Q},B=function(){return{key:j.random.randomWords(8,0),sign:function(F){var V=new j.misc.hmac(this.key,j.hash.sha256),W=V.encrypt(F);return j.codec.base64.fromBits(W)}}};c.encrypt=function(F){var V=q(),W=Ae.generateAesKey(),z=B(),K=W.encrypt(F),Q=z.sign(j.codec.base64.toBits(K)),te=j.bitArray.concat(W.key,z.key),pe=j.codec.base64.fromBits(te),ie=V.encrypt(pe),me="$bt4|javascript_"+c.version.replace(/\./g,"_")+"$",Se=null;return ie&&(Se=o(ie)),me+Se+"$"+K+"$"+Q},c.encryptForm=function(F){var V,W,z,K,Q,te;for(F=w(F),te=M(F);d.length>0;){try{F.removeChild(d[0])}catch{}d.splice(0,1)}for(Q=0;Q<te.length;Q++)V=te[Q],z=V.getAttribute("data-encrypted-name"),W=c.encrypt(V.value),V.removeAttribute("name"),K=f("input",{value:W,type:"hidden",name:z}),d.push(K),F.appendChild(K)},c.onSubmitEncryptForm=function(F,V){var W;F=w(F),W=function(z){return c.encryptForm(F),V?V(z):z},window.jQuery?window.jQuery(F).submit(W):F.addEventListener?F.addEventListener("submit",W,!1):F.attachEvent&&F.attachEvent("onsubmit",W)},c.formEncrypter={encryptForm:c.encryptForm,extractForm:w,onSubmitEncryptForm:c.onSubmitEncryptForm},j.random.startCollectors()},window.Braintree=Ae})(),function(e){E.exports=e()}(function(){return function e(n,t,l){function o(s,a){if(!t[s]){if(!n[s]){var p=typeof Re=="function"&&Re;if(!a&&p)return p(s,!0);if(r)return r(s,!0);var m=new Error("Cannot find module '"+s+"'");throw m.code="MODULE_NOT_FOUND",m}var h=t[s]={exports:{}};n[s][0].call(h.exports,function(y){var g=n[s][1][y];return o(g||y)},h,h.exports,e,n,t,l)}return t[s].exports}for(var r=typeof Re=="function"&&Re,i=0;i<l.length;i++)o(l[i]);return o}({1:[function(e,n,t){(function(l){var o="2.14.0",r=e("braintree-api"),i=e("braintree-paypal"),s=e("braintree-dropin"),a=e("./integrations"),p=e("./constants"),m=e("./lib/fallback-error-handler"),h=e("./lib/lookup-callback-for"),y=e("braintree-utilities").uuid;function g(S,x,C){if(!a.hasOwnProperty(x))throw new Error(x+" is an unsupported integration");C=C||{},r._getConfiguration({enableCORS:C.enableCORS||!1,clientToken:S},function(T,N){var v;if(T){v=h(C)(p.ROOT_ERROR_CALLBACK,m),v({message:T.errors});return}new a[x]({channel:y(),gatewayConfiguration:N,integrationType:x,merchantConfiguration:C,analyticsConfiguration:{sdkVersion:"braintree/web/"+o,merchantAppId:l.location.host}})})}n.exports={api:r,cse:l.Braintree,paypal:i,dropin:s,hostedFields:{VERSION:e("hosted-fields").VERSION},setup:g,VERSION:o}}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./constants":440,"./integrations":445,"./lib/fallback-error-handler":447,"./lib/lookup-callback-for":449,"braintree-api":21,"braintree-dropin":236,"braintree-paypal":344,"braintree-utilities":372,"hosted-fields":377}],2:[function(e,n,t){(function(l){var o=e("braintree-utilities"),r=e("braintree-3ds"),i=e("./parse-client-token"),s=e("./util"),a=e("./sepa-mandate"),p=e("./europe-bank-account"),m=e("./credit-card"),h=e("./coinbase-account"),y=e("./paypal-account"),g=e("./normalize-api-fields").normalizeCreditCardFields,S=e("./request/choose-driver"),x=e("./should-enable-cors"),C=e("./constants");function T(v){var _=v.analyticsConfiguration||{},P=l.braintree?l.braintree.VERSION:null,R=P?"braintree/web/"+P:"";return{sdkVersion:_.sdkVersion||R,merchantAppId:_.merchantAppId||l.location.host}}function N(v){var _,P,R;this.attrs={},v.hasOwnProperty("sharedCustomerIdentifier")&&(this.attrs.sharedCustomerIdentifier=v.sharedCustomerIdentifier),_=i(v.clientToken),R=T(v),this.driver=v.driver||S({enableCORS:x(v)}),this.analyticsUrl=_.analytics?_.analytics.url:void 0,this.clientApiUrl=_.clientApiUrl,this.customerId=v.customerId,this.challenges=_.challenges,this.integration=v.integration||"",this.sdkVersion=R.sdkVersion,this.merchantAppId=R.merchantAppId,P=r.create(this,{container:v.container,clientToken:_}),this.verify3DS=o.bind(P.verify,P),this.attrs.sharedCustomerIdentifierType=v.sharedCustomerIdentifierType,_.merchantAccountId&&(this.attrs.merchantAccountId=_.merchantAccountId),v.clientKey?this.attrs.clientKey=v.clientKey:_.authorizationFingerprint&&(this.attrs.authorizationFingerprint=_.authorizationFingerprint),v.hasOwnProperty("timeout")?this.requestTimeout=v.timeout:this.requestTimeout=6e4}N.prototype.getCreditCards=function(v){this.driver.get(s.joinUrlFragments([this.clientApiUrl,"v1","payment_methods"]),this.attrs,function(_){var P=0,R=_.paymentMethods.length,U=[];for(P;P<R;P++)U.push(new m(_.paymentMethods[P]));return U},v,this.requestTimeout)},N.prototype.tokenizeCoinbase=function(v,_){v.options={validate:!1},this.addCoinbase(v,function(P,R){P?_(P,null):R&&R.nonce?_(P,R):_("Unable to tokenize coinbase account.",null)})},N.prototype.tokenizePayPalAccount=function(v,_){v.options={validate:!1},this.addPayPalAccount(v,function(P,R){P?_(P,null):R&&R.nonce?_(null,R):_("Unable to tokenize paypal account.",null)})},N.prototype.tokenizeCard=function(v,_){v.options={validate:!1},this.addCreditCard(v,function(P,R){R&&R.nonce?_(P,R.nonce,{type:R.type,details:R.details}):_("Unable to tokenize card.",null)})},N.prototype.lookup3DS=function(v,_){var P=s.joinUrlFragments([this.clientApiUrl,"v1/payment_methods",v.nonce,"three_d_secure/lookup"]),R=s.mergeOptions(this.attrs,{amount:v.amount});this.driver.post(P,R,function(U){return U},_,this.requestTimeout)},N.prototype.createSEPAMandate=function(v,_){var P=s.mergeOptions(this.attrs,{sepaMandate:v});this.driver.post(s.joinUrlFragments([this.clientApiUrl,"v1","sepa_mandates.json"]),P,function(R){return{sepaMandate:new a(R.europeBankAccounts[0].sepaMandates[0]),sepaBankAccount:new p(R.europeBankAccounts[0])}},_,this.requestTimeout)},N.prototype.getSEPAMandate=function(v,_){var P=s.mergeOptions(this.attrs,v);this.driver.get(s.joinUrlFragments([this.clientApiUrl,"v1","sepa_mandates.json"]),P,function(R){return{sepaMandate:new a(R.sepaMandates[0])}},_,this.requestTimeout)},N.prototype.addCoinbase=function(v,_){var P;delete v.share,P=s.mergeOptions(this.attrs,{coinbaseAccount:v,_meta:{integration:this.integration||"custom",source:"coinbase"}}),this.driver.post(s.joinUrlFragments([this.clientApiUrl,"v1","payment_methods/coinbase_accounts"]),P,function(R){return new h(R.coinbaseAccounts[0])},_,this.requestTimeout)},N.prototype.addPayPalAccount=function(v,_){var P;delete v.share,P=s.mergeOptions(this.attrs,{paypalAccount:v,_meta:{integration:this.integration||"paypal",source:"paypal"}}),this.driver.post(s.joinUrlFragments([this.clientApiUrl,"v1","payment_methods","paypal_accounts"]),P,function(R){return new y(R.paypalAccounts[0])},_,this.requestTimeout)},N.prototype.addCreditCard=function(v,_){var P,R,U=v.share;delete v.share,R=g(v),P=s.mergeOptions(this.attrs,{share:U,creditCard:R,_meta:{integration:this.integration||"custom",source:"form"}}),this.driver.post(s.joinUrlFragments([this.clientApiUrl,"v1","payment_methods/credit_cards"]),P,function(D){return new m(D.creditCards[0])},_,this.requestTimeout)},N.prototype.sendAnalyticsEvents=function(v,_){var P,R,U=this.analyticsUrl,D=[];if(v=s.isArray(v)?v:[v],!U){_&&_.apply(null,[null,{}]);return}for(R in v)v.hasOwnProperty(R)&&D.push({kind:v[R]});P=s.mergeOptions(this.attrs,{braintree_library_version:this.sdkVersion,analytics:D,_meta:{merchantAppId:this.merchantAppId,platform:"web",platformVersion:l.navigator.userAgent,integrationType:this.integration,sdkVersion:this.sdkVersion}}),this.driver.post(U,P,function(b){return b},_,C.ANALYTICS_TIMEOUT_MS)},N.prototype.decryptBrowserswitchPayload=function(v,_){var P=s.mergeOptions(this.attrs,{asymmetric_encrypted_payload:v}),R=s.joinUrlFragments([this.clientApiUrl,"/v1/paypal_browser_switch/decrypt"]);this.driver.post(R,P,function(U){return U},_,this.requestTimeout)},N.prototype.encryptBrowserswitchReturnPayload=function(v,_,P){var R=s.mergeOptions(this.attrs,{payload:v,aesKey:_}),U=s.joinUrlFragments([this.clientApiUrl,"/v1/paypal_browser_switch/encrypt"]);this.driver.post(U,R,function(D){return D},P,this.requestTimeout)},N.prototype.exchangePaypalTokenForConsentCode=function(v,_){var P=s.mergeOptions(this.attrs,v);this.attrs.merchantAccountId&&(P.merchant_account_id=this.attrs.merchantAccountId);var R=s.joinUrlFragments([this.clientApiUrl,"/v1/paypal_account_service/merchant_consent"]);this.driver.post(R,P,function(U){return U},_,this.requestTimeout)},N.prototype.getAmexRewardsBalance=function(v,_){var P=s.mergeOptions(this.attrs,v);P.nonce&&(P.payment_method_nonce=P.nonce,delete P.nonce),this.driver.get(s.joinUrlFragments([this.clientApiUrl,"v1/payment_methods/amex_rewards_balance"]),P,function(R){return R},_,this.requestTimeout)},n.exports=N}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./coinbase-account":3,"./constants":4,"./credit-card":5,"./europe-bank-account":6,"./normalize-api-fields":8,"./parse-client-token":9,"./paypal-account":10,"./request/choose-driver":13,"./sepa-mandate":18,"./should-enable-cors":19,"./util":20,"braintree-3ds":29,"braintree-utilities":43}],3:[function(e,n,t){var l=["nonce","type","description","details"];function o(r){var i,s;for(i=0;i<l.length;i++)s=l[i],this[s]=r[s]}n.exports=o},{}],4:[function(e,n,t){n.exports={apiUrls:{production:"https://api.braintreegateway.com:443",sandbox:"https://api.sandbox.braintreegateway.com:443"},errors:{UNKNOWN_ERROR:"Unknown error",INVALID_TIMEOUT:"Timeout must be a number"},ANALYTICS_TIMEOUT_MS:4e3}},{}],5:[function(e,n,t){var l=["billingAddress","branding","createdAt","createdAtMerchant","createdAtMerchantName","details","isLocked","lastUsedAt","lastUsedAtMerchant","lastUsedAtMerchantName","lastUsedByCurrentMerchant","nonce","securityQuestions","type"];function o(r){var i,s;for(i=0;i<l.length;i++)s=l[i],this[s]=r[s]}n.exports=o},{}],6:[function(e,n,t){function l(o){var r=["bic","maskedIBAN","nonce","accountHolderName"],i,s=0;for(s=0;s<r.length;s++)i=r[s],this[i]=o[i]}n.exports=l},{}],7:[function(e,n,t){var l=e("./parse-client-token"),o=e("./util"),r=e("./request/choose-driver"),i=e("./should-enable-cors"),s=e("./constants");function a(m){var h=m.split("_"),y=h[0],g=h.slice(2).join("_");return{merchantId:g,environment:y}}function p(m,h){var y,g,S,x=r({enableCORS:i(m)}),C=m.clientKey,T={};C?(T.clientKey=C,g=a(C),y=s.apiUrls[g.environment]+"/merchants/"+g.merchantId+"/client_api/v1/configuration"):(S=l(m.clientToken),S.authorizationFingerprint&&(T.authorizationFingerprint=S.authorizationFingerprint,y=S.configUrl)),x.get(y,T,function(N){return o.mergeOptions(S,N)},h,m.timeout)}n.exports=p},{"./constants":4,"./parse-client-token":9,"./request/choose-driver":13,"./should-enable-cors":19,"./util":20}],8:[function(e,n,t){function l(o){var r,i={billingAddress:o.billingAddress||{}};for(r in o)if(!!o.hasOwnProperty(r))switch(r.replace(/_/,"").toLowerCase()){case"postalcode":case"countryname":case"countrycodenumeric":case"countrycodealpha2":case"countrycodealpha3":case"region":case"extendedaddress":case"locality":case"firstname":case"lastname":case"company":case"streetaddress":i.billingAddress[r]=o[r];break;default:i[r]=o[r]}return i}n.exports={normalizeCreditCardFields:l}},{}],9:[function(e,n,t){var l=e("braintree-utilities");e("./polyfill");function o(r){var i;if(!r)throw new Error("Braintree API Client Misconfigured: clientToken required.");if(typeof r=="object"&&r!==null)i=r;else{try{r=window.atob(r)}catch{}try{i=JSON.parse(r)}catch{throw new Error("Braintree API Client Misconfigured: clientToken is not valid JSON.")}}if(!i.hasOwnProperty("clientApiUrl")||!l.isWhitelistedDomain(i.clientApiUrl))throw new Error("Braintree API Client Misconfigured: the clientApiUrl provided in the clientToken is invalid.");return i}n.exports=o},{"./polyfill":11,"braintree-utilities":43}],10:[function(e,n,t){var l=["nonce","type","description","details"];function o(r){var i,s;for(i=0;i<l.length;i++)s=l[i],this[s]=r[s]}n.exports=o},{}],11:[function(e,n,t){(function(l){var o=function(r){var i=new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})([=]{1,2})?$"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="";if(!i.test(r))throw new Error("Non base64 encoded input passed to window.atob polyfill");var p=0;do{var m=s.indexOf(r.charAt(p++)),h=s.indexOf(r.charAt(p++)),y=s.indexOf(r.charAt(p++)),g=s.indexOf(r.charAt(p++)),S=(m&63)<<2|h>>4&3,x=(h&15)<<4|y>>2&15,C=(y&3)<<6|g&63;a+=String.fromCharCode(S)+(x?String.fromCharCode(x):"")+(C?String.fromCharCode(C):"")}while(p<r.length);return a};l.atob=l.atob||o,n.exports={atobPolyfill:o}}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],12:[function(e,n,t){(function(l){var o=e("../util"),r=e("./prep-body"),i=e("./parse-body"),s=e("../constants"),a=l.XMLHttpRequest&&"withCredentials"in new l.XMLHttpRequest;function p(){return a?new XMLHttpRequest:new XDomainRequest}function m(g,S,x,C,T){var N=o.createURLParams(g,S);y("GET",N,null,x,C,T)}function h(g,S,x,C,T){y("POST",g,S,x,C,T)}function y(g,S,x,C,T,N){var v,_,P=p();T=T||function(){},a?P.onreadystatechange=function(){P.readyState===4&&(v=P.status,_=i(P.responseText),v>=400||v===0?T.call(null,_||{errors:s.errors.UNKNOWN_ERROR},null):v>0&&T.call(null,null,C(_)))}:(P.onload=function(){T.call(null,null,C(i(P.responseText)))},P.onerror=function(){T.call(null,P.responseText,null)},P.onprogress=function(){},P.ontimeout=function(){T.call(null,{errors:s.errors.UNKNOWN_ERROR},null)}),P.open(g,S,!0),P.timeout=N==null?6e4:N,a&&g==="POST"&&P.setRequestHeader("Content-Type","application/json"),setTimeout(function(){P.send(r(g,x))},0)}n.exports={get:m,post:h}}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../constants":4,"../util":20,"./parse-body":16,"./prep-body":17}],13:[function(e,n,t){var l=e("./jsonp-driver"),o=e("./ajax-driver"),r=e("../util");function i(s){var a=r.getUserAgent(),p=!(r.isHTTP()&&/(MSIE\s(8|9))|(Phantom)/.test(a));return s=s||{},s.enableCORS&&p?o:l}n.exports=i},{"../util":20,"./ajax-driver":12,"./jsonp-driver":14}],14:[function(e,n,t){var l=e("./jsonp"),o=e("../constants"),r=[];function i(h,y){return h.status>=400?[h,null]:[null,y(h)]}function s(){}function a(h,y,g,S,x,C){var T;x=x||s,C==null&&(C=6e4),T=S(h,y,function(N,v){r[v]&&(clearTimeout(r[v]),x.apply(null,i(N,function(_){return g(_)})))}),typeof C=="number"?r[T]=setTimeout(function(){r[T]=null,x.apply(null,[{errors:o.errors.UNKNOWN_ERROR},null])},C):x.apply(null,[{errors:o.errors.INVALID_TIMEOUT},null])}function p(h,y,g,S,x){y._method="POST",a(h,y,g,l.get,S,x)}function m(h,y,g,S,x){a(h,y,g,l.get,S,x)}n.exports={get:m,post:p}},{"../constants":4,"./jsonp":15}],15:[function(e,n,t){(function(l){var o=e("../util"),r,i=l,s={};function a(h,y){var g=document.createElement("script"),S=!1;g.src=h,g.async=!0;var x=y||s.error;typeof x=="function"&&(g.onerror=function(C){x({url:h,event:C})}),g.onload=g.onreadystatechange=function(){!S&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")&&(S=!0,g.onload=g.onreadystatechange=null,g&&g.parentNode&&g.parentNode.removeChild(g))},r||(r=document.getElementsByTagName("head")[0]),r.appendChild(g)}function p(h,y,g,S){var x,C;return S=S||s.callbackName||"callback",C=S+"_json"+o.generateUUID(),y[S]=C,x=o.createURLParams(h,y),i[C]=function(T){g(T,C);try{delete i[C]}catch{}i[C]=null},a(x),C}function m(h){s=h}n.exports={get:p,init:m}}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../util":20}],16:[function(e,n,t){n.exports=function(l){try{l=JSON.parse(l)}catch{}return l}},{}],17:[function(e,n,t){var l=e("lodash.isstring");n.exports=function(o,r){if(!l(o))throw new Error("Method must be a string");return o.toLowerCase()!=="get"&&r!=null&&(r=l(r)?r:JSON.stringify(r)),r}},{"lodash.isstring":51}],18:[function(e,n,t){function l(o){var r=0,i,s=["accountHolderName","bic","longFormURL","mandateReferenceNumber","maskedIBAN","shortForm"];for(r=0;r<s.length;r++)i=s[r],this[i]=o[i]}n.exports=l},{}],19:[function(e,n,t){n.exports=function(l){return l.enableCORS!=null?l.enableCORS:l.merchantConfiguration?l.merchantConfiguration.enableCORS:!1}},{}],20:[function(e,n,t){(function(l){var o=e("lodash.isempty"),r=e("lodash.isobject");function i(S){var x=[],C,T;for(T=0;T<S.length;T++)C=S[T],C.charAt(C.length-1)==="/"&&(C=C.substring(0,C.length-1)),C.charAt(0)==="/"&&(C=C.substring(1)),x.push(C);return x.join("/")}function s(S){return S&&typeof S=="object"&&typeof S.length=="number"&&Object.prototype.toString.call(S)==="[object Array]"||!1}function a(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(S){var x=Math.floor(Math.random()*16),C=S==="x"?x:x&3|8;return C.toString(16)})}function p(S,x){var C={},T;for(T in S)S.hasOwnProperty(T)&&(C[T]=S[T]);for(T in x)x.hasOwnProperty(T)&&(C[T]=x[T]);return C}function m(S,x){var C=[],T,N,v;for(v in S)!S.hasOwnProperty(v)||(N=S[v],x?s(S)?T=x+"[]":T=x+"["+v+"]":T=v,typeof N=="object"?C.push(m(N,T)):C.push(encodeURIComponent(T)+"="+encodeURIComponent(N)));return C.join("&")}function h(S,x){return S=S||"",!o(x)&&r(x)&&(S+=S.indexOf("?")===-1?"?":"",S+=S.indexOf("=")!==-1?"&":"",S+=m(x)),S}function y(){return l.navigator.userAgent}function g(){return l.location.protocol==="http:"}n.exports={joinUrlFragments:i,isArray:s,generateUUID:a,mergeOptions:p,stringify:m,createURLParams:h,getUserAgent:y,isHTTP:g}}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"lodash.isempty":44,"lodash.isobject":50}],21:[function(e,n,t){var l=e("./lib/client"),o=e("./lib/util"),r=e("./lib/parse-client-token"),i=e("./lib/get-configuration");function s(a){return new l(a)}n.exports={Client:l,configure:s,util:o,parseClientToken:r,_getConfiguration:i}},{"./lib/client":2,"./lib/get-configuration":7,"./lib/parse-client-token":9,"./lib/util":20}],22:[function(e,n,t){function l(o,r){if(r=r||"["+o+"] is not a valid DOM Element",o&&o.nodeType&&o.nodeType===1)return o;if(o&&window.jQuery&&(o instanceof jQuery||"jquery"in Object(o))&&o.length!==0)return o[0];if(typeof o=="string"&&document.getElementById(o))return document.getElementById(o);throw new Error(r)}n.exports={normalizeElement:l}},{}],23:[function(e,n,t){function l(r,i,s,a){r.addEventListener?r.addEventListener(i,s,a):r.attachEvent&&r.attachEvent("on"+i,s)}function o(r,i,s,a){r.removeEventListener?r.removeEventListener(i,s,a):r.detachEvent&&r.detachEvent("on"+i,s)}n.exports={addEventListener:l,removeEventListener:o}},{}],24:[function(e,n,t){var l=Object.prototype.toString;function o(i){return l.call(i)==="[object Function]"}function r(i,s){return function(){i.apply(s,arguments)}}n.exports={bind:r,isFunction:o}},{}],25:[function(e,n,t){function l(){return window.location.protocol==="https:"}function o(a){switch(a){case null:case void 0:return"";case!0:return"1";case!1:return"0";default:return encodeURIComponent(a)}}function r(a,p){var m=[],h,y;for(y in a)if(a.hasOwnProperty(y)){var g=a[y];p?h=p+"["+y+"]":h=y,typeof g=="object"?m.push(r(g,h)):g!=null&&m.push(o(h)+"="+o(g))}return m.join("&")}function i(a){for(var p={},m=a.split("&"),h=0;h<m.length;h++){var y=m[h].split("="),g=y[0],S=decodeURIComponent(y[1]);p[g]=S}return p}function s(a){var p=a.split("?");return p.length!==2?{}:i(p[1])}n.exports={isBrowserHttps:l,makeQueryString:r,decodeQueryString:i,getParams:s}},{}],26:[function(e,n,t){var l=e("./lib/dom"),o=e("./lib/url"),r=e("./lib/fn"),i=e("./lib/events");n.exports={normalizeElement:l.normalizeElement,isBrowserHttps:o.isBrowserHttps,makeQueryString:o.makeQueryString,decodeQueryString:o.decodeQueryString,getParams:o.getParams,removeEventListener:i.removeEventListener,addEventListener:i.addEventListener,bind:r.bind,isFunction:r.isFunction}},{"./lib/dom":22,"./lib/events":23,"./lib/fn":24,"./lib/url":25}],27:[function(e,n,t){var l=e("braintree-utilities"),o=e("../shared/receiver"),r="1.3.0",i,s;function a(h,y){var g=window.getComputedStyle?getComputedStyle(h):h.currentStyle;return g[y]}function p(){return{html:{height:i.style.height||"",overflow:a(i,"overflow"),position:a(i,"position")},body:{height:s.style.height||"",overflow:a(s,"overflow")}}}function m(h,y){this.assetsUrl=h,this.container=y||document.body,this.iframe=null,i=document.documentElement,s=document.body,this.merchantPageDefaultStyles=p()}m.prototype.get=function(h,y){var g=this,S=this.constructAuthorizationURL(h);this.container&&l.isFunction(this.container)?this.container(S+"&no_style=1"):this.insertIframe(S),new o(function(x){l.isFunction(g.container)||g.removeIframe(),y(x)})},m.prototype.removeIframe=function(){this.container&&this.container.nodeType&&this.container.nodeType===1?this.container.removeChild(this.iframe):this.container&&window.jQuery&&this.container instanceof jQuery?$(this.iframe,this.container).remove():typeof this.container=="string"&&document.getElementById(this.container).removeChild(this.iframe),this.unlockMerchantWindowSize()},m.prototype.insertIframe=function(h){var y=document.createElement("iframe");if(y.src=h,this.applyStyles(y),this.lockMerchantWindowSize(),this.container&&this.container.nodeType&&this.container.nodeType===1)this.container.appendChild(y);else if(this.container&&window.jQuery&&this.container instanceof jQuery&&this.container.length!==0)this.container.append(y);else if(typeof this.container=="string"&&document.getElementById(this.container))document.getElementById(this.container).appendChild(y);else throw new Error("Unable to find valid container for iframe.");this.iframe=y},m.prototype.applyStyles=function(h){h.style.position="fixed",h.style.top="0",h.style.left="0",h.style.height="100%",h.style.width="100%",h.setAttribute("frameborder","0"),h.setAttribute("allowTransparency","true"),h.style.border="0",h.style.zIndex="99999"},m.prototype.lockMerchantWindowSize=function(){i.style.overflow="hidden",s.style.overflow="hidden",s.style.height="100%"},m.prototype.unlockMerchantWindowSize=function(){var h=this.merchantPageDefaultStyles;s.style.height=h.body.height,s.style.overflow=h.body.overflow,i.style.overflow=h.html.overflow},m.prototype.constructAuthorizationURL=function(h){var y,g=window.location.href;return g.indexOf("#")>-1&&(g=g.split("#")[0]),y=l.makeQueryString({acsUrl:h.acsUrl,pareq:h.pareq,termUrl:h.termUrl+"&three_d_secure_version="+r,md:h.md,parentUrl:g}),this.assetsUrl+"/3ds/"+r+"/html/style_frame?"+y},n.exports=m},{"../shared/receiver":34,"braintree-utilities":26}],28:[function(e,n,t){var l=e("braintree-utilities"),o=e("./authorization_service"),r=e("./loader");function i(){}function s(a,p){p=p||{},this.clientToken=p.clientToken,this.container=p.container,this.api=a,this.nonce=null,this._loader=null,this._boundHandleUserClose=l.bind(this._handleUserClose,this)}s.prototype.verify=function(a,p){if(!l.isFunction(p))throw this.api.sendAnalyticsEvents("3ds.web.no_callback"),new Error("No suitable callback argument was given");l.isFunction(a.onUserClose)&&(this._onUserClose=a.onUserClose),l.isFunction(a.onLookupComplete)&&(this._onLookupComplete=a.onLookupComplete),(a.useDefaultLoader===void 0||a.useDefaultLoader===!0)&&this._createDefaultLoader();var m={nonce:"",amount:a.amount},h=a.creditCard;if(typeof h=="string")m.nonce=h,this.api.sendAnalyticsEvents("3ds.web.verify.nonce"),this.startVerification(m,p);else{var y=this,g=function(S,x){if(S)return y._removeDefaultLoader(),p(S);m.nonce=x,y.startVerification(m,p)};this.api.sendAnalyticsEvents("3ds.web.verify.credit_card"),this.api.tokenizeCard(h,g)}},s.prototype.startVerification=function(a,p){this.api.lookup3DS(a,l.bind(this.handleLookupResponse(p),this))},s.prototype.handleLookupResponse=function(a){var p=this;return function(m,h){var y;this._onLookupComplete(),m?a(m.error):h.lookup&&h.lookup.acsUrl&&h.lookup.acsUrl.length>0?(p.nonce=h.paymentMethod.nonce,y=new o(this.clientToken.assetsUrl,this.container),y.get(h.lookup,l.bind(this.handleAuthenticationResponse(a),this)),this._detachListeners(),this._attachListeners()):(p.nonce=h.paymentMethod.nonce,a(null,{nonce:p.nonce,verificationDetails:h.threeDSecureInfo}))}},s.prototype.handleAuthenticationResponse=function(a){return function(p){var m,h=l.decodeQueryString(p);h.user_closed||(m=JSON.parse(h.auth_response),m.success?a(null,{nonce:m.paymentMethod.nonce,verificationDetails:m.threeDSecureInfo}):m.threeDSecureInfo&&m.threeDSecureInfo.liabilityShiftPossible?a(null,{nonce:this.nonce,verificationDetails:m.threeDSecureInfo}):a(m.error))}},s.prototype._attachListeners=function(){l.addEventListener(window,"message",this._boundHandleUserClose)},s.prototype._detachListeners=function(){l.removeEventListener(window,"message",this._boundHandleUserClose)},s.prototype._createDefaultLoader=function(){this._loader=new r,document.body.appendChild(this._loader.getElement())},s.prototype._removeDefaultLoader=function(){if(!!this._loader){var a=this._loader.getElement(),p=a.parentNode;p&&p.removeChild(a),this._loader.dispose(),this._loader=null}},s.prototype._handleUserClose=function(a){a.data==="user_closed=true"&&this._onUserClose()},s.prototype._onUserClose=i,s.prototype._onLookupComplete=function(){this._removeDefaultLoader()},n.exports=s},{"./authorization_service":27,"./loader":30,"braintree-utilities":26}],29:[function(e,n,t){var l=e("./client");n.exports={create:function(o,r){var i=new l(o,r);return i}}},{"./client":28}],30:[function(e,n,t){var l=e("./loader_display"),o=e("./loader_message"),r=e("./loader_spinner");function i(){this._element=document.createElement("div"),this._element.style.cssText=this._cssDeclarations,this._display=null,this._initialize()}i.prototype._cssDeclarations=["filter:progid:DXImageTransform.Microsoft.Gradient(StartColorStr=#7F000000, EndColorStr=#7F000000)","background-color: rgba(0, 0, 0, 0.5)","display: table","height: 100%","left: 0","position: fixed","right: 0","top: 0","width: 100%","z-index: 99999"].join(";"),i.prototype.getElement=function(){return this._element},i.prototype.dispose=function(){this._display.dispose(),this._display=null,this._element=null},i.prototype._initialize=function(){var s=new r,a=window.SVGElement&&window.SVGAnimateElement&&window.SVGAnimateTransformElement;a||(s=new o("Loading...")),this._display=new l(s),this.getElement().appendChild(this._display.getElement())},n.exports=i},{"./loader_display":31,"./loader_message":32,"./loader_spinner":33}],31:[function(e,n,t){function l(o){this._element=document.createElement("div"),this._element.style.cssText=this._cssDeclarations,this._displayObject=o,this._initialize()}l.prototype._cssDeclarations=["display: table-cell","vertical-align: middle"].join(";"),l.prototype.getElement=function(){return this._element},l.prototype.dispose=function(){this._displayObject.dispose(),this._displayObject=null,this._element=null},l.prototype._initialize=function(){this.getElement().appendChild(this._displayObject.getElement())},n.exports=l},{}],32:[function(e,n,t){function l(o){this._element=document.createElement("div"),this._element.style.cssText=this._cssDeclarations,this._element.innerHTML=o}l.prototype._cssDeclarations=["color: #fff","font-family: Helvetica, sans-serif","font-size: 12px","text-align: center"].join(";"),l.prototype.getElement=function(){return this._element},l.prototype.dispose=function(){this._element=null},n.exports=l},{}],33:[function(e,n,t){function l(){this._element=document.createElement("div"),this._element.style.cssText=this._cssDeclarations,this._element.innerHTML=this._markup}l.prototype._cssDeclarations=["height: 36px","margin-left: auto","margin-right: auto","width: 36px"].join(";"),l.prototype._markup=['<svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"','width="100%" height="100%" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve">','  <path fill="#FFF" d="M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z">','    <animateTransform attributeType="xml"','    attributeName="transform"','    type="rotate"','    from="0 25 25"','    to="360 25 25"','    dur="780ms"','    repeatCount="indefinite"','    calcMode="spline"','    keySplines="0.44, 0.22, 0, 1"','    keyTimes="0;1"/>',"  </path>","</svg>"].join(""),l.prototype.getElement=function(){return this._element},l.prototype.dispose=function(){this._element=null},n.exports=l},{}],34:[function(e,n,t){var l=e("braintree-utilities");function o(r){this.postMessageReceiver(r),this.hashChangeReceiver(r)}o.prototype.postMessageReceiver=function(r){var i=this;this.wrappedCallback=function(s){var a=s.data;(/^(auth_response=)/.test(a)||a==="user_closed=true")&&(r(a),i.stopListening())},l.addEventListener(window,"message",this.wrappedCallback)},o.prototype.hashChangeReceiver=function(r){var i,s=window.location.hash,a=this;this.poll=setInterval(function(){i=window.location.hash,i.length>0&&i!==s&&(a.stopListening(),i=i.substring(1,i.length),r(i),s.length>0?window.location.hash=s:window.location.hash="")},10)},o.prototype.stopListening=function(){clearTimeout(this.poll),l.removeEventListener(window,"message",this.wrappedCallback)},n.exports=o},{"braintree-utilities":26}],35:[function(e,n,t){var l=Array.prototype.indexOf,o;l?o=function(r,i){return r.indexOf(i)}:o=function(i,s){for(var a=0,p=i.length;a<p;a++)if(i[a]===s)return a;return-1},n.exports={indexOf:o}},{}],36:[function(e,n,t){function l(r){var i,s,a="";for(i=0;i<r.length;i++)a+="%",s=r[i].charCodeAt(0).toString(16).toUpperCase(),s.length<2&&(a+="0"),a+=s;return a}function o(r){return decodeURIComponent(l(atob(r)))}n.exports={decodeUtf8:o}},{}],37:[function(e,n,t){arguments[4][22][0].apply(t,arguments)},{dup:22}],38:[function(e,n,t){function l(i,s,a,p){i.addEventListener?i.addEventListener(s,a,p||!1):i.attachEvent&&i.attachEvent("on"+s,a)}function o(i,s,a,p){i.removeEventListener?i.removeEventListener(s,a,p||!1):i.detachEvent&&i.detachEvent("on"+s,a)}function r(i){i.preventDefault?i.preventDefault():i.returnValue=!1}n.exports={addEventListener:l,removeEventListener:o,preventDefault:r}},{}],39:[function(e,n,t){var l=Object.prototype.toString;function o(i){return l.call(i)==="[object Function]"}function r(i,s){return function(){return i.apply(s,arguments)}}n.exports={bind:r,isFunction:o}},{}],40:[function(e,n,t){function l(r){var i,s,a,p,m=[{min:0,max:180,chars:7},{min:181,max:620,chars:14},{min:621,max:960,chars:22}];for(p=m.length,r=r||window.innerWidth,s=0;s<p;s++)a=m[s],r>=a.min&&r<=a.max&&(i=a.chars);return i||60}function o(r,i){var s,a;return r.indexOf("@")===-1?r:(r=r.split("@"),s=r[0],a=r[1],s.length>i&&(s=s.slice(0,i)+"..."),a.length>i&&(a="..."+a.slice(-i)),s+"@"+a)}n.exports={truncateEmail:o,getMaxCharLength:l}},{}],41:[function(e,n,t){var l=e("./array");function o(){return window.location.protocol==="https:"}function r(y){switch(y){case null:case void 0:return"";case!0:return"1";case!1:return"0";default:return encodeURIComponent(y)}}function i(y,g){var S=[],x,C;for(C in y)if(y.hasOwnProperty(C)){var T=y[C];g?x=g+"["+C+"]":x=C,typeof T=="object"?S.push(i(T,x)):T!=null&&S.push(r(x)+"="+r(T))}return S.join("&")}function s(y){for(var g={},S=y.split("&"),x=0;x<S.length;x++){var C=S[x].split("="),T=C[0],N=decodeURIComponent(C[1]);g[T]=N}return g}function a(y){var g=y.split("?");return g.length!==2?{}:s(g[1])}var p=document.createElement("a"),m=["paypal.com","braintreepayments.com","braintreegateway.com","localhost"];function h(y){if(y=y.toLowerCase(),!/^http/.test(y))return!1;p.href=y;var g=p.hostname.split("."),S=g.slice(-2).join(".");return l.indexOf(m,S)!==-1}n.exports={isBrowserHttps:o,makeQueryString:i,decodeQueryString:s,getParams:a,isWhitelistedDomain:h}},{"./array":35}],42:[function(e,n,t){function l(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var r=Math.random()*16|0,i=o==="x"?r:r&3|8;return i.toString(16)})}n.exports=l},{}],43:[function(e,n,t){var l=e("./lib/dom"),o=e("./lib/url"),r=e("./lib/fn"),i=e("./lib/events"),s=e("./lib/string"),a=e("./lib/array"),p=e("./lib/base64"),m=e("./lib/uuid");n.exports={string:s,array:a,normalizeElement:l.normalizeElement,isBrowserHttps:o.isBrowserHttps,makeQueryString:o.makeQueryString,decodeQueryString:o.decodeQueryString,getParams:o.getParams,isWhitelistedDomain:o.isWhitelistedDomain,removeEventListener:i.removeEventListener,addEventListener:i.addEventListener,preventDefault:i.preventDefault,bind:r.bind,isFunction:r.isFunction,base64ToUtf8:p.decodeUtf8,uuid:m}},{"./lib/array":35,"./lib/base64":36,"./lib/dom":37,"./lib/events":38,"./lib/fn":39,"./lib/string":40,"./lib/url":41,"./lib/uuid":42}],44:[function(e,n,t){var l=e("lodash.isarguments"),o=e("lodash.isarray"),r=e("lodash.isfunction"),i=e("lodash.isstring"),s=e("lodash.keys");function a(x){return!!x&&typeof x=="object"}var p=9007199254740991;function m(x){return function(C){return C==null?void 0:C[x]}}var h=m("length");function y(x){return x!=null&&g(h(x))}function g(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=p}function S(x){return x==null?!0:y(x)&&(o(x)||i(x)||l(x)||a(x)&&r(x.splice))?!x.length:!s(x).length}n.exports=S},{"lodash.isarguments":45,"lodash.isarray":46,"lodash.isfunction":47,"lodash.isstring":51,"lodash.keys":48}],45:[function(e,n,t){function l(g){return!!g&&typeof g=="object"}var o=Object.prototype,r=o.hasOwnProperty,i=o.propertyIsEnumerable,s=9007199254740991;function a(g){return function(S){return S==null?void 0:S[g]}}var p=a("length");function m(g){return g!=null&&h(p(g))}function h(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=s}function y(g){return l(g)&&m(g)&&r.call(g,"callee")&&!i.call(g,"callee")}n.exports=y},{}],46:[function(e,n,t){var l="[object Array]",o="[object Function]",r=/^\[object .+?Constructor\]$/;function i(_){return!!_&&typeof _=="object"}var s=Object.prototype,a=Function.prototype.toString,p=s.hasOwnProperty,m=s.toString,h=RegExp("^"+a.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),y=S(Array,"isArray"),g=9007199254740991;function S(_,P){var R=_==null?void 0:_[P];return v(R)?R:void 0}function x(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=g}var C=y||function(_){return i(_)&&x(_.length)&&m.call(_)==l};function T(_){return N(_)&&m.call(_)==o}function N(_){var P=typeof _;return!!_&&(P=="object"||P=="function")}function v(_){return _==null?!1:T(_)?h.test(a.call(_)):i(_)&&r.test(_)}n.exports=C},{}],47:[function(e,n,t){var l="[object Function]",o=Object.prototype,r=o.toString;function i(a){return s(a)&&r.call(a)==l}function s(a){var p=typeof a;return!!a&&(p=="object"||p=="function")}n.exports=i},{}],48:[function(e,n,t){var l=e("lodash._getnative"),o=e("lodash.isarguments"),r=e("lodash.isarray"),i=/^\d+$/,s=Object.prototype,a=s.hasOwnProperty,p=l(Object,"keys"),m=9007199254740991;function h(_){return function(P){return P==null?void 0:P[_]}}var y=h("length");function g(_){return _!=null&&x(y(_))}function S(_,P){return _=typeof _=="number"||i.test(_)?+_:-1,P=P==null?m:P,_>-1&&_%1==0&&_<P}function x(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=m}function C(_){for(var P=v(_),R=P.length,U=R&&_.length,D=!!U&&x(U)&&(r(_)||o(_)),b=-1,A=[];++b<R;){var L=P[b];(D&&S(L,U)||a.call(_,L))&&A.push(L)}return A}function T(_){var P=typeof _;return!!_&&(P=="object"||P=="function")}var N=p?function(_){var P=_==null?void 0:_.constructor;return typeof P=="function"&&P.prototype===_||typeof _!="function"&&g(_)?C(_):T(_)?p(_):[]}:C;function v(_){if(_==null)return[];T(_)||(_=Object(_));var P=_.length;P=P&&x(P)&&(r(_)||o(_))&&P||0;for(var R=_.constructor,U=-1,D=typeof R=="function"&&R.prototype===_,b=Array(P),A=P>0;++U<P;)b[U]=U+"";for(var L in _)!(A&&S(L,P))&&!(L=="constructor"&&(D||!a.call(_,L)))&&b.push(L);return b}n.exports=N},{"lodash._getnative":49,"lodash.isarguments":45,"lodash.isarray":46}],49:[function(e,n,t){var l="[object Function]",o=/^\[object .+?Constructor\]$/;function r(x){return!!x&&typeof x=="object"}var i=Object.prototype,s=Function.prototype.toString,a=i.hasOwnProperty,p=i.toString,m=RegExp("^"+s.call(a).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(x,C){var T=x==null?void 0:x[C];return S(T)?T:void 0}function y(x){return g(x)&&p.call(x)==l}function g(x){var C=typeof x;return!!x&&(C=="object"||C=="function")}function S(x){return x==null?!1:y(x)?m.test(s.call(x)):r(x)&&o.test(x)}n.exports=h},{}],50:[function(e,n,t){function l(o){var r=typeof o;return!!o&&(r=="object"||r=="function")}n.exports=l},{}],51:[function(e,n,t){var l="[object String]";function o(a){return!!a&&typeof a=="object"}var r=Object.prototype,i=r.toString;function s(a){return typeof a=="string"||o(a)&&i.call(a)==l}n.exports=s},{}],52:[function(e,n,t){var l=e("framebus"),o=e("./lib/events"),r=e("./lib/check-origin").checkOrigin;function i(s){if(s=s||{},this.channel=s.channel,!this.channel)throw new Error("Channel ID must be specified");this.merchantUrl=s.merchantUrl,this._isDestroyed=!1,this._isVerbose=!1,this._listeners=[],this._log("new bus on channel "+this.channel,[location.href])}i.prototype.on=function(s,a){var p,m,h=a,y=this;this._isDestroyed||(this.merchantUrl&&(h=function(){r(this.origin,y.merchantUrl)&&a.apply(this,arguments)}),p=this._namespaceEvent(s),m=Array.prototype.slice.call(arguments),m[0]=p,m[1]=h,this._log("on",m),l.on.apply(l,m),this._listeners.push({eventName:s,handler:h,originalHandler:a}))},i.prototype.emit=function(s,a,p){var m;this._isDestroyed||(m=Array.prototype.slice.call(arguments),m[0]=this._namespaceEvent(s),this._log("emit",m),l.emit.apply(l,m))},i.prototype._offDirect=function(s,a){var p=Array.prototype.slice.call(arguments);this._isDestroyed||(p[0]=this._namespaceEvent(s),this._log("off",p),l.off.apply(l,p))},i.prototype.off=function(s,a){var p,m,h=a;if(!this._isDestroyed){if(this.merchantUrl)for(p=0;p<this._listeners.length;p++)m=this._listeners[p],m.originalHandler===a&&(h=m.handler);this._offDirect.call(this,s,h)}},i.prototype._namespaceEvent=function(s){return["braintree",this.channel,s].join(":")},i.prototype.teardown=function(){var s,a;for(a=0;a<this._listeners.length;a++)s=this._listeners[a],this._offDirect(s.eventName,s.handler);this._listeners.length=0,this._isDestroyed=!0},i.prototype._log=function(s,a){this._isVerbose&&console.log(s,a)},i.events=o,n.exports=i},{"./lib/check-origin":53,"./lib/events":54,framebus:55}],53:[function(e,n,t){var l=/^https:\/\/([a-zA-Z0-9-]+\.)*(braintreepayments|braintreegateway|paypal)\.com(:\d{1,5})?$/;function o(r,i){var s,a,p=document.createElement("a");return p.href=i,p.protocol==="https:"?a=p.host.replace(/:443$/,""):p.protocol==="http:"?a=p.host.replace(/:80$/,""):a=p.host,s=p.protocol+"//"+a,s===r||l.test(r)}n.exports={checkOrigin:o}},{}],54:[function(e,n,t){var l,o,r=["PAYMENT_METHOD_REQUEST","PAYMENT_METHOD_RECEIVED","PAYMENT_METHOD_GENERATED","PAYMENT_METHOD_NOT_GENERATED","PAYMENT_METHOD_CANCELLED","PAYMENT_METHOD_ERROR","CONFIGURATION_REQUEST","ROOT_METADATA_REQUEST","ERROR","WARNING","UI_POPUP_DID_OPEN","UI_POPUP_DID_CLOSE","UI_POPUP_FORCE_CLOSE","ASYNC_DEPENDENCY_INITIALIZING","ASYNC_DEPENDENCY_READY","USER_FORM_SUBMIT_REQUEST","SEND_ANALYTICS_EVENTS"],i={};for(l=0;l<r.length;l++)o=r[l],i[o]=o;n.exports=i},{}],55:[function(e,n,t){(function(l,o){typeof t=="object"&&typeof n!="undefined"?n.exports=o():l.framebus=o()})(this,function(){var l,o,r=[],i={},s="/*framebus*/";function a(b){return b==null||b.Window==null||b.constructor!==b.Window?!1:(r.push(b),!0)}function p(b){var A,L={};for(A in o)!o.hasOwnProperty(A)||(L[A]=o[A]);return L._origin=b||"*",L}function m(b){var A,L,k=g(this);return S(b)||S(k)||(L=Array.prototype.slice.call(arguments,1),A=x(b,L,k),A===!1)?!1:(P(l.top,A,k),!0)}function h(b,A){var L=g(this);return D(b,A,L)?!1:(i[L]=i[L]||{},i[L][b]=i[L][b]||[],i[L][b].push(A),!0)}function y(b,A){var L,k,H=g(this);if(D(b,A,H)||(k=i[H]&&i[H][b],!k))return!1;for(L=0;L<k.length;L++)if(k[L]===A)return k.splice(L,1),!0;return!1}function g(b){return b&&b._origin||"*"}function S(b){return typeof b!="string"}function x(b,A,L){var k=!1,H={event:b,origin:L},X=A[A.length-1];typeof X=="function"&&(H.reply=U(X,L),A=A.slice(0,-1)),H.args=A;try{k=s+JSON.stringify(H)}catch(ne){throw new Error("Could not stringify event: "+ne.message)}return k}function C(b){var A,L,k,H;if(b.data.slice(0,s.length)!==s)return!1;try{A=JSON.parse(b.data.slice(s.length))}catch{return!1}return A.reply!=null&&(L=b.origin,k=b.source,H=A.reply,A.reply=function(ne){var ae=x(H,[ne],L);if(ae===!1)return!1;k.postMessage(ae,L)},A.args.push(A.reply)),A}function T(b){l||(l=b||window,l.addEventListener?l.addEventListener("message",v,!1):l.attachEvent?l.attachEvent("onmessage",v):l.onmessage===null?l.onmessage=v:l=null)}function N(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var A=Math.random()*16|0,L=b==="x"?A:A&3|8;return L.toString(16)})}function v(b){var A;S(b.data)||(A=C(b),!!A&&(_("*",A.event,A.args,b),_(b.origin,A.event,A.args,b),R(b.data,A.origin,b.source)))}function _(b,A,L,k){var H;if(!!i[b]&&!!i[b][A])for(H=0;H<i[b][A].length;H++)i[b][A][H].apply(k,L)}function P(b,A,L){var k;try{b.postMessage(A,L)}catch{return}for(b.opener&&b.opener!==b&&!b.opener.closed&&b.opener!==l&&P(b.opener.top,A,L),k=0;k<b.frames.length;k++)P(b.frames[k],A,L)}function R(b,A,L){var k,H;for(k=r.length-1;k>=0;k--)H=r[k],H.closed===!0?r=r.slice(k,1):L!==H&&P(H.top,b,A)}function U(b,A){var L=N();function k(H,X){b(H,X),o.target(A).unsubscribe(L,k)}return o.target(A).subscribe(L,k),L}function D(b,A,L){return!!(S(b)||typeof A!="function"||S(L))}return T(),o={target:p,include:a,publish:m,pub:m,trigger:m,emit:m,subscribe:h,sub:h,on:h,unsubscribe:y,unsub:y,off:y},o})},{}],56:[function(e,n,t){var l=e("./lib/coinbase");function o(r){return new l(r)}n.exports={create:o}},{"./lib/coinbase":59}],57:[function(e,n,t){(function(l){function o(s){return s=s||l.navigator.userAgent,!/AppleWebKit\//.test(s)||!/Mobile\//.test(s)?null:s.replace(/.* OS ([0-9_]+) like Mac OS X.*/,"$1").replace(/_/g,".")}function r(s){s=s||l.navigator.userAgent;var a=null,p=/MSIE.(\d+)/.exec(s);return/Trident/.test(s)&&(a=11),p&&(a=parseInt(p[1],10)),a}function i(s){return s=s||l.navigator.userAgent,/Android/.test(s)?s.replace(/^.* Android ([0-9\.]+).*$/,"$1"):null}n.exports={ieVersion:r,iOSSafariVersion:o,androidVersion:i}}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],58:[function(e,n,t){var l=e("braintree-bus").events;function o(r,i,s){if(r){s.bus.emit(l.ERROR,r.error),s._sendAnalyticsEvent("generate.nonce.failed");return}s.bus.emit(l.PAYMENT_METHOD_GENERATED,i),s._sendAnalyticsEvent("generate.nonce.succeeded")}n.exports={tokenize:o}},{"braintree-bus":67}],59:[function(e,n,t){(function(l){var o=e("braintree-utilities"),r=e("destructor"),i=e("./dom/composer"),s=e("./url-composer"),a=e("./callbacks"),p=e("./constants"),m=e("./detector"),h=e("braintree-bus");function y(C){return{clientId:C.configuration.coinbase.clientId,redirectUrl:C.configuration.coinbase.redirectUrl,scopes:C.configuration.coinbase.scopes||p.SCOPES,meta:{authorizations_merchant_account:C.configuration.coinbase.merchantAccount||""}}}function g(C){return function(T,N){C.emit(h.events.ERROR,{type:N,message:T})}}function S(C,T){var N=(C||{}).coinbase,v=g(T);if(C.apiClient==null)v("settings.apiClient is required for coinbase",p.CONFIGURATION_ERROR);else if(!C.configuration.coinbaseEnabled)v("Coinbase is not enabled for your merchant account",p.CONFIGURATION_ERROR);else if(!N||!N.container&&!N.button)v("Either options.coinbase.container or options.coinbase.button is required for Coinbase integrations",p.CONFIGURATION_ERROR);else if(N.container&&N.button)v("options.coinbase.container and options.coinbase.button are mutually exclusive",p.CONFIGURATION_ERROR);else if(!m.isSupportedBrowser())v("Coinbase is not supported by your browser. Please consider upgrading",p.UNSUPPORTED_BROWSER_ERROR);else return!0;return!1}function x(C){var T,N;this.destructor=new r,this.channel=C.channel,N={channel:this.channel};try{C.coinbase.container&&(N.merchantUrl=l.location.href)}catch{}this.bus=C.bus||new h(N),this.canCreateIntegration=S(C,this.bus),!!this.canCreateIntegration&&(this.buttonId=C.coinbase.button||p.BUTTON_ID,this.apiClient=C.apiClient,this.assetsUrl=C.configuration.assetsUrl,this.environment=C.configuration.coinbase.environment,this._onOAuthSuccess=o.bind(this._onOAuthSuccess,this),this._handleButtonClick=o.bind(this._handleButtonClick,this),this.popupParams=y(C),this.redirectDoneInterval=null,C.coinbase.container?(T=o.normalizeElement(C.coinbase.container),this._insertFrame(T)):(l.braintreeCoinbasePopupCallback=this._onOAuthSuccess,T=document.body,o.addEventListener(T,"click",this._handleButtonClick),this._sendAnalyticsEvent("initialized"),this.destructor.registerFunctionForTeardown(o.bind(function(){this._closePopup()},this)),this.bus.on(p.TEARDOWN_EVENT,o.bind(this.destructor.teardown,this.destructor))))}x.prototype._sendAnalyticsEvent=function(C){var T=this.apiClient.integration+".web.coinbase.";this.apiClient.sendAnalyticsEvents(T+C)},x.prototype._insertFrame=function(C){var T=i.createFrame({channel:this.channel});this.bus.emit(h.events.ASYNC_DEPENDENCY_INITIALIZING),C.appendChild(T),this.destructor.registerFunctionForTeardown(function(){C.removeChild(T)}),setTimeout(o.bind(function(){T.src=this.assetsUrl+"/coinbase/"+p.VERSION+"/coinbase-frame.html#"+this.channel},this),0)},x.prototype._onOAuthSuccess=function(C){if(!C.code){this._sendAnalyticsEvent("popup.denied"),this._closePopup();return}this.bus.emit("coinbase:view:navigate","loading"),this._sendAnalyticsEvent("popup.authorized"),this.apiClient.tokenizeCoinbase({code:C.code,query:s.getQueryString()},o.bind(function(T,N){a.tokenize.apply(null,[T,N,this])},this)),this._closePopup()},x.prototype._clearPollForRedirectDone=function(){this.redirectDoneInterval&&(clearInterval(this.redirectDoneInterval),this.redirectDoneInterval=null)},x.prototype._closePopup=function(C){C=C||this.popup,C!=null&&(m.shouldCloseFromParent()&&C.close(),this._popupCleanup())},x.prototype._popupCleanup=function(){this._clearPollForRedirectDone(),this.bus.emit(h.events.UI_POPUP_DID_CLOSE,{source:p.INTEGRATION_NAME})},x.prototype._pollForRedirectDone=function(C){var T=setInterval(o.bind(function(){var N;if(C==null||C.closed){this._sendAnalyticsEvent("popup.aborted"),this._popupCleanup();return}try{if(C.location.href==="about:blank")throw new Error("Not finished loading");N=o.decodeQueryString(C.location.search.replace(/^\?/,"")).code}catch{return}this._onOAuthSuccess({code:N})},this),100);return this.redirectDoneInterval=T,T},x.prototype._openPopup=function(){var C;this._sendAnalyticsEvent("popup.started"),C=i.createPopup(s.compose(this._getOAuthBaseUrl(),this.popupParams)),C.focus(),this._pollForRedirectDone(C),this.bus.emit(h.events.UI_POPUP_DID_OPEN,{source:p.INTEGRATION_NAME}),this.bus.on(h.events.UI_POPUP_FORCE_CLOSE,function(T){T.target===p.INTEGRATION_NAME&&C.close()}),this.popup=C},x.prototype._getOAuthBaseUrl=function(){var C;return this.environment==="shared_sandbox"?C=p.SANDBOX_OAUTH_BASE_URL:C=p.PRODUCTION_OAUTH_BASE_URL,C},x.prototype._handleButtonClick=function(C){for(var T=C.target||C.srcElement;;){if(T==null||T===C.currentTarget)return;if(T.id===this.buttonId)break;T=T.parentNode}C&&C.preventDefault?C.preventDefault():C.returnValue=!1,this._openPopup()},x.prototype.teardown=function(C){var T=this;if(!this.canCreateIntegration){C(null);return}this.bus.emit(p.TEARDOWN_EVENT,function(){T.destructor.teardown(function(N){if(N)return C(N);T.bus.teardown(),C(null)})})},n.exports=x}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./callbacks":58,"./constants":60,"./detector":61,"./dom/composer":63,"./url-composer":66,"braintree-bus":67,"braintree-utilities":79,destructor:80}],60:[function(e,n,t){n.exports={PRODUCTION_OAUTH_BASE_URL:"https://coinbase.com",SANDBOX_OAUTH_BASE_URL:"https://sandbox.coinbase.com",ORIGIN_URL:"https://www.coinbase.com",FRAME_NAME:"braintree-coinbase-frame",POPUP_NAME:"coinbase",BUTTON_ID:"bt-coinbase-button",SCOPES:"send",VERSION:"0.3.1",INTEGRATION_NAME:"Coinbase",CONFIGURATION_ERROR:"CONFIGURATION",UNSUPPORTED_BROWSER_ERROR:"UNSUPPORTED_BROWSER",TEARDOWN_EVENT:"coinbase:TEARDOWN"}},{}],61:[function(e,n,t){var l=e("./browser");function o(){var a=l.ieVersion();return!a||a>8}function r(){var a=l.androidVersion();return a==null?!1:/^5/.test(a)}function i(){return!(r()||s())}function s(){var a=l.iOSSafariVersion();return a==null?!1:/^8\.0/.test(a)||/^8\.1$/.test(a)}n.exports={isSupportedBrowser:o,shouldCloseFromParent:i,shouldDisplayIOSClose:s,shouldDisplayLollipopClose:r}},{"./browser":57}],62:[function(e,n,t){function l(o){var r=document.createElement("button");return o=o||{},r.id=o.id||"coinbase-button",r.style.backgroundColor=o.backgroundColor||"#EEE",r.style.color=o.color||"#4597C3",r.style.border=o.border||"0",r.style.borderRadius=o.borderRadius||"6px",r.style.padding=o.padding||"12px",r.innerHTML=o.innerHTML||"coinbase",r}n.exports={create:l}},{}],63:[function(e,n,t){var l=e("./popup"),o=e("./button"),r=e("./frame");n.exports={createButton:o.create,createPopup:l.create,createFrame:r.create}},{"./button":62,"./frame":64,"./popup":65}],64:[function(e,n,t){var l=e("../constants"),o=e("iframer");function r(i){return o({name:l.FRAME_NAME,height:"70px",width:"100%",style:{padding:0,margin:0,border:0,outline:"none"}})}n.exports={create:r}},{"../constants":60,iframer:83}],65:[function(e,n,t){(function(l){var o=e("../constants");function r(a){var p=[];for(var m in a)a.hasOwnProperty(m)&&p.push([m,a[m]].join("="));return p.join(",")}function i(){var a=850,p=600;return r({width:a,height:p,left:(screen.width-a)/2,top:(screen.height-p)/4})}function s(a){return l.open(a,o.POPUP_NAME,i())}n.exports={create:s}}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../constants":60}],66:[function(e,n,t){var l=e("./constants");function o(){return"version="+l.VERSION}function r(i,s){var a=i+"/oauth/authorize?response_type=code",p=s.redirectUrl+"?"+o();if(a+="&redirect_uri="+encodeURIComponent(p),a+="&client_id="+s.clientId,s.scopes&&(a+="&scope="+encodeURIComponent(s.scopes)),s.meta)for(var m in s.meta)s.meta.hasOwnProperty(m)&&(a+="&meta["+encodeURIComponent(m)+"]="+encodeURIComponent(s.meta[m]));return a}n.exports={compose:r,getQueryString:o}},{"./constants":60}],67:[function(e,n,t){arguments[4][52][0].apply(t,arguments)},{"./lib/check-origin":68,"./lib/events":69,dup:52,framebus:70}],68:[function(e,n,t){arguments[4][53][0].apply(t,arguments)},{dup:53}],69:[function(e,n,t){arguments[4][54][0].apply(t,arguments)},{dup:54}],70:[function(e,n,t){arguments[4][55][0].apply(t,arguments)},{dup:55}],71:[function(e,n,t){arguments[4][35][0].apply(t,arguments)},{dup:35}],72:[function(e,n,t){arguments[4][36][0].apply(t,arguments)},{dup:36}],73:[function(e,n,t){arguments[4][22][0].apply(t,arguments)},{dup:22}],74:[function(e,n,t){arguments[4][38][0].apply(t,arguments)},{dup:38}],75:[function(e,n,t){arguments[4][39][0].apply(t,arguments)},{dup:39}],76:[function(e,n,t){arguments[4][40][0].apply(t,arguments)},{dup:40}],77:[function(e,n,t){arguments[4][41][0].apply(t,arguments)},{"./array":71,dup:41}],78:[function(e,n,t){arguments[4][42][0].apply(t,arguments)},{dup:42}],79:[function(e,n,t){arguments[4][43][0].apply(t,arguments)},{"./lib/array":71,"./lib/base64":72,"./lib/dom":73,"./lib/events":74,"./lib/fn":75,"./lib/string":76,"./lib/url":77,"./lib/uuid":78,dup:43}],80:[function(e,n,t){var l=e("batch-execute-functions"),o=e("braintree-utilities/lib/fn");function r(){this._teardownRegistry=[]}r.prototype.registerFunctionForTeardown=function(i){o.isFunction(i)&&this._teardownRegistry.push(i)},r.prototype.teardown=function(i){l(this._teardownRegistry,o.bind(function(s){this._teardownRegistry=[],o.isFunction(i)&&i(s)},this))},n.exports=r},{"batch-execute-functions":81,"braintree-utilities/lib/fn":82}],81:[function(e,n,t){function l(r,i){var s=r.length===0,a;s?(r(),i(null)):(a=o(i),r(a))}function o(r){var i=!1;return function(){i||(i=!0,r.apply(this,arguments))}}n.exports=function(r,i){var s=r.length,a=s;if(s===0){i(null);return}for(var p=0;p<s;p++)l(r[p],function(m){if(m){i(m);return}a-=1,a===0&&i(null)})}},{}],82:[function(e,n,t){arguments[4][39][0].apply(t,arguments)},{dup:39}],83:[function(e,n,t){var l=e("lodash.assign"),o=e("lodash.isstring"),r=e("setattributes"),i=e("./lib/default-attributes");n.exports=function(a){var p=document.createElement("iframe"),m=l({},i,a);return m.style&&!o(m.style)&&(l(p.style,m.style),delete m.style),r(p,m),p.getAttribute("id")||(p.id=p.name),p}},{"./lib/default-attributes":84,"lodash.assign":85,"lodash.isstring":96,setattributes:97}],84:[function(e,n,t){n.exports={src:"about:blank",frameBorder:0,allowtransparency:!0,scrolling:"no"}},{}],85:[function(e,n,t){var l=e("lodash._baseassign"),o=e("lodash._createassigner"),r=e("lodash.keys");function i(a,p,m){for(var h=-1,y=r(p),g=y.length;++h<g;){var S=y[h],x=a[S],C=m(x,p[S],S,a,p);((C===C?C!==x:x===x)||x===void 0&&!(S in a))&&(a[S]=C)}return a}var s=o(function(a,p,m){return m?i(a,p,m):l(a,p)});n.exports=s},{"lodash._baseassign":86,"lodash._createassigner":88,"lodash.keys":92}],86:[function(e,n,t){var l=e("lodash._basecopy"),o=e("lodash.keys");function r(i,s){return s==null?i:l(s,o(s),i)}n.exports=r},{"lodash._basecopy":87,"lodash.keys":92}],87:[function(e,n,t){function l(o,r,i){i||(i={});for(var s=-1,a=r.length;++s<a;){var p=r[s];i[p]=o[p]}return i}n.exports=l},{}],88:[function(e,n,t){var l=e("lodash._bindcallback"),o=e("lodash._isiterateecall"),r=e("lodash.restparam");function i(s){return r(function(a,p){var m=-1,h=a==null?0:p.length,y=h>2?p[h-2]:void 0,g=h>2?p[2]:void 0,S=h>1?p[h-1]:void 0;for(typeof y=="function"?(y=l(y,S,5),h-=2):(y=typeof S=="function"?S:void 0,h-=y?1:0),g&&o(p[0],p[1],g)&&(y=h<3?void 0:y,h=1);++m<h;){var x=p[m];x&&s(a,x,y)}return a})}n.exports=i},{"lodash._bindcallback":89,"lodash._isiterateecall":90,"lodash.restparam":91}],89:[function(e,n,t){function l(r,i,s){if(typeof r!="function")return o;if(i===void 0)return r;switch(s){case 1:return function(a){return r.call(i,a)};case 3:return function(a,p,m){return r.call(i,a,p,m)};case 4:return function(a,p,m,h){return r.call(i,a,p,m,h)};case 5:return function(a,p,m,h,y){return r.call(i,a,p,m,h,y)}}return function(){return r.apply(i,arguments)}}function o(r){return r}n.exports=l},{}],90:[function(e,n,t){var l=/^\d+$/,o=9007199254740991;function r(y){return function(g){return g==null?void 0:g[y]}}var i=r("length");function s(y){return y!=null&&m(i(y))}function a(y,g){return y=typeof y=="number"||l.test(y)?+y:-1,g=g==null?o:g,y>-1&&y%1==0&&y<g}function p(y,g,S){if(!h(S))return!1;var x=typeof g;if(x=="number"?s(S)&&a(g,S.length):x=="string"&&g in S){var C=S[g];return y===y?y===C:C!==C}return!1}function m(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=o}function h(y){var g=typeof y;return!!y&&(g=="object"||g=="function")}n.exports=p},{}],91:[function(e,n,t){var l="Expected a function",o=Math.max;function r(i,s){if(typeof i!="function")throw new TypeError(l);return s=o(s===void 0?i.length-1:+s||0,0),function(){for(var a=arguments,p=-1,m=o(a.length-s,0),h=Array(m);++p<m;)h[p]=a[s+p];switch(s){case 0:return i.call(this,h);case 1:return i.call(this,a[0],h);case 2:return i.call(this,a[0],a[1],h)}var y=Array(s+1);for(p=-1;++p<s;)y[p]=a[p];return y[s]=h,i.apply(this,y)}}n.exports=r},{}],92:[function(e,n,t){arguments[4][48][0].apply(t,arguments)},{dup:48,"lodash._getnative":93,"lodash.isarguments":94,"lodash.isarray":95}],93:[function(e,n,t){arguments[4][49][0].apply(t,arguments)},{dup:49}],94:[function(e,n,t){arguments[4][45][0].apply(t,arguments)},{dup:45}],95:[function(e,n,t){arguments[4][46][0].apply(t,arguments)},{dup:46}],96:[function(e,n,t){arguments[4][51][0].apply(t,arguments)},{dup:51}],97:[function(e,n,t){n.exports=function(o,r){var i;for(var s in r)r.hasOwnProperty(s)&&(i=r[s],i==null?o.removeAttribute(s):o.setAttribute(s,i))}},{}],98:[function(e,n,t){arguments[4][2][0].apply(t,arguments)},{"./coinbase-account":99,"./constants":100,"./credit-card":101,"./europe-bank-account":102,"./normalize-api-fields":104,"./parse-client-token":105,"./paypal-account":106,"./request/choose-driver":109,"./sepa-mandate":114,"./should-enable-cors":115,"./util":116,"braintree-3ds":125,"braintree-utilities":139,dup:2}],99:[function(e,n,t){arguments[4][3][0].apply(t,arguments)},{dup:3}],100:[function(e,n,t){arguments[4][4][0].apply(t,arguments)},{dup:4}],101:[function(e,n,t){arguments[4][5][0].apply(t,arguments)},{dup:5}],102:[function(e,n,t){arguments[4][6][0].apply(t,arguments)},{dup:6}],103:[function(e,n,t){arguments[4][7][0].apply(t,arguments)},{"./constants":100,"./parse-client-token":105,"./request/choose-driver":109,"./should-enable-cors":115,"./util":116,dup:7}],104:[function(e,n,t){arguments[4][8][0].apply(t,arguments)},{dup:8}],105:[function(e,n,t){arguments[4][9][0].apply(t,arguments)},{"./polyfill":107,"braintree-utilities":139,dup:9}],106:[function(e,n,t){arguments[4][10][0].apply(t,arguments)},{dup:10}],107:[function(e,n,t){arguments[4][11][0].apply(t,arguments)},{dup:11}],108:[function(e,n,t){arguments[4][12][0].apply(t,arguments)},{"../constants":100,"../util":116,"./parse-body":112,"./prep-body":113,dup:12}],109:[function(e,n,t){arguments[4][13][0].apply(t,arguments)},{"../util":116,"./ajax-driver":108,"./jsonp-driver":110,dup:13}],110:[function(e,n,t){arguments[4][14][0].apply(t,arguments)},{"../constants":100,"./jsonp":111,dup:14}],111:[function(e,n,t){arguments[4][15][0].apply(t,arguments)},{"../util":116,dup:15}],112:[function(e,n,t){arguments[4][16][0].apply(t,arguments)},{dup:16}],113:[function(e,n,t){arguments[4][17][0].apply(t,arguments)},{dup:17,"lodash.isstring":147}],114:[function(e,n,t){arguments[4][18][0].apply(t,arguments)},{dup:18}],115:[function(e,n,t){arguments[4][19][0].apply(t,arguments)},{dup:19}],116:[function(e,n,t){arguments[4][20][0].apply(t,arguments)},{dup:20,"lodash.isempty":140,"lodash.isobject":146}],117:[function(e,n,t){arguments[4][21][0].apply(t,arguments)},{"./lib/client":98,"./lib/get-configuration":103,"./lib/parse-client-token":105,"./lib/util":116,dup:21}],118:[function(e,n,t){arguments[4][22][0].apply(t,arguments)},{dup:22}],119:[function(e,n,t){arguments[4][23][0].apply(t,arguments)},{dup:23}],120:[function(e,n,t){arguments[4][24][0].apply(t,arguments)},{dup:24}],121:[function(e,n,t){arguments[4][25][0].apply(t,arguments)},{dup:25}],122:[function(e,n,t){arguments[4][26][0].apply(t,arguments)},{"./lib/dom":118,"./lib/events":119,"./lib/fn":120,"./lib/url":121,dup:26}],123:[function(e,n,t){arguments[4][27][0].apply(t,arguments)},{"../shared/receiver":130,"braintree-utilities":122,dup:27}],124:[function(e,n,t){arguments[4][28][0].apply(t,arguments)},{"./authorization_service":123,"./loader":126,"braintree-utilities":122,dup:28}],125:[function(e,n,t){arguments[4][29][0].apply(t,arguments)},{"./client":124,dup:29}],126:[function(e,n,t){arguments[4][30][0].apply(t,arguments)},{"./loader_display":127,"./loader_message":128,"./loader_spinner":129,dup:30}],127:[function(e,n,t){arguments[4][31][0].apply(t,arguments)},{dup:31}],128:[function(e,n,t){arguments[4][32][0].apply(t,arguments)},{dup:32}],129:[function(e,n,t){arguments[4][33][0].apply(t,arguments)},{dup:33}],130:[function(e,n,t){arguments[4][34][0].apply(t,arguments)},{"braintree-utilities":122,dup:34}],131:[function(e,n,t){arguments[4][35][0].apply(t,arguments)},{dup:35}],132:[function(e,n,t){arguments[4][36][0].apply(t,arguments)},{dup:36}],133:[function(e,n,t){arguments[4][22][0].apply(t,arguments)},{dup:22}],134:[function(e,n,t){arguments[4][38][0].apply(t,arguments)},{dup:38}],135:[function(e,n,t){arguments[4][39][0].apply(t,arguments)},{dup:39}],136:[function(e,n,t){arguments[4][40][0].apply(t,arguments)},{dup:40}],137:[function(e,n,t){arguments[4][41][0].apply(t,arguments)},{"./array":131,dup:41}],138:[function(e,n,t){arguments[4][42][0].apply(t,arguments)},{dup:42}],139:[function(e,n,t){arguments[4][43][0].apply(t,arguments)},{"./lib/array":131,"./lib/base64":132,"./lib/dom":133,"./lib/events":134,"./lib/fn":135,"./lib/string":136,"./lib/url":137,"./lib/uuid":138,dup:43}],140:[function(e,n,t){arguments[4][44][0].apply(t,arguments)},{dup:44,"lodash.isarguments":141,"lodash.isarray":142,"lodash.isfunction":143,"lodash.isstring":147,"lodash.keys":144}],141:[function(e,n,t){arguments[4][45][0].apply(t,arguments)},{dup:45}],142:[function(e,n,t){arguments[4][46][0].apply(t,arguments)},{dup:46}],143:[function(e,n,t){arguments[4][47][0].apply(t,arguments)},{dup:47}],144:[function(e,n,t){arguments[4][48][0].apply(t,arguments)},{dup:48,"lodash._getnative":145,"lodash.isarguments":141,"lodash.isarray":142}],145:[function(e,n,t){arguments[4][49][0].apply(t,arguments)},{dup:49}],146:[function(e,n,t){arguments[4][50][0].apply(t,arguments)},{dup:50}],147:[function(e,n,t){arguments[4][51][0].apply(t,arguments)},{dup:51}],148:[function(e,n,t){arguments[4][52][0].apply(t,arguments)},{"./lib/check-origin":149,"./lib/events":150,dup:52,framebus:151}],149:[function(e,n,t){arguments[4][53][0].apply(t,arguments)},{dup:53}],150:[function(e,n,t){arguments[4][54][0].apply(t,arguments)},{dup:54}],151:[function(e,n,t){arguments[4][55][0].apply(t,arguments)},{dup:55}],152:[function(e,n,t){arguments[4][52][0].apply(t,arguments)},{"./lib/check-origin":153,"./lib/events":154,dup:52,framebus:155}],153:[function(e,n,t){arguments[4][53][0].apply(t,arguments)},{dup:53}],154:[function(e,n,t){arguments[4][54][0].apply(t,arguments)},{dup:54}],155:[function(e,n,t){arguments[4][55][0].apply(t,arguments)},{dup:55}],156:[function(e,n,t){arguments[4][35][0].apply(t,arguments)},{dup:35}],157:[function(e,n,t){arguments[4][36][0].apply(t,arguments)},{dup:36}],158:[function(e,n,t){arguments[4][22][0].apply(t,arguments)},{dup:22}],159:[function(e,n,t){arguments[4][38][0].apply(t,arguments)},{dup:38}],160:[function(e,n,t){arguments[4][39][0].apply(t,arguments)},{dup:39}],161:[function(e,n,t){arguments[4][40][0].apply(t,arguments)},{dup:40}],162:[function(e,n,t){arguments[4][41][0].apply(t,arguments)},{"./array":156,dup:41}],163:[function(e,n,t){arguments[4][42][0].apply(t,arguments)},{dup:42}],164:[function(e,n,t){arguments[4][43][0].apply(t,arguments)},{"./lib/array":156,"./lib/base64":157,"./lib/dom":158,"./lib/events":159,"./lib/fn":160,"./lib/string":161,"./lib/url":162,"./lib/uuid":163,dup:43}],165:[function(e,n,t){arguments[4][80][0].apply(t,arguments)},{"batch-execute-functions":166,"braintree-utilities/lib/fn":167,dup:80}],166:[function(e,n,t){arguments[4][81][0].apply(t,arguments)},{dup:81}],167:[function(e,n,t){arguments[4][39][0].apply(t,arguments)},{dup:39}],168:[function(e,n,t){arguments[4][83][0].apply(t,arguments)},{"./lib/default-attributes":169,dup:83,"lodash.assign":170,"lodash.isstring":181,setattributes:182}],169:[function(e,n,t){arguments[4][84][0].apply(t,arguments)},{dup:84}],170:[function(e,n,t){arguments[4][85][0].apply(t,arguments)},{dup:85,"lodash._baseassign":171,"lodash._createassigner":173,"lodash.keys":177}],171:[function(e,n,t){arguments[4][86][0].apply(t,arguments)},{dup:86,"lodash._basecopy":172,"lodash.keys":177}],172:[function(e,n,t){arguments[4][87][0].apply(t,arguments)},{dup:87}],173:[function(e,n,t){arguments[4][88][0].apply(t,arguments)},{dup:88,"lodash._bindcallback":174,"lodash._isiterateecall":175,"lodash.restparam":176}],174:[function(e,n,t){arguments[4][89][0].apply(t,arguments)},{dup:89}],175:[function(e,n,t){arguments[4][90][0].apply(t,arguments)},{dup:90}],176:[function(e,n,t){arguments[4][91][0].apply(t,arguments)},{dup:91}],177:[function(e,n,t){arguments[4][48][0].apply(t,arguments)},{dup:48,"lodash._getnative":178,"lodash.isarguments":179,"lodash.isarray":180}],178:[function(e,n,t){arguments[4][49][0].apply(t,arguments)},{dup:49}],179:[function(e,n,t){arguments[4][45][0].apply(t,arguments)},{dup:45}],180:[function(e,n,t){arguments[4][46][0].apply(t,arguments)},{dup:46}],181:[function(e,n,t){arguments[4][51][0].apply(t,arguments)},{dup:51}],182:[function(e,n,t){arguments[4][97][0].apply(t,arguments)},{dup:97}],183:[function(e,n,t){(function(l){var o=e("braintree-utilities"),r=e("../../shared/util/browser"),i=e("destructor"),s=e("braintree-bus"),a=e("../../shared/constants"),p=e("./popup-view"),m=e("./modal-view");function h(y){this.options=y||{},this.destructor=new i,this.bus=new s({merchantUrl:l.location.href,channel:this.options.channel}),this.destructor.registerFunctionForTeardown(o.bind(function(){this.bus.teardown()},this)),this._initialize()}h.prototype._initialize=function(){r.isPopupSupported()?this.app=new p({src:this._buildUrl(),isHermes:this.options.isHermes,channel:this.options.channel}):this.app=new m({src:this._buildUrl(),headless:this.options.headless,isHermes:this.options.isHermes,insertFrameFunction:this.options.insertFrameFunction,channel:this.options.channel}),this.destructor.registerFunctionForTeardown(o.bind(function(){this.app.teardown()},this)),this.bus.on(a.events.CLOSE_APP,o.bind(this.close,this)),this.bus.on(a.events.FOCUS_APP,o.bind(this.focus,this)),this.bus.on(s.events.PAYMENT_METHOD_GENERATED,o.bind(this._handlePaymentMethodGenerated,this)),this.bus.on(s.events.UI_POPUP_FORCE_CLOSE,o.bind(this._handleForceClose,this))},h.prototype._buildUrl=function(){var y=this.options.paypalAssetsUrl;return y+="/pwpp/",y+=a.VERSION,y+="/html/braintree-frame.html",y+="#"+this.options.channel,y},h.prototype.open=function(){this.focus(),this.app.open(),this.poll()},h.prototype._handleForceClose=function(y){y.target===a.PAYPAL_INTEGRATION_NAME&&this.close()},h.prototype.close=function(){this.app.close()},h.prototype.focus=function(){o.isFunction(this.app.focus)&&this.app.focus()},h.prototype.isClosed=function(){return this.app.isClosed()},h.prototype.stopPolling=function(){clearInterval(this.pollId)},h.prototype.poll=function(){this.pollId=setInterval(o.bind(function(){this.isClosed()&&this._handleClosed()},this),100)},h.prototype._handlePaymentMethodGenerated=function(y){y.type===a.NONCE_TYPE&&this.close()},h.prototype._handleClosed=function(){this.stopPolling(),this.close(),r.isPopupSupported()&&(this.app.el=null)},h.prototype.teardown=function(){this.destructor.teardown()},n.exports=h}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../../shared/constants":186,"../../shared/util/browser":191,"./modal-view":184,"./popup-view":185,"braintree-bus":152,"braintree-utilities":164,destructor:165}],184:[function(e,n,t){(function(l){var o=e("braintree-utilities"),r=e("../../shared/util/browser"),i=e("../../shared/constants"),s=e("braintree-bus"),a=e("iframer");function p(m){this.options=m||{},this.container=document.body,this.bus=new s({merchantUrl:l.location.href,channel:m.channel}),this.options.headless?this._open=this._openHeadless:this._attachBusEvents(),this._initialize()}p.prototype._attachBusEvents=function(){this.bus.on(i.events.OPEN_MODAL,o.bind(this.open,this))},p.prototype._initialize=function(){var m=this.options.isHermes?i.HERMES_FRAME_NAME:i.FRAME_NAME;this.el=a({src:this.options.src,name:m,height:this.options.height||"100%",width:this.options.width||"100%",style:{position:r.isMobile()?"absolute":"fixed",top:0,left:0,bottom:0,padding:0,margin:0,border:0,outline:"none",zIndex:20001,background:"#FFFFFF"}})},p.prototype.isClosed=function(){return!this.container.contains(this.el)},p.prototype._openHeadless=function(){this.bus.emit(i.events.OPEN_MODAL)},p.prototype._open=function(){o.isFunction(this.options.insertFrameFunction)?this.options.insertFrameFunction(this.el.src):this.container.appendChild(this.el),this.bus.emit(i.events.UI_MODAL_DID_OPEN,{source:i.PAYPAL_INTEGRATION_NAME})},p.prototype.open=function(){this.isClosed()&&this._open()},p.prototype.close=function(){this.isClosed()||(this.container.removeChild(this.el),this.bus.emit(i.events.UI_MODAL_DID_CLOSE,{source:i.PAYPAL_INTEGRATION_NAME}))},p.prototype.teardown=function(){this.close(),this.bus.teardown()},n.exports=p}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../../shared/constants":186,"../../shared/util/browser":191,"braintree-bus":152,"braintree-utilities":164,iframer:168}],185:[function(e,n,t){(function(l){var o=e("../../shared/constants"),r=e("braintree-bus"),i=e("../../shared/useragent/browser");function s(a){this.options=a,this.bus=new r({merchantUrl:l.location.href,channel:this.options.channel}),a.isHermes?(this.name=o.HERMES_POPUP_NAME,this.popupHeight=o.HERMES_POPUP_HEIGHT,this.popupWidth=o.HERMES_POPUP_WIDTH):(this.name=o.POPUP_NAME,this.popupHeight=o.POPUP_HEIGHT,this.popupWidth=o.POPUP_WIDTH)}s.prototype._getPopupOptions=function(){return["height="+this.popupHeight,"width="+this.popupWidth,"top="+this._getTopPosition(),"left="+this._getLeftPosition(),o.POPUP_OPTIONS].join(",")},s.prototype._centerPosition=function(a,p,m){return(a-p)/2+m},s.prototype._getTopPosition=function(){var a=window.outerHeight||document.documentElement.clientHeight,p=typeof window.screenY=="undefined"?window.screenTop:window.screenY;return this._centerPosition(a,this.popupHeight,p)},s.prototype._getLeftPosition=function(){var a=window.outerWidth||document.documentElement.clientWidth,p=typeof window.screenX=="undefined"?window.screenLeft:window.screenX;return this._centerPosition(a,this.popupWidth,p)},s.prototype.isClosed=function(){if(this.el)return this.el.closed},s.prototype.open=function(){this.el||(this.el=window.open(this.options.src,this.name,this._getPopupOptions()),this.focus(),this.bus.emit(r.events.UI_POPUP_DID_OPEN,{source:o.PAYPAL_INTEGRATION_NAME}))},s.prototype.close=function(){this.el&&((i.isIE8()&&!this.isClosed()||!i.isIE8())&&this.el.close(),this.bus.emit(r.events.UI_POPUP_DID_CLOSE,{source:o.PAYPAL_INTEGRATION_NAME}))},s.prototype.focus=function(){this.el&&this.el.focus()},s.prototype.teardown=function(){this.close(),this.bus.teardown()},n.exports=s}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../../shared/constants":186,"../../shared/useragent/browser":187,"braintree-bus":152}],186:[function(e,n,t){var l,o="1.6.1",r=["GET_CLIENT_TOKEN","GET_CLIENT_OPTIONS","OPEN_MODAL","CLOSE_APP","FOCUS_APP","UI_MODAL_DID_OPEN","UI_MODAL_DID_CLOSE"];for(t.VERSION=o,t.POPUP_NAME="braintree_paypal_popup",t.HERMES_POPUP_NAME="PPFrameRedirect",t.FRAME_NAME="braintree-paypal-frame",t.HERMES_FRAME_NAME="PPFrameRedirect",t.POPUP_PATH="/pwpp/"+o+"/html/braintree-frame.html",t.POPUP_OPTIONS="resizable,scrollbars",t.POPUP_HEIGHT=470,t.POPUP_WIDTH=410,t.HERMES_POPUP_HEIGHT=535,t.HERMES_POPUP_WIDTH=450,t.BRIDGE_FRAME_NAME="bt-proxy-frame",t.HERMES_SUPPORTED_CURRENCIES=["USD","GBP","EUR","AUD","CAD","DKK","NOK","PLN","SEK","CHF","TRY"],t.HERMES_SUPPORTED_COUNTRIES=["US","GB","AU","CA","ES","FR","DE","IT","NL","NO","PL","CH","TR","DK","BE","AT"],t.NONCE_TYPE="PayPalAccount",t.PAYPAL_INTEGRATION_NAME="PayPal",t.ILLEGAL_XHR_ERROR="Illegal XHR request attempted",t.events={},l=0;l<r.length;l++)t.events[r[l]]="paypal:"+r[l]},{}],187:[function(e,n,t){var l=e("./useragent"),o=e("./platform");function r(){return l.matchUserAgent("Android")&&!i()}function i(){return l.matchUserAgent("Chrome")||l.matchUserAgent("CriOS")}function s(){return l.matchUserAgent("Firefox")}function a(){return l.matchUserAgent("Trident")||l.matchUserAgent("MSIE")}function p(){return l.matchUserAgent(/MSIE 8\.0/)}function m(){return l.matchUserAgent("Opera")||l.matchUserAgent("OPR")}function h(){return m()&&Object.prototype.toString.call(window.operamini)==="[object OperaMini]"}function y(){return l.matchUserAgent("Safari")&&!i()&&!r()}function g(){return o.isIos()&&!i()&&!y()}function S(){var x=/Version\/[\w\.]+ Chrome\/[\w\.]+ Mobile/;return o.isAndroid()&&l.matchUserAgent(x)}n.exports={isAndroid:r,isChrome:i,isFirefox:s,isIE:a,isIE8:p,isOpera:m,isOperaMini:h,isSafari:y,isIosWebView:g,isAndroidWebView:S}},{"./platform":189,"./useragent":190}],188:[function(e,n,t){var l=e("./useragent"),o=e("./platform");function r(){return!i()&&(o.isAndroid()||o.isIpod()||o.isIphone()||l.matchUserAgent("IEMobile"))}function i(){return o.isIpad()||o.isAndroid()&&!l.matchUserAgent("Mobile")}function s(){return!r()&&!i()}n.exports={isMobile:r,isTablet:i,isDesktop:s}},{"./platform":189,"./useragent":190}],189:[function(e,n,t){var l=e("./useragent");function o(){return l.matchUserAgent("Android")}function r(){return l.matchUserAgent("iPad")}function i(){return l.matchUserAgent("iPod")}function s(){return l.matchUserAgent("iPhone")&&!i()}function a(){return r()||i()||s()}n.exports={isAndroid:o,isIpad:r,isIpod:i,isIphone:s,isIos:a}},{"./useragent":190}],190:[function(e,n,t){var l=window.navigator.userAgent;function o(){return l}function r(i){var s=t.getNativeUserAgent(),a=s.match(i);return!!a}t.getNativeUserAgent=o,t.matchUserAgent=r},{}],191:[function(e,n,t){var l=e("../useragent/browser"),o=e("../useragent/device"),r=e("../useragent/platform"),i=e("../useragent/useragent"),s=window.navigator.userAgent,a=/[Mm]obi|tablet|iOS|Android|IEMobile|Windows\sPhone/;function p(){return m()&&window.outerWidth<600}function m(){return a.test(s)}function h(){return Boolean(window.postMessage)}function y(){if(l.isOperaMini())return!1;if(o.isDesktop())return!0;if(o.isMobile()||o.isTablet()){if(l.isIE())return!1;if(r.isAndroid())return!l.isAndroidWebView();if(r.isIos())return!(l.isChrome()||l.isSafari()&&i.matchUserAgent(/OS (?:8_1|8_0|8)(?!_\d)/i)||l.isIosWebView())}return!1}function g(){if(l.isIE8())return!1;try{return window.self===window.top}catch{return!1}}function S(){return l.isIE()}function x(){var C=null,T="";try{new ActiveXObject("")}catch(N){T=N.name}try{C=Boolean(new ActiveXObject("htmlfile"))}catch{C=!1}return T!=="ReferenceError"&&C===!1?C=!1:C=!0,!C}n.exports={isMobile:p,isMobileDevice:m,detectedPostMessage:h,isPopupSupported:y,isOverlaySupported:g,isBridgeIframeRequired:S,isMetroBrowser:x}},{"../useragent/browser":187,"../useragent/device":188,"../useragent/platform":189,"../useragent/useragent":190}],192:[function(e,n,t){var l=e("braintree-utilities");function o(r,i){this.host=r||window,this.channel=i||null,this.handlers=[],l.addEventListener(this.host,"message",l.bind(this.receive,this))}o.prototype.receive=function(r){var i,s,a,p;try{a=JSON.parse(r.data)}catch{return}for(p=a.type,s=new o.Message(this,r.source,a.data),i=0;i<this.handlers.length;i++)this.handlers[i].type===p&&this.handlers[i].handler(s)},o.prototype.send=function(r,i,s){r.postMessage(JSON.stringify({type:this._namespaceEvent(i),data:s}),"*")},o.prototype.register=function(r,i){this.handlers.push({type:this._namespaceEvent(r),handler:i})},o.prototype.unregister=function(r,i){for(var s=this.handlers.length-1;s>=0;s--)if(this.handlers[s].type===r&&this.handlers[s].handler===i)return this.handlers.splice(s,1)},o.prototype._namespaceEvent=function(r){return this.channel?["braintree",this.channel,r].join(":"):r},o.Message=function(r,i,s){this.bus=r,this.source=i,this.content=s},o.Message.prototype.reply=function(r,i){this.bus.send(this.source,r,i)},n.exports=o},{"braintree-utilities":206}],193:[function(e,n,t){var l=e("braintree-utilities");function o(r,i){this.bus=r,this.target=i,this.handlers=[],this.bus.register("publish",l.bind(this._handleMessage,this))}o.prototype._handleMessage=function(r){var i,s=r.content,a=this.handlers[s.channel];if(typeof a!="undefined")for(i=0;i<a.length;i++)a[i](s.data)},o.prototype.publish=function(r,i){this.bus.send(this.target,"publish",{channel:r,data:i})},o.prototype.subscribe=function(r,i){this.handlers[r]=this.handlers[r]||[],this.handlers[r].push(i)},o.prototype.unsubscribe=function(r,i){var s,a=this.handlers[r];if(typeof a!="undefined")for(s=0;s<a.length;s++)a[s]===i&&a.splice(s,1)},n.exports=o},{"braintree-utilities":206}],194:[function(e,n,t){function l(o){this.bus=o,this.frames=[],this.handlers=[]}l.prototype.subscribe=function(o,r){this.handlers[o]=this.handlers[o]||[],this.handlers[o].push(r)},l.prototype.registerFrame=function(o){this.frames.push(o)},l.prototype.unregisterFrame=function(o){for(var r=0;r<this.frames.length;r++)this.frames[r]===o&&this.frames.splice(r,1)},l.prototype.publish=function(o,r){var i,s=this.handlers[o];if(typeof s!="undefined")for(i=0;i<s.length;i++)s[i](r);for(i=0;i<this.frames.length;i++)this.bus.send(this.frames[i],"publish",{channel:o,data:r})},l.prototype.unsubscribe=function(o,r){var i,s=this.handlers[o];if(typeof s!="undefined")for(i=0;i<s.length;i++)s[i]===r&&s.splice(i,1)},n.exports=l},{}],195:[function(e,n,t){var l=e("braintree-utilities");function o(r,i){this.bus=r,this.target=i||window.parent,this.counter=0,this.callbacks={},this.bus.register("rpc_response",l.bind(this._handleResponse,this))}o.prototype._handleResponse=function(r){var i=r.content,s=this.callbacks[i.id];typeof s=="function"&&(s.apply(null,i.response),delete this.callbacks[i.id])},o.prototype.invoke=function(r,i,s){var a=this.counter++;this.callbacks[a]=s,this.bus.send(this.target,"rpc_request",{id:a,method:r,args:i})},n.exports=o},{"braintree-utilities":206}],196:[function(e,n,t){var l=e("braintree-utilities");function o(r){this.bus=r,this.methods={},this.bus.register("rpc_request",l.bind(this._handleRequest,this))}o.prototype._handleRequest=function(r){var i,s=r.content,a=s.args||[],p=this.methods[s.method];typeof p=="function"&&(i=function(){r.reply("rpc_response",{id:s.id,response:Array.prototype.slice.call(arguments)})},a.push(i),p.apply(null,a))},o.prototype.reset=function(){this.methods={}},o.prototype.define=function(r,i){this.methods[r]=i},n.exports=o},{"braintree-utilities":206}],197:[function(e,n,t){var l=e("./lib/message-bus"),o=e("./lib/pubsub-client"),r=e("./lib/pubsub-server"),i=e("./lib/rpc-client"),s=e("./lib/rpc-server");n.exports={MessageBus:l,PubsubClient:o,PubsubServer:r,RPCClient:i,RPCServer:s}},{"./lib/message-bus":192,"./lib/pubsub-client":193,"./lib/pubsub-server":194,"./lib/rpc-client":195,"./lib/rpc-server":196}],198:[function(e,n,t){arguments[4][35][0].apply(t,arguments)},{dup:35}],199:[function(e,n,t){arguments[4][36][0].apply(t,arguments)},{dup:36}],200:[function(e,n,t){arguments[4][22][0].apply(t,arguments)},{dup:22}],201:[function(e,n,t){arguments[4][38][0].apply(t,arguments)},{dup:38}],202:[function(e,n,t){arguments[4][39][0].apply(t,arguments)},{dup:39}],203:[function(e,n,t){arguments[4][40][0].apply(t,arguments)},{dup:40}],204:[function(e,n,t){arguments[4][41][0].apply(t,arguments)},{"./array":198,dup:41}],205:[function(e,n,t){arguments[4][42][0].apply(t,arguments)},{dup:42}],206:[function(e,n,t){arguments[4][43][0].apply(t,arguments)},{"./lib/array":198,"./lib/base64":199,"./lib/dom":200,"./lib/events":201,"./lib/fn":202,"./lib/string":203,"./lib/url":204,"./lib/uuid":205,dup:43}],207:[function(e,n,t){arguments[4][35][0].apply(t,arguments)},{dup:35}],208:[function(e,n,t){arguments[4][36][0].apply(t,arguments)},{dup:36}],209:[function(e,n,t){arguments[4][22][0].apply(t,arguments)},{dup:22}],210:[function(e,n,t){arguments[4][38][0].apply(t,arguments)},{dup:38}],211:[function(e,n,t){arguments[4][39][0].apply(t,arguments)},{dup:39}],212:[function(e,n,t){arguments[4][40][0].apply(t,arguments)},{dup:40}],213:[function(e,n,t){arguments[4][41][0].apply(t,arguments)},{"./array":207,dup:41}],214:[function(e,n,t){arguments[4][42][0].apply(t,arguments)},{dup:42}],215:[function(e,n,t){arguments[4][43][0].apply(t,arguments)},{"./lib/array":207,"./lib/base64":208,"./lib/dom":209,"./lib/events":210,"./lib/fn":211,"./lib/string":212,"./lib/url":213,"./lib/uuid":214,dup:43}],216:[function(e,n,t){arguments[4][80][0].apply(t,arguments)},{"batch-execute-functions":217,"braintree-utilities/lib/fn":218,dup:80}],217:[function(e,n,t){arguments[4][81][0].apply(t,arguments)},{dup:81}],218:[function(e,n,t){arguments[4][39][0].apply(t,arguments)},{dup:39}],219:[function(e,n,t){arguments[4][83][0].apply(t,arguments)},{"./lib/default-attributes":220,dup:83,"lodash.assign":221,"lodash.isstring":232,setattributes:233}],220:[function(e,n,t){arguments[4][84][0].apply(t,arguments)},{dup:84}],221:[function(e,n,t){arguments[4][85][0].apply(t,arguments)},{dup:85,"lodash._baseassign":222,"lodash._createassigner":224,"lodash.keys":228}],222:[function(e,n,t){arguments[4][86][0].apply(t,arguments)},{dup:86,"lodash._basecopy":223,"lodash.keys":228}],223:[function(e,n,t){arguments[4][87][0].apply(t,arguments)},{dup:87}],224:[function(e,n,t){arguments[4][88][0].apply(t,arguments)},{dup:88,"lodash._bindcallback":225,"lodash._isiterateecall":226,"lodash.restparam":227}],225:[function(e,n,t){arguments[4][89][0].apply(t,arguments)},{dup:89}],226:[function(e,n,t){arguments[4][90][0].apply(t,arguments)},{dup:90}],227:[function(e,n,t){arguments[4][91][0].apply(t,arguments)},{dup:91}],228:[function(e,n,t){arguments[4][48][0].apply(t,arguments)},{dup:48,"lodash._getnative":229,"lodash.isarguments":230,"lodash.isarray":231}],229:[function(e,n,t){arguments[4][49][0].apply(t,arguments)},{dup:49}],230:[function(e,n,t){arguments[4][45][0].apply(t,arguments)},{dup:45}],231:[function(e,n,t){arguments[4][46][0].apply(t,arguments)},{dup:46}],232:[function(e,n,t){arguments[4][51][0].apply(t,arguments)},{dup:51}],233:[function(e,n,t){arguments[4][97][0].apply(t,arguments)},{dup:97}],234:[function(e,n,t){var l=["getCreditCards","unlockCreditCard","sendAnalyticsEvents"];function o(r){this.apiClient=r}o.prototype.attach=function(r){var i=this,s=0,a=l.length;function p(m){r.define(m,function(){i.apiClient[m].apply(i.apiClient,arguments)})}for(s;s<a;s++)p(l[s])},n.exports=o},{}],235:[function(e,n,t){(function(l){var o,r,i=e("braintree-api"),s=e("braintree-bus"),a=e("destructor"),p=e("braintree-rpc"),m=e("braintree-utilities"),h=m.normalizeElement,y=m.bind,g=m.isBrowserHttps,S=e("./api-proxy-server"),x=e("./merchant-form-manager"),C=e("./frame-container"),T=e("../shared/constants"),N="1.9.1",v=e("braintree-paypal/src/external/views/app-view");function _(D,b){var A=window.getComputedStyle?getComputedStyle(D):D.currentStyle;return A[b]}function P(){return{html:{height:o.style.height||"",overflow:_(o,"overflow"),position:_(o,"position")},body:{height:r.style.height||"",overflow:_(r,"overflow")}}}function R(){var D=/Android|iPhone|iPod|iPad/i.test(window.navigator.userAgent);return D}function U(D){var b,A,L;this.channel=D.channel,this.destructor=new a,this.merchantConfiguration=D.merchantConfiguration,this.encodedClientToken=D.gatewayConfiguration,this.analyticsConfiguration=D.analyticsConfiguration,this.paypalOptions=D.merchantConfiguration.paypal||{},this.container=null,this.merchantFormManager=null,this.root=D.root,this.configurationRequests=[],this.braintreeApiClient=i.configure({clientToken:D.gatewayConfiguration,analyticsConfiguration:this.analyticsConfiguration,integration:"dropin",enableCORS:this.merchantConfiguration.enableCORS}),this.paymentMethodNonceReceivedCallback=D.merchantConfiguration.paymentMethodNonceReceived,this.clientToken=i.parseClientToken(D.gatewayConfiguration),this.braintreeBus=new s({merchantUrl:l.location.href,channel:D.channel}),this.bus=new p.MessageBus(this.root,this.channel),this.rpcServer=new p.RPCServer(this.bus),this.apiProxyServer=new S(this.braintreeApiClient),this.apiProxyServer.attach(this.rpcServer),b=D.inlineFramePath||this.clientToken.assetsUrl+"/dropin/"+N+"/inline-frame.html",A=D.modalFramePath||this.clientToken.assetsUrl+"/dropin/"+N+"/modal-frame.html",o=document.documentElement,r=document.body,this.frames={inline:this._createFrame(b,T.INLINE_FRAME_NAME),modal:this._createFrame(A,T.MODAL_FRAME_NAME)},this.container=h(D.merchantConfiguration.container,"Unable to find valid container."),L=h(D.merchantConfiguration.form||this._findClosest(this.container,"form")),this.merchantFormManager=new x({form:L,frames:this.frames,onSubmit:this.paymentMethodNonceReceivedCallback,apiClient:this.braintreeApiClient}).initialize(),this.destructor.registerFunctionForTeardown(y(function(){this.merchantFormManager.teardown()},this)),D.gatewayConfiguration.paypalEnabled&&this._configurePayPal(),this.braintreeApiClient.sendAnalyticsEvents("dropin.web.initialized")}U.prototype.initialize=function(){var D,b=this;this._initializeModal(),this.braintreeBus.emit(s.events.ASYNC_DEPENDENCY_INITIALIZING),this.container.appendChild(this.frames.inline.element),r.appendChild(this.frames.modal.element),this.destructor.registerFunctionForTeardown(function(A){b._hideModal(function(){b.container.removeChild(b.frames.inline.element),r.removeChild(b.frames.modal.element),A()})}),this.rpcServer.define("receiveSharedCustomerIdentifier",function(A){for(b.braintreeApiClient.attrs.sharedCustomerIdentifier=A,b.braintreeApiClient.attrs.sharedCustomerIdentifierType="browser_session_cookie_store",D=0;D<b.configurationRequests.length;D++)b.configurationRequests[D](b.encodedClientToken);b.configurationRequests=[]}),this.braintreeBus.on(s.events.PAYMENT_METHOD_GENERATED,y(this._handleAltPayData,this)),this.rpcServer.define("getConfiguration",function(A){A({enableCORS:b.merchantConfiguration.enableCORS,clientToken:b.encodedClientToken,paypalOptions:b.paypalOptions,analyticsConfiguration:b.analyticsConfiguration,merchantHttps:g()})}),this.rpcServer.define("selectPaymentMethod",function(A){b.frames.modal.rpcClient.invoke("selectPaymentMethod",[A]),b._showModal()}),this.rpcServer.define("sendAddedPaymentMethod",function(A){b.merchantFormManager.setNoncePayload(A),b.frames.inline.rpcClient.invoke("receiveNewPaymentMethod",[A])}),this.rpcServer.define("sendUsedPaymentMethod",function(A){b.frames.inline.rpcClient.invoke("selectPaymentMethod",[A])}),this.rpcServer.define("sendUnlockedNonce",function(A){b.merchantFormManager.setNoncePayload(A)}),this.rpcServer.define("clearNonce",function(){b.merchantFormManager.clearNoncePayload()}),this.rpcServer.define("closeDropInModal",function(){b._hideModal()}),this.rpcServer.define("setInlineFrameHeight",function(A){b.frames.inline.element.style.height=A+"px"}),this.bus.register("ready",function(A){A.source===b.frames.inline.element.contentWindow?b.frames.inline.rpcClient=new p.RPCClient(b.bus,A.source):A.source===b.frames.modal.element.contentWindow&&(b.frames.modal.rpcClient=new p.RPCClient(b.bus,A.source))})},U.prototype._createFrame=function(D,b){return new C(D,b,this.braintreeBus)},U.prototype._initializeModal=function(){this.frames.modal.element.style.display="none",this.frames.modal.element.style.position=R()?"absolute":"fixed",this.frames.modal.element.style.top="0",this.frames.modal.element.style.left="0",this.frames.modal.element.style.height="100%",this.frames.modal.element.style.width="100%"},U.prototype._lockMerchantWindowSize=function(){setTimeout(function(){o.style.overflow="hidden",r.style.overflow="hidden",r.style.height="100%",R()&&(o.style.position="relative",o.style.height=window.innerHeight+"px")},160)},U.prototype._unlockMerchantWindowSize=function(){var D=this.merchantPageDefaultStyles;!D||(r.style.height=D.body.height,r.style.overflow=D.body.overflow,o.style.overflow=D.html.overflow,R()&&(o.style.height=D.html.height,o.style.position=D.html.position),delete this.merchantPageDefaultStyles)},U.prototype._showModal=function(){var D=this,b=this.frames.modal.element;this.merchantPageDefaultStyles=P(),b.style.display="block",this.frames.modal.rpcClient.invoke("open",[],function(){setTimeout(function(){D._lockMerchantWindowSize(),b.contentWindow.focus()},200)})},U.prototype._hideModal=function(D){this._unlockMerchantWindowSize(),this.frames.modal.element.style.display="none",D&&D()},U.prototype._configurePayPal=function(){this.paypalModalView=new v({channel:this.channel,insertFrameFunction:this.paypalOptions.insertFrame,paypalAssetsUrl:this.clientToken.paypal.assetsUrl,isHermes:!!this.paypalOptions.singleUse&&!!this.paypalOptions.amount&&!!this.paypalOptions.currency})},U.prototype._handleAltPayData=function(D){this.merchantFormManager.setNoncePayload(D),this.frames.inline.rpcClient.invoke("receiveNewPaymentMethod",[D]),this.frames.modal.rpcClient.invoke("modalViewClose")},U.prototype._findClosest=function(D,b){b=b.toUpperCase();do if(D.nodeName===b)return D;while(D=D.parentNode);throw"Unable to find a valid "+b},U.prototype.teardown=function(D){this.paypalModalView&&this.paypalModalView.teardown(),this.braintreeBus.emit(T.MODAL_FRAME_TEARDOWN_EVENT,y(function(){this.braintreeBus.emit(T.INLINE_FRAME_TEARDOWN_EVENT,y(function(){this.destructor.teardown(y(function(b){if(b)return D(b);this.braintreeBus.teardown(),D()},this))},this))},this))},n.exports=U}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../shared/constants":239,"./api-proxy-server":234,"./frame-container":237,"./merchant-form-manager":238,"braintree-api":117,"braintree-bus":148,"braintree-paypal/src/external/views/app-view":183,"braintree-rpc":197,"braintree-utilities":215,destructor:216}],236:[function(e,n,t){var l=e("./client"),o="1.9.1";function r(i){var s=new l(i);return s.initialize(),s}n.exports={create:r,VERSION:o}},{"./client":235}],237:[function(e,n,t){var l=e("braintree-bus"),o=e("../shared/constants"),r=e("iframer"),i={transition:"transitionend","-o-transition":"otransitionEnd","-moz-transition":"transitionend","-webkit-transition":"webkitTransitionEnd"};function s(){var m,h=document.createElement("fakeelement");for(m in i)if(typeof h.style[m]!="undefined")return i[m];return null}function a(m,h){var y=s();function g(S){S.target===m&&S.propertyName==="height"&&(h.emit(l.events.ASYNC_DEPENDENCY_READY),m.removeEventListener(y,g))}y?m.addEventListener(y,g):setTimeout(function(){h.emit(l.events.ASYNC_DEPENDENCY_READY)},500)}function p(m,h,y){var g="height 210ms cubic-bezier(0.390, 0.575, 0.565, 1.000)",S=r({name:h,width:"100%",height:"68",style:{transition:g,WebkitTransition:g,MozTransition:g,msTransition:g,OTransition:g,border:"0",zIndex:"9999"}});this.element=S,setTimeout(function(){S.src=m+"#"+y.channel},0),h===o.INLINE_FRAME_NAME&&a(S,y)}n.exports=p},{"../shared/constants":239,"braintree-bus":148,iframer:219}],238:[function(e,n,t){var l=e("braintree-utilities"),o=e("form-napper");function r(i){this.formNapper=new o(i.form),this.frames=i.frames,this.onSubmit=i.onSubmit,this.apiClient=i.apiClient}r.prototype.initialize=function(){return this._isSubmitBased()&&this._setElements(),this._setEvents(),this},r.prototype.setNoncePayload=function(i){this.noncePayload=i},r.prototype.clearNoncePayload=function(){this.noncePayload=null},r.prototype._isSubmitBased=function(){return!this.onSubmit},r.prototype._isCallbackBased=function(){return!!this.onSubmit},r.prototype._setElements=function(){this.nonceInput=this.formNapper.inject("payment_method_nonce","")},r.prototype._setEvents=function(){this.formNapper.hijack(l.bind(this._handleFormSubmit,this))},r.prototype._handleFormSubmit=function(i){this.noncePayload&&this.noncePayload.nonce?this._handleNonceReply(i):this.frames.inline.rpcClient.invoke("requestNonce",[],l.bind(function(s){this.setNoncePayload(s),this._handleNonceReply(i)},this))},r.prototype._handleNonceReply=function(i){this._isCallbackBased()?this.apiClient.sendAnalyticsEvents("dropin.web.end.callback",l.bind(function(){var s=this.noncePayload;s.originalEvent=i,this.onSubmit(s),setTimeout(l.bind(function(){delete s.originalEvent,this.frames.inline.rpcClient.invoke("clearLoadingState"),this.frames.inline.rpcClient.invoke("receiveNewPaymentMethod",[s])},this),200)},this)):this._triggerFormSubmission()},r.prototype._triggerFormSubmission=function(){this.nonceInput=this.formNapper.inject("payment_method_nonce",this.noncePayload.nonce),this.apiClient.sendAnalyticsEvents("dropin.web.end.auto-submit",l.bind(function(){this.formNapper.submit()},this))},r.prototype.teardown=function(){var i;this.nonceInput&&(i=this.formNapper.htmlForm,i.removeChild(this.nonceInput)),this.formNapper.detach()},n.exports=r},{"braintree-utilities":215,"form-napper":376}],239:[function(e,n,t){n.exports={PAYPAL_INTEGRATION_NAME:"PayPal",INLINE_FRAME_NAME:"braintree-dropin-frame",MODAL_FRAME_NAME:"braintree-dropin-modal-frame",PAYMENT_METHOD_TYPES:["CoinbaseAccount","PayPalAccount","CreditCard"],cssClassMap:{"American Express":"american-express","Diners Club":"diners-club",DinersClub:"diners-club",Discover:"discover",JCB:"jcb",Maestro:"maestro",MasterCard:"master-card",Solo:"solo",Switch:"switch",UKMaestro:"maestro",UnionPay:"unionpay",Visa:"visa"},INLINE_FRAME_TEARDOWN_EVENT:"dropin:TEARDOWN_INLINE_FRAME",MODAL_FRAME_TEARDOWN_EVENT:"dropin:TEARDOWN_MODAL_FRAME"}},{}],240:[function(e,n,t){(function(l){var o=l.Node?l.Node.ELEMENT_NODE:1;function r(p,m){m=m||{};var h,y,g=p.children;for(y=0;y<g.length;y++)if(h=g[y],a(h)){var S=h.getAttribute("data-braintree-name");S==="postal_code"?m.billingAddress={postalCode:h.value}:m[S]=h.value,i(h)}else h.children&&h.children.length>0&&r(h,m);return m}function i(p){try{p.attributes.removeNamedItem("name")}catch{}}function s(p){r(p)}function a(p){return p.nodeType===o&&p.attributes["data-braintree-name"]}n.exports={extractValues:r,scrubAllAttributes:s,scrubAttributes:i,isBraintreeNode:a}}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],241:[function(e,n,t){(function(l){var o=e("braintree-utilities"),r=e("./fields"),i=e("destructor"),s=e("braintree-bus"),a=e("./models/payment-method-model"),p=e("./get-nonce-input"),m={message:"Unable to process payments at this time",type:"IMMEDIATE"};function h(y,g){var S=g.merchantConfiguration,x=typeof S.paymentMethodNonceInputField=="object";this.destructor=new i,this.apiClient=y,this.isCreditCardForm=S.useCreditCard!==!1,this.htmlForm=document.getElementById(S.id),this.paymentMethodNonceInput=p(S.paymentMethodNonceInputField),this.htmlForm.appendChild(this.paymentMethodNonceInput),this.destructor.registerFunctionForTeardown(o.bind(function(){x?this.paymentMethodNonceInput.value="":this.htmlForm.removeChild(this.paymentMethodNonceInput)},this)),this.model=new a,this.bus=new s({merchantUrl:l.location.href,channel:g.channel}),this.setEvents(),this.destructor.registerFunctionForTeardown(o.bind(function(){this.bus.teardown()},this))}h.prototype.setEvents=function(){this.onSubmitHandler=o.bind(this.handleSubmit,this),this.onExternalNonceReceived=o.bind(this.onExternalNonceReceived,this),this.clearExternalNonce=o.bind(this.clearExternalNonce,this),o.addEventListener(this.htmlForm,"submit",this.onSubmitHandler),this.destructor.registerFunctionForTeardown(o.bind(function(){o.removeEventListener(this.htmlForm,"submit",this.onSubmitHandler)},this)),this.bus.on(s.events.PAYMENT_METHOD_GENERATED,this.onExternalNonceReceived),this.bus.on(s.events.PAYMENT_METHOD_CANCELLED,this.clearExternalNonce)},h.prototype.handleSubmit=function(y){var g;if(y.preventDefault?y.preventDefault():y.returnValue=!1,!this.isCreditCardForm){this.onNonceReceived(null,this.model.attributes);return}if(g=this.model.get("type"),g&&g!=="CreditCard"){r.scrubAllAttributes(this.htmlForm),this.onNonceReceived(null,this.model.attributes);return}this.apiClient.tokenizeCard(r.extractValues(this.htmlForm),o.bind(function(S,x,C){S?this.onNonceReceived(m,null):(this.model.set({nonce:x,type:C.type,details:C.details}),this.onNonceReceived(null,this.model.attributes))},this))},h.prototype.writeNonceToDOM=function(){this.paymentMethodNonceInput.value=this.model.get("nonce")},h.prototype.onExternalNonceReceived=function(y){this.model.set(y),this.writeNonceToDOM()},h.prototype.clearExternalNonce=function(){this.model.reset()},h.prototype.onNonceReceived=function(y){var g=this.htmlForm;if(y){this.bus.emit(s.events.ERROR,m);return}o.removeEventListener(g,"submit",this.onSubmitHandler),this.writeNonceToDOM(),g.submit&&(typeof g.submit=="function"||g.submit.call)?g.submit():setTimeout(function(){g.querySelector('[type="submit"]').click()},1)},h.prototype.teardown=function(){this.destructor.teardown()},n.exports=h}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./fields":240,"./get-nonce-input":242,"./models/payment-method-model":243,"braintree-bus":246,"braintree-utilities":258,destructor:259}],242:[function(e,n,t){n.exports=function(o){var r;if(typeof o=="object")return o;r="payment_method_nonce",typeof o=="string"&&(r=o);var i=document.createElement("input");return i.name=r,i.type="hidden",i}},{}],243:[function(e,n,t){function l(){this.reset()}l.prototype.get=function(o){return this.attributes[o]},l.prototype.set=function(o){this.attributes=o||{}},l.prototype.reset=function(){this.attributes={}},n.exports=l},{}],244:[function(e,n,t){n.exports=function(o){for(var r=o.getElementsByTagName("*"),i={},s=0;s<r.length;s++){var a=r[s].getAttribute("data-braintree-name");i[a]=!0}if(!i.number)throw new Error('Unable to find an input with data-braintree-name="number" in your form. Please add one.');if(i.expiration_date){if(i.expiration_month||i.expiration_year)throw new Error('You have inputs with data-braintree-name="expiration_date" AND data-braintree-name="expiration_(year|month)". Please use either "expiration_date" or "expiration_year" and "expiration_month".')}else{if(!i.expiration_month&&!i.expiration_year)throw new Error('Unable to find an input with data-braintree-name="expiration_date" in your form. Please add one.');if(!i.expiration_month)throw new Error('Unable to find an input with data-braintree-name="expiration_month" in your form. Please add one.');if(!i.expiration_year)throw new Error('Unable to find an input with data-braintree-name="expiration_year" in your form. Please add one.')}}},{}],245:[function(e,n,t){var l=e("./lib/form"),o=e("./lib/validate-annotations");function r(i,s){var a=s.merchantConfiguration||{},p=document.getElementById(a.id),m=a.useCreditCard!==!1;if(!p)throw new Error('Unable to find form with id: "'+a.id+'"');return m&&o(p),new l(i,s)}n.exports={setup:r}},{"./lib/form":241,"./lib/validate-annotations":244}],246:[function(e,n,t){arguments[4][52][0].apply(t,arguments)},{"./lib/check-origin":247,"./lib/events":248,dup:52,framebus:249}],247:[function(e,n,t){arguments[4][53][0].apply(t,arguments)},{dup:53}],248:[function(e,n,t){arguments[4][54][0].apply(t,arguments)},{dup:54}],249:[function(e,n,t){arguments[4][55][0].apply(t,arguments)},{dup:55}],250:[function(e,n,t){arguments[4][35][0].apply(t,arguments)},{dup:35}],251:[function(e,n,t){arguments[4][36][0].apply(t,arguments)},{dup:36}],252:[function(e,n,t){arguments[4][22][0].apply(t,arguments)},{dup:22}],253:[function(e,n,t){arguments[4][38][0].apply(t,arguments)},{dup:38}],254:[function(e,n,t){arguments[4][39][0].apply(t,arguments)},{dup:39}],255:[function(e,n,t){arguments[4][40][0].apply(t,arguments)},{dup:40}],256:[function(e,n,t){arguments[4][41][0].apply(t,arguments)},{"./array":250,dup:41}],257:[function(e,n,t){arguments[4][42][0].apply(t,arguments)},{dup:42}],258:[function(e,n,t){arguments[4][43][0].apply(t,arguments)},{"./lib/array":250,"./lib/base64":251,"./lib/dom":252,"./lib/events":253,"./lib/fn":254,"./lib/string":255,"./lib/url":256,"./lib/uuid":257,dup:43}],259:[function(e,n,t){arguments[4][80][0].apply(t,arguments)},{"batch-execute-functions":260,"braintree-utilities/lib/fn":261,dup:80}],260:[function(e,n,t){arguments[4][81][0].apply(t,arguments)},{dup:81}],261:[function(e,n,t){arguments[4][39][0].apply(t,arguments)},{dup:39}],262:[function(e,n,t){arguments[4][2][0].apply(t,arguments)},{"./coinbase-account":263,"./constants":264,"./credit-card":265,"./europe-bank-account":266,"./normalize-api-fields":268,"./parse-client-token":269,"./paypal-account":270,"./request/choose-driver":273,"./sepa-mandate":278,"./should-enable-cors":279,"./util":280,"braintree-3ds":289,"braintree-utilities":303,dup:2}],263:[function(e,n,t){arguments[4][3][0].apply(t,arguments)},{dup:3}],264:[function(e,n,t){arguments[4][4][0].apply(t,arguments)},{dup:4}],265:[function(e,n,t){arguments[4][5][0].apply(t,arguments)},{dup:5}],266:[function(e,n,t){arguments[4][6][0].apply(t,arguments)},{dup:6}],267:[function(e,n,t){arguments[4][7][0].apply(t,arguments)},{"./constants":264,"./parse-client-token":269,"./request/choose-driver":273,"./should-enable-cors":279,"./util":280,dup:7}],268:[function(e,n,t){arguments[4][8][0].apply(t,arguments)},{dup:8}],269:[function(e,n,t){arguments[4][9][0].apply(t,arguments)},{"./polyfill":271,"braintree-utilities":303,dup:9}],270:[function(e,n,t){arguments[4][10][0].apply(t,arguments)},{dup:10}],271:[function(e,n,t){arguments[4][11][0].apply(t,arguments)},{dup:11}],272:[function(e,n,t){arguments[4][12][0].apply(t,arguments)},{"../constants":264,"../util":280,"./parse-body":276,"./prep-body":277,dup:12}],273:[function(e,n,t){arguments[4][13][0].apply(t,arguments)},{"../util":280,"./ajax-driver":272,"./jsonp-driver":274,dup:13}],274:[function(e,n,t){arguments[4][14][0].apply(t,arguments)},{"../constants":264,"./jsonp":275,dup:14}],275:[function(e,n,t){arguments[4][15][0].apply(t,arguments)},{"../util":280,dup:15}],276:[function(e,n,t){arguments[4][16][0].apply(t,arguments)},{dup:16}],277:[function(e,n,t){arguments[4][17][0].apply(t,arguments)},{dup:17,"lodash.isstring":311}],278:[function(e,n,t){arguments[4][18][0].apply(t,arguments)},{dup:18}],279:[function(e,n,t){arguments[4][19][0].apply(t,arguments)},{dup:19}],280:[function(e,n,t){arguments[4][20][0].apply(t,arguments)},{dup:20,"lodash.isempty":304,"lodash.isobject":310}],281:[function(e,n,t){arguments[4][21][0].apply(t,arguments)},{"./lib/client":262,"./lib/get-configuration":267,"./lib/parse-client-token":269,"./lib/util":280,dup:21}],282:[function(e,n,t){arguments[4][22][0].apply(t,arguments)},{dup:22}],283:[function(e,n,t){arguments[4][23][0].apply(t,arguments)},{dup:23}],284:[function(e,n,t){arguments[4][24][0].apply(t,arguments)},{dup:24}],285:[function(e,n,t){arguments[4][25][0].apply(t,arguments)},{dup:25}],286:[function(e,n,t){arguments[4][26][0].apply(t,arguments)},{"./lib/dom":282,"./lib/events":283,"./lib/fn":284,"./lib/url":285,dup:26}],287:[function(e,n,t){arguments[4][27][0].apply(t,arguments)},{"../shared/receiver":294,"braintree-utilities":286,dup:27}],288:[function(e,n,t){arguments[4][28][0].apply(t,arguments)},{"./authorization_service":287,"./loader":290,"braintree-utilities":286,dup:28}],289:[function(e,n,t){arguments[4][29][0].apply(t,arguments)},{"./client":288,dup:29}],290:[function(e,n,t){arguments[4][30][0].apply(t,arguments)},{"./loader_display":291,"./loader_message":292,"./loader_spinner":293,dup:30}],291:[function(e,n,t){arguments[4][31][0].apply(t,arguments)},{dup:31}],292:[function(e,n,t){arguments[4][32][0].apply(t,arguments)},{dup:32}],293:[function(e,n,t){arguments[4][33][0].apply(t,arguments)},{dup:33}],294:[function(e,n,t){arguments[4][34][0].apply(t,arguments)},{"braintree-utilities":286,dup:34}],295:[function(e,n,t){arguments[4][35][0].apply(t,arguments)},{dup:35}],296:[function(e,n,t){arguments[4][36][0].apply(t,arguments)},{dup:36}],297:[function(e,n,t){arguments[4][22][0].apply(t,arguments)},{dup:22}],298:[function(e,n,t){arguments[4][38][0].apply(t,arguments)},{dup:38}],299:[function(e,n,t){arguments[4][39][0].apply(t,arguments)},{dup:39}],300:[function(e,n,t){arguments[4][40][0].apply(t,arguments)},{dup:40}],301:[function(e,n,t){arguments[4][41][0].apply(t,arguments)},{"./array":295,dup:41}],302:[function(e,n,t){arguments[4][42][0].apply(t,arguments)},{dup:42}],303:[function(e,n,t){arguments[4][43][0].apply(t,arguments)},{"./lib/array":295,"./lib/base64":296,"./lib/dom":297,"./lib/events":298,"./lib/fn":299,"./lib/string":300,"./lib/url":301,"./lib/uuid":302,dup:43}],304:[function(e,n,t){arguments[4][44][0].apply(t,arguments)},{dup:44,"lodash.isarguments":305,"lodash.isarray":306,"lodash.isfunction":307,"lodash.isstring":311,"lodash.keys":308}],305:[function(e,n,t){arguments[4][45][0].apply(t,arguments)},{dup:45}],306:[function(e,n,t){arguments[4][46][0].apply(t,arguments)},{dup:46}],307:[function(e,n,t){arguments[4][47][0].apply(t,arguments)},{dup:47}],308:[function(e,n,t){arguments[4][48][0].apply(t,arguments)},{dup:48,"lodash._getnative":309,"lodash.isarguments":305,"lodash.isarray":306}],309:[function(e,n,t){arguments[4][49][0].apply(t,arguments)},{dup:49}],310:[function(e,n,t){arguments[4][50][0].apply(t,arguments)},{dup:50}],311:[function(e,n,t){arguments[4][51][0].apply(t,arguments)},{dup:51}],312:[function(e,n,t){arguments[4][52][0].apply(t,arguments)},{"./lib/check-origin":313,"./lib/events":314,dup:52,framebus:315}],313:[function(e,n,t){arguments[4][53][0].apply(t,arguments)},{dup:53}],314:[function(e,n,t){arguments[4][54][0].apply(t,arguments)},{dup:54}],315:[function(e,n,t){arguments[4][55][0].apply(t,arguments)},{dup:55}],316:[function(e,n,t){arguments[4][35][0].apply(t,arguments)},{dup:35}],317:[function(e,n,t){arguments[4][36][0].apply(t,arguments)},{dup:36}],318:[function(e,n,t){arguments[4][22][0].apply(t,arguments)},{dup:22}],319:[function(e,n,t){arguments[4][38][0].apply(t,arguments)},{dup:38}],320:[function(e,n,t){arguments[4][39][0].apply(t,arguments)},{dup:39}],321:[function(e,n,t){arguments[4][40][0].apply(t,arguments)},{dup:40}],322:[function(e,n,t){arguments[4][41][0].apply(t,arguments)},{"./array":316,dup:41}],323:[function(e,n,t){arguments[4][42][0].apply(t,arguments)},{dup:42}],324:[function(e,n,t){arguments[4][43][0].apply(t,arguments)},{"./lib/array":316,"./lib/base64":317,"./lib/dom":318,"./lib/events":319,"./lib/fn":320,"./lib/string":321,"./lib/url":322,"./lib/uuid":323,dup:43}],325:[function(e,n,t){arguments[4][80][0].apply(t,arguments)},{"batch-execute-functions":326,"braintree-utilities/lib/fn":327,dup:80}],326:[function(e,n,t){arguments[4][81][0].apply(t,arguments)},{dup:81}],327:[function(e,n,t){arguments[4][39][0].apply(t,arguments)},{dup:39}],328:[function(e,n,t){arguments[4][83][0].apply(t,arguments)},{"./lib/default-attributes":329,dup:83,"lodash.assign":330,"lodash.isstring":341,setattributes:342}],329:[function(e,n,t){arguments[4][84][0].apply(t,arguments)},{dup:84}],330:[function(e,n,t){arguments[4][85][0].apply(t,arguments)},{dup:85,"lodash._baseassign":331,"lodash._createassigner":333,"lodash.keys":337}],331:[function(e,n,t){arguments[4][86][0].apply(t,arguments)},{dup:86,"lodash._basecopy":332,"lodash.keys":337}],332:[function(e,n,t){arguments[4][87][0].apply(t,arguments)},{dup:87}],333:[function(e,n,t){arguments[4][88][0].apply(t,arguments)},{dup:88,"lodash._bindcallback":334,"lodash._isiterateecall":335,"lodash.restparam":336}],334:[function(e,n,t){arguments[4][89][0].apply(t,arguments)},{dup:89}],335:[function(e,n,t){arguments[4][90][0].apply(t,arguments)},{dup:90}],336:[function(e,n,t){arguments[4][91][0].apply(t,arguments)},{dup:91}],337:[function(e,n,t){arguments[4][48][0].apply(t,arguments)},{dup:48,"lodash._getnative":338,"lodash.isarguments":339,"lodash.isarray":340}],338:[function(e,n,t){arguments[4][49][0].apply(t,arguments)},{dup:49}],339:[function(e,n,t){arguments[4][45][0].apply(t,arguments)},{dup:45}],340:[function(e,n,t){arguments[4][46][0].apply(t,arguments)},{dup:46}],341:[function(e,n,t){arguments[4][51][0].apply(t,arguments)},{dup:51}],342:[function(e,n,t){arguments[4][97][0].apply(t,arguments)},{dup:97}],343:[function(e,n,t){(function(l){var o=e("braintree-utilities"),r=e("destructor"),i=e("braintree-bus"),s=e("./views/app-view"),a=e("./views/logged-in-view"),p=e("./views/logged-out-view"),m=e("./views/overlay-view"),h=e("./views/merchant-page-view"),y=e("./views/payment-method-nonce-input-field-view"),g=e("./views/bridge-iframe-view"),S=e("../shared/util/browser"),x=e("../shared/constants"),C=e("../shared/util/util");function T(N,v,_){v=v||{},this._clientToken=N,this._clientOptions=v,this._clientToken.correlationId=C.generateUid(),this.destructor=new r,this.channel=_,this.bus=new i({merchantUrl:l.location.href,channel:this.channel}),this.container=o.normalizeElement(v.container),this.paymentMethodNonceInputField=v.paymentMethodNonceInputField,this.insertFrameFunction=v.insertFrame,this.onSuccess=v.onSuccess,this.onCancelled=v.onCancelled,this.loggedInView=null,this.loggedOutView=null,this.appView=null,this.merchantPageView=null,this.paymentMethodNonceInputFieldView=null,this.overlayView=null,this.bridgeIframeView=null,this.insertUI=v.headless!==!0}T.prototype.initialize=function(){var N=o.bind(this._handleClickLogin,this);this._createViews(),this.bus.on(x.events.GET_CLIENT_TOKEN,o.bind(this._handleGetClientToken,this)),this.bus.on(x.events.GET_CLIENT_OPTIONS,o.bind(this._handleGetClientOptions,this)),this.insertUI&&this.bus.on(i.events.PAYMENT_METHOD_GENERATED,o.bind(this._handlePaymentMethodGenerated,this)),o.addEventListener(document.body,"click",N),this.destructor.registerFunctionForTeardown(function(){o.removeEventListener(document.body,"click",N)})},T.prototype._createViews=function(){var N,v=[];S.isBridgeIframeRequired()&&(this.bridgeIframeView=new g({container:this.container,paypalAssetsUrl:this._clientToken.paypal.assetsUrl,channel:this.channel}),v.push(this.bridgeIframeView)),this.appView=new s({insertFrameFunction:this.insertFrameFunction,paypalAssetsUrl:this._clientToken.paypal.assetsUrl,isHermes:C.isHermesConfiguration(this._clientToken,this._clientOptions),headless:this._clientOptions.headless,channel:this.channel}),v.push(this.appView),this.insertUI&&(this.paymentMethodNonceInputFieldView=new y({container:this.container,el:this.paymentMethodNonceInputField,channel:this.channel}),v.push(this.paymentMethodNonceInputFieldView),this.merchantPageView=new h({channel:this.channel}),v.push(this.merchantPageView),this.loggedInView=new a({paypalAssetsUrl:this._clientToken.paypal.assetsUrl,container:this.container,channel:this.channel}),v.push(this.loggedInView),this.loggedOutView=new p({paypalAssetsUrl:this._clientToken.paypal.assetsUrl,container:this.container,enablePayPalButton:C.isOneTimeHermesConfiguration(this._clientOptions),locale:this._clientOptions.locale,channel:this.channel}),v.push(this.loggedOutView),S.isPopupSupported()&&S.isOverlaySupported()&&(this.overlayView=new m({paypalAssetsUrl:this._clientToken.paypal.assetsUrl,onFocus:o.bind(function(){this.bus.emit(x.events.FOCUS_APP)},this),onClose:o.bind(function(){this.bus.emit(x.events.CLOSE_APP)},this),channel:this.channel}),v.push(this.overlayView))),this.destructor.registerFunctionForTeardown(function(){for(N=0;N<v.length;N++)v[N].teardown()})},T.prototype._handleClickLogin=function(N){for(var v=N.target||N.srcElement;;){if(v==null||v===N.currentTarget)return;if(this._isButton(v))break;v=v.parentNode}C.preventDefault(N),this.launch()},T.prototype.launch=function(){this.appView.open()},T.prototype._isButton=function(N){var v=N.id==="braintree-paypal-button",_=C.isOneTimeHermesConfiguration(this._clientOptions)&&N.className.match(/paypal-button(?!-widget)/);return v||_},T.prototype._handlePaymentMethodGenerated=function(N){N.type===x.NONCE_TYPE&&o.isFunction(this.onSuccess)&&this.onSuccess(N)},T.prototype._clientTokenData=function(){return{analyticsUrl:this._clientToken.analytics?this._clientToken.analytics.url:null,authorizationFingerprint:this._clientToken.authorizationFingerprint,clientApiUrl:this._clientToken.clientApiUrl,displayName:this._clientOptions.displayName||this._clientToken.paypal.displayName,paypalAssetsUrl:this._clientToken.paypal.assetsUrl,paypalClientId:this._clientToken.paypal.clientId,paypalPrivacyUrl:this._clientToken.paypal.privacyUrl,paypalUserAgreementUrl:this._clientToken.paypal.userAgreementUrl,billingAgreementsEnabled:this._clientToken.paypal.billingAgreementsEnabled,unvettedMerchant:this._clientToken.paypal.unvettedMerchant,payeeEmail:this._clientToken.paypal.payeeEmail,correlationId:this._clientToken.correlationId,offline:this._clientOptions.offline||this._clientToken.paypal.environmentNoNetwork,sdkVersion:this._clientToken.sdkVersion,merchantAppId:this._clientToken.merchantAppId}},T.prototype._handleGetClientToken=function(N){N(this._clientTokenData())},T.prototype._clientOptionsData=function(){return{locale:this._clientOptions.locale||"en_us",onetime:this._clientOptions.singleUse||!1,integration:this._clientOptions.integration||"paypal",enableShippingAddress:this._clientOptions.enableShippingAddress||!1,enableBillingAddress:this._clientOptions.enableBillingAddress||!1,enableHermes:C.isHermesConfiguration(this._clientToken,this._clientOptions),amount:this._clientOptions.amount||null,currency:this._clientOptions.currency||null,shippingAddressOverride:this._clientOptions.shippingAddressOverride||null,enableCORS:this._clientOptions.enableCORS}},T.prototype._handleGetClientOptions=function(N){N(this._clientOptionsData())},T.prototype.teardown=function(){this.destructor.teardown(o.bind(function(){this.bus.teardown()},this))},n.exports=T}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../shared/constants":354,"../shared/util/browser":361,"../shared/util/util":363,"./views/app-view":345,"./views/bridge-iframe-view":346,"./views/logged-in-view":347,"./views/logged-out-view":348,"./views/merchant-page-view":349,"./views/overlay-view":351,"./views/payment-method-nonce-input-field-view":352,"braintree-bus":312,"braintree-utilities":324,destructor:325}],344:[function(e,n,t){var l=e("./client"),o=e("../shared/util/browser"),r=e("../shared/constants"),i=e("../shared/get-locale"),s=e("../shared/util/util").isHermesConfiguration,a=e("../shared/util/util").isOneTimeHermesConfiguration,p="1.6.1",m=e("braintree-utilities"),h=e("braintree-api");function y(v,_,P){var R,U;if(_=_||{},U=_.onUnsupported,typeof U!="function"&&(U=function(D){try{console.log(D)}catch{}}),!v)return U(new Error('Parameter "clientToken" cannot be null')),null;if(v=h.parseClientToken(v),!v.paypalEnabled)return U(new Error("PayPal is not enabled")),null;if(!o.detectedPostMessage())return U(new Error("unsupported browser detected")),null;if(!_.container)return U(new Error("Please supply a container for the PayPal button to be appended to")),null;if(!N(v,_))return U(new Error("unsupported protocol detected")),null;if(T(v,_))return U(new Error("Unvetted merchant client token does not include a payee email")),null;if(s(v,_)&&!x(_.locale))return U(new Error("This PayPal integration does not support this country")),null;if(a(_)){if(!S(_.currency))return U(new Error("This PayPal integration does not support this currency")),null;if(!C(_.amount))return U(new Error("Amount must be a number")),null}return R=new l(v,_,P),R.initialize(),R}function g(v,_){var P,R=_.length,U=!1;for(P=0;P<R;P++)v.toLowerCase()===_[P].toLowerCase()&&(U=!0);return U}function S(v){return g(v,r.HERMES_SUPPORTED_CURRENCIES)}function x(v){return g(i(v).split("_")[1],r.HERMES_SUPPORTED_COUNTRIES)}function C(v){return v=parseFloat(v),typeof v=="number"&&!isNaN(v)&&v>=0}function T(v,_){return v.paypal.unvettedMerchant&&(!s(v,_)||!v.paypal.payeeEmail)}function N(v,_){return v.paypal.allowHttp||o.isPopupSupported()?!0:"merchantHttps"in _?_.merchantHttps:m.isBrowserHttps()}n.exports={create:y,VERSION:p}},{"../shared/constants":354,"../shared/get-locale":356,"../shared/util/browser":361,"../shared/util/util":363,"./client":343,"braintree-api":281,"braintree-utilities":324}],345:[function(e,n,t){arguments[4][183][0].apply(t,arguments)},{"../../shared/constants":354,"../../shared/util/browser":361,"./modal-view":350,"./popup-view":353,"braintree-bus":312,"braintree-utilities":324,destructor:325,dup:183}],346:[function(e,n,t){var l=e("../../shared/constants"),o=e("iframer");function r(i){this.options=i||{},this.el=o({src:this._buildUrl(),name:l.BRIDGE_FRAME_NAME,height:1,width:1,style:{position:"static",top:0,left:0,bottom:0,padding:0,margin:0,border:0,outline:"none",background:"transparent"}}),this.options.container.appendChild(this.el)}r.prototype._buildUrl=function(){var i=this.options.paypalAssetsUrl;return i+="/pwpp/",i+=l.VERSION,i+="/html/bridge-frame.html",i+="#"+this.options.channel,i},r.prototype.teardown=function(){this.options.container.removeChild(this.el)},n.exports=r},{"../../shared/constants":354,iframer:328}],347:[function(e,n,t){(function(l){var o=e("braintree-utilities"),r=e("destructor"),i=e("braintree-bus"),s=e("../../shared/util/util"),a=e("../../shared/util/dom"),p=e("../../shared/constants");function m(h){this.options=h||{},this.wrapper=this.options.container||document.body,this.destructor=new r,this.bus=new i({merchantUrl:l.location.href,channel:h.channel}),this._initialize()}m.prototype._initialize=function(){var h=o.bind(this._handleClickLogout,this);this._createViewContainer(),this._createPayPalName(),this._createEmailNode(),this._createLogoutNode(),o.addEventListener(this.logoutNode,"click",h),this.destructor.registerFunctionForTeardown(o.bind(function(){o.removeEventListener(this.logoutNode,"click",h)},this)),this.bus.on(i.events.PAYMENT_METHOD_GENERATED,o.bind(this._handlePaymentMethodGenerated,this)),this.bus.on(i.events.PAYMENT_METHOD_CANCELLED,o.bind(this._handlePaymentMethodCancelled,this))},m.prototype._createViewContainer=function(){var h=["display: none","max-width: 500px","overflow: hidden","padding: 16px","background-image: url("+this.options.paypalAssetsUrl+"/pwpp/"+p.VERSION+"/images/paypal-small.png)","background-image: url("+this.options.paypalAssetsUrl+"/pwpp/"+p.VERSION+"/images/paypal-small.svg), none","background-position: 20px 50%","background-repeat: no-repeat","background-size: 13px 15px","border-top: 1px solid #d1d4d6","border-bottom: 1px solid #d1d4d6"].join(";");this.container=document.createElement("div"),this.container.id="braintree-paypal-loggedin",this.container.classList.add("braintree-paypal-loggedin"),this.container.style.cssText=h,this.wrapper.appendChild(this.container)},m.prototype._createPayPalName=function(){var h=["color: #283036","font-size: 13px","font-weight: 800",'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"margin-left: 36px","-webkit-font-smoothing: antialiased","-moz-font-smoothing: antialiased","-ms-font-smoothing: antialiased","font-smoothing: antialiased"].join(";");return this.payPalName=document.createElement("span"),this.payPalName.id="bt-pp-name",this.payPalName.classList.add("bt-pp-name"),this.payPalName.innerHTML="PayPal",this.payPalName.style.cssText=h,this.container.appendChild(this.payPalName)},m.prototype._createEmailNode=function(){var h=["color: #6e787f","font-size: 13px",'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"margin-left: 5px","-webkit-font-smoothing: antialiased","-moz-font-smoothing: antialiased","-ms-font-smoothing: antialiased","font-smoothing: antialiased"].join(";");this.emailNode=document.createElement("span"),this.emailNode.id="bt-pp-email",this.emailNode.classList.add("bt-pp-email"),this.emailNode.style.cssText=h,this.container.appendChild(this.emailNode)},m.prototype._createLogoutNode=function(){var h=["color: #3d95ce","font-size: 11px",'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"line-height: 20px","margin: 0 0 0 25px","padding: 0","background-color: transparent","border: 0","cursor: pointer","text-decoration: underline","float: right","-webkit-font-smoothing: antialiased","-moz-font-smoothing: antialiased","-ms-font-smoothing: antialiased","font-smoothing: antialiased"].join(";");this.logoutNode=document.createElement("button"),this.logoutNode.id="bt-pp-cancel",this.logoutNode.classList.add("bt-pp-cancel"),this.logoutNode.innerHTML="Cancel",this.logoutNode.style.cssText=h,this.container.appendChild(this.logoutNode)},m.prototype.show=function(h){this.container.style.display="block",a.setTextContent(this.emailNode,h)},m.prototype.hide=function(){this.container.style.display="none"},m.prototype._handleClickLogout=function(h){s.preventDefault(h),this.bus.emit(i.events.PAYMENT_METHOD_CANCELLED,{source:p.PAYPAL_INTEGRATION_NAME})},m.prototype._handlePaymentMethodGenerated=function(h){var y;h.type===p.NONCE_TYPE&&(y=h&&h.details&&h.details.email?h.details.email:"",this.show(y))},m.prototype._handlePaymentMethodCancelled=function(h){h.source===p.PAYPAL_INTEGRATION_NAME&&this.hide()},m.prototype.teardown=function(){this.wrapper.removeChild(this.container),this.destructor.teardown(),this.bus.teardown()},n.exports=m}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../../shared/constants":354,"../../shared/util/dom":362,"../../shared/util/util":363,"braintree-bus":312,"braintree-utilities":324,destructor:325}],348:[function(e,n,t){(function(l){var o=e("braintree-utilities"),r=e("braintree-bus"),i=e("../../shared/constants"),s=e("../../shared/get-locale");function a(p){this.options=p,this.wrapper=this.options.container||document.body,this.bus=new r({merchantUrl:l.location.href,channel:p.channel}),this._initialize()}a.prototype._initialize=function(){this.createViewContainer(),this.options.enablePayPalButton?this.createCheckoutWithPayPalButton():this.createPayWithPayPalButton(),this.bus.on(r.events.PAYMENT_METHOD_GENERATED,o.bind(this._handlePaymentMethodGenerated,this)),this.bus.on(r.events.PAYMENT_METHOD_CANCELLED,o.bind(this._handlePaymentMethodCancelled,this))},a.prototype.createViewContainer=function(){this.container=document.createElement("div"),this.container.id="braintree-paypal-loggedout",this.wrapper.appendChild(this.container),this.loginNode=this.container},a.prototype.createPayWithPayPalButton=function(){var p=document.createElement("a"),m=new Image,h=["max-width: 100%","display: block","width: 100%","height: 100%","outline: none","border: 0"].join(";"),y=["display: block","width: 115px","height: 44px","overflow: hidden"].join(";");p.id="braintree-paypal-button",p.href="#",p.style.cssText=y,m.src=this.options.paypalAssetsUrl+"/pwpp/"+i.VERSION+"/images/pay-with-paypal.png",m.setAttribute("alt","Pay with PayPal"),m.style.cssText=h,p.appendChild(m),this.container.appendChild(p)},a.prototype.createCheckoutWithPayPalButton=function(){var p=document.createElement("script"),m,h={"data-merchant":"merchant-id","data-button":"checkout","data-type":"button","data-color":"blue","data-lc":s(this.options.locale)};p.src="//www.paypalobjects.com/api/button.js",p.async=!0;for(m in h)h.hasOwnProperty(m)&&p.setAttribute(m,h[m]);this.container.appendChild(p)},a.prototype.show=function(){this.container.style.display="block"},a.prototype.hide=function(){this.container.style.display="none"},a.prototype._handlePaymentMethodGenerated=function(p){p.type===i.NONCE_TYPE&&this.hide()},a.prototype._handlePaymentMethodCancelled=function(p){p.source===i.PAYPAL_INTEGRATION_NAME&&this.show()},a.prototype.teardown=function(){this.wrapper.removeChild(this.container),this.bus.teardown()},n.exports=a}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../../shared/constants":354,"../../shared/get-locale":356,"braintree-bus":312,"braintree-utilities":324}],349:[function(e,n,t){(function(l){var o=e("braintree-bus"),r=e("braintree-utilities"),i=e("../../shared/constants");function s(m){this.options=m,this.bus=new o({merchantUrl:l.location.href,channel:m.channel}),this.bus.on(i.events.UI_MODAL_DID_OPEN,r.bind(this.lockWindowSize,this)),this.bus.on(i.events.UI_MODAL_DID_CLOSE,r.bind(this.unlockWindowSize,this))}s.prototype.lockWindowSize=function(){this.defaultStyles=p(),document.documentElement.style.height="100%",document.documentElement.style.overflow="hidden",document.body.style.height="100%",document.body.style.overflow="hidden"},s.prototype.unlockWindowSize=function(){this.defaultStyles&&(document.documentElement.style.height=this.defaultStyles.html.styles.height,document.documentElement.style.overflow=this.defaultStyles.html.styles.overflow,document.body.style.height=this.defaultStyles.body.styles.height,document.body.style.overflow=this.defaultStyles.body.styles.overflow,delete this.defaultStyles)},s.prototype._handleUIModalDidOpen=function(m){m.source===i.PAYPAL_INTEGRATION_NAME&&this.lockWindowSize()},s.prototype._handleUIModalDidClose=function(m){m.source===i.PAYPAL_INTEGRATION_NAME&&this.unlockWindowSize()},s.prototype.teardown=function(){this.unlockWindowSize(),this.bus.teardown()};function a(m){var h=window.getComputedStyle?getComputedStyle(m):m.currentStyle;return{overflow:h.overflow||"",height:m.style.height||""}}function p(){return{html:{node:document.documentElement,styles:a(document.documentElement)},body:{node:document.body,styles:a(document.body)}}}n.exports=s}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../../shared/constants":354,"braintree-bus":312,"braintree-utilities":324}],350:[function(e,n,t){arguments[4][184][0].apply(t,arguments)},{"../../shared/constants":354,"../../shared/util/browser":361,"braintree-bus":312,"braintree-utilities":324,dup:184,iframer:328}],351:[function(e,n,t){(function(l){var o=e("braintree-utilities"),r=e("destructor"),i=e("braintree-bus"),s=e("../../shared/constants");function a(p){this.options=p,this.spriteSrc=this.options.paypalAssetsUrl+"/pwpp/"+s.VERSION+"/images/pp_overlay_sprite.png",this.bus=new i({merchantUrl:l.location.href,channel:p.channel}),this.destructor=new r,this._create(),this._setupEvents(),this.bus.on(i.events.UI_POPUP_DID_OPEN,o.bind(this._handleUIPopupDidOpen,this)),this.bus.on(i.events.UI_POPUP_DID_CLOSE,o.bind(this._handleUIPopupDidClose,this))}a.prototype.open=function(){document.body.contains(this.el)||document.body.appendChild(this.el)},a.prototype.close=function(){document.body.contains(this.el)&&document.body.removeChild(this.el)},a.prototype._handleUIPopupDidClose=function(p){p.source===s.PAYPAL_INTEGRATION_NAME&&this.close()},a.prototype._handleUIPopupDidOpen=function(p){p.source===s.PAYPAL_INTEGRATION_NAME&&this.open()},a.prototype._create=function(){this.el=document.createElement("div"),this.el.className="bt-overlay",this._setStyles(this.el,["z-index: 20001","position: fixed","top: 0","left: 0","height: 100%","width: 100%","text-align: center","background: #000","background: rgba(0,0,0,0.7)",'-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=52)"']),this.el.appendChild(this._createCloseIcon()),this.el.appendChild(this._createMessage())},a.prototype._createCloseIcon=function(){return this.closeIcon=document.createElement("div"),this.closeIcon.className="bt-close-overlay",this._setStyles(this.closeIcon,["position: absolute","top: 10px","right: 10px","cursor: pointer","background: url("+this.spriteSrc+") no-repeat 0 -67px","height: 14px","width: 14px"]),this.closeIcon},a.prototype._createMessage=function(){var p=document.createElement("div");return this._setStyles(p,["position: relative","top: 50%","max-width: 350px",'font-family: "HelveticaNeue", "HelveticaNeue-Light", "Helvetica Neue Light", helvetica, arial, sans-serif',"font-size: 14px","line-height: 20px","margin: -70px auto 0"]),p.appendChild(this._createLogo()),p.appendChild(this._createExplanation()),p.appendChild(this._createFocusLink()),p},a.prototype._createExplanation=function(){var p=document.createElement("div");return this._setStyles(p,["color: #FFF","margin-bottom: 20px"]),p.innerHTML="Don't see the secure PayPal browser? We'll help you re-launch the window to complete your purchase.",p},a.prototype._createLogo=function(){var p=document.createElement("div");return this._setStyles(p,["background: url("+this.spriteSrc+") no-repeat 0 0","width: 94px","height: 25px","margin: 0 auto 26px auto"]),p},a.prototype._createFocusLink=function(){return this.focusLink=document.createElement("a"),this._setStyles(this.focusLink,["color: #009be1","cursor: pointer"]),this.focusLink.innerHTML="Continue",this.focusLink},a.prototype._setStyles=function(p,m){var h=m.join(";");p.style.cssText=h},a.prototype._setupEvents=function(){var p=o.bind(this._handleClose,this),m=o.bind(this._handleFocus,this);o.addEventListener(this.closeIcon,"click",p),o.addEventListener(this.focusLink,"click",m),this.destructor.registerFunctionForTeardown(o.bind(function(){o.removeEventListener(this.closeIcon,"click",p),o.removeEventListener(this.focusLink,"click",m)},this))},a.prototype._handleClose=function(p){p.preventDefault(),this.close(),o.isFunction(this.options.onClose)&&this.options.onClose()},a.prototype._handleFocus=function(p){p.preventDefault(),o.isFunction(this.options.onFocus)&&this.options.onFocus()},a.prototype.teardown=function(){this.bus.teardown(),this.destructor.teardown(),this.close()},n.exports=a}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../../shared/constants":354,"braintree-bus":312,"braintree-utilities":324,destructor:325}],352:[function(e,n,t){(function(l){var o=e("braintree-utilities"),r=e("destructor"),i=e("braintree-bus"),s=e("../../shared/constants");function a(p){this.options=p||{},this.container=this.options.container||document.body,this.el=this.options.el,this.destructor=new r,this.bus=new i({merchantUrl:l.location.href,channel:p.channel}),this._initialize()}a.prototype._initialize=function(){o.isFunction(this.el)||(this.el!=null?(this.el=o.normalizeElement(this.el),this.destructor.registerFunctionForTeardown(o.bind(function(){this.clear()},this))):this.el=this.create()),this.bus.on(i.events.PAYMENT_METHOD_GENERATED,o.bind(this._handlePaymentMethodGenerated,this)),this.bus.on(i.events.PAYMENT_METHOD_CANCELLED,o.bind(this._handlePaymentMethodCancelled,this))},a.prototype.create=function(){var p=document.createElement("input");return p.name="payment_method_nonce",p.type="hidden",this.container.appendChild(p),this.destructor.registerFunctionForTeardown(o.bind(function(){this.container.removeChild(p)},this)),p},a.prototype.value=function(p){o.isFunction(this.el)?this.el(p):this.el.value=p},a.prototype.clear=function(){this.value("")},a.prototype._handlePaymentMethodCancelled=function(p){p.source===s.PAYPAL_INTEGRATION_NAME&&this.clear()},a.prototype._handlePaymentMethodGenerated=function(p){p.type===s.NONCE_TYPE&&this.value(p.nonce)},a.prototype.teardown=function(){this.destructor.teardown(),this.bus.teardown()},n.exports=a}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../../shared/constants":354,"braintree-bus":312,"braintree-utilities":324,destructor:325}],353:[function(e,n,t){arguments[4][185][0].apply(t,arguments)},{"../../shared/constants":354,"../../shared/useragent/browser":357,"braintree-bus":312,dup:185}],354:[function(e,n,t){arguments[4][186][0].apply(t,arguments)},{dup:186}],355:[function(e,n,t){n.exports={us:"en_us",gb:"en_uk",uk:"en_uk",de:"de_de",fr:"fr_fr",it:"it_it",es:"es_es",ca:"en_ca",au:"en_au",at:"de_de",be:"en_us",ch:"de_de",dk:"da_dk",nl:"nl_nl",no:"no_no",pl:"pl_pl",se:"sv_se",tr:"tr_tr",bg:"en_us",cy:"en_us",hr:"en_us",is:"en_us",kh:"en_us",mt:"en_us",my:"en_us",ru:"ru_ru"}},{}],356:[function(e,n,t){var l=e("../shared/data/country-code-lookup");function o(s){return s.indexOf("_")!==-1&&s.length===5}function r(s){var a,p;for(a in l)l.hasOwnProperty(a)&&(a===s||l[a]===s)&&(p=l[a]);return p}function i(s){var a,p;return s=s?s.toLowerCase():"us",s=s.replace(/-/g,"_"),a=o(s)?s:r(s),a?(p=a.split("_"),[p[0],p[1].toUpperCase()].join("_")):"en_US"}n.exports=i},{"../shared/data/country-code-lookup":355}],357:[function(e,n,t){arguments[4][187][0].apply(t,arguments)},{"./platform":359,"./useragent":360,dup:187}],358:[function(e,n,t){arguments[4][188][0].apply(t,arguments)},{"./platform":359,"./useragent":360,dup:188}],359:[function(e,n,t){arguments[4][189][0].apply(t,arguments)},{"./useragent":360,dup:189}],360:[function(e,n,t){arguments[4][190][0].apply(t,arguments)},{dup:190}],361:[function(e,n,t){arguments[4][191][0].apply(t,arguments)},{"../useragent/browser":357,"../useragent/device":358,"../useragent/platform":359,"../useragent/useragent":360,dup:191}],362:[function(e,n,t){function l(o,r){var i="innerText";document&&document.body&&"textContent"in document.body&&(i="textContent"),o[i]=r}n.exports={setTextContent:l}},{}],363:[function(e,n,t){var l=typeof String.prototype.trim=="function"?function(g){return g.trim()}:function(g){return g.replace(/^\s+|\s+$/,"")},o=typeof window.btoa=="function"?function(g){return window.btoa(g)}:function(g){for(var S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",x="",C,T,N,v,_,P,R,U=0;U<g.length;)C=g.charCodeAt(U++),T=g.charCodeAt(U++),N=g.charCodeAt(U++),v=C>>2,_=(C&3)<<4|T>>4,P=(T&15)<<2|N>>6,R=N&63,isNaN(T)?P=R=64:isNaN(N)&&(R=64),x=x+S.charAt(v)+S.charAt(_)+S.charAt(P)+S.charAt(R);return x};function r(){var g,S,x="";for(g=0;g<32;g++)S=Math.floor(Math.random()*16),x+=S.toString(16);return x}function i(g){return/^(true|1)$/i.test(g)}function s(g){return g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&apos;")}function a(g){var S,x,C,T,N,v,_,P,R=g.indexOf("?"),U={};if(R>=0&&(g=g.substr(R+1)),g.length===0)return null;for(S=g.split("&"),x=0,C=S.length;x<C;x++)T=S[x],N=T.indexOf("="),v=T.substr(0,N),P=T.substr(N+1),_=decodeURIComponent(P),_=_.replace(/</g,"&lt;").replace(/>/g,"&gt;"),_==="false"&&(_=!1),(_==null||_==="true")&&(_=!0),U[v]=_;return U}function p(g){g.preventDefault?g.preventDefault():g.returnValue=!1}function m(g){return Boolean(g.singleUse)&&Boolean(g.amount)&&Boolean(g.currency)}function h(g){return Boolean(g.paypal.billingAgreementsEnabled)}function y(g,S){return h(g)||m(S)}n.exports={trim:l,btoa:o,generateUid:r,castToBoolean:i,htmlEscape:s,parseUrlParams:a,preventDefault:p,isOneTimeHermesConfiguration:m,isBillingAgreementsHermesConfiguration:h,isHermesConfiguration:y}},{}],364:[function(e,n,t){arguments[4][35][0].apply(t,arguments)},{dup:35}],365:[function(e,n,t){arguments[4][36][0].apply(t,arguments)},{dup:36}],366:[function(e,n,t){arguments[4][22][0].apply(t,arguments)},{dup:22}],367:[function(e,n,t){arguments[4][38][0].apply(t,arguments)},{dup:38}],368:[function(e,n,t){arguments[4][39][0].apply(t,arguments)},{dup:39}],369:[function(e,n,t){arguments[4][40][0].apply(t,arguments)},{dup:40}],370:[function(e,n,t){arguments[4][41][0].apply(t,arguments)},{"./array":364,dup:41}],371:[function(e,n,t){arguments[4][42][0].apply(t,arguments)},{dup:42}],372:[function(e,n,t){arguments[4][43][0].apply(t,arguments)},{"./lib/array":364,"./lib/base64":365,"./lib/dom":366,"./lib/events":367,"./lib/fn":368,"./lib/string":369,"./lib/url":370,"./lib/uuid":371,dup:43}],373:[function(e,n,t){arguments[4][80][0].apply(t,arguments)},{"batch-execute-functions":374,"braintree-utilities/lib/fn":375,dup:80}],374:[function(e,n,t){arguments[4][81][0].apply(t,arguments)},{dup:81}],375:[function(e,n,t){arguments[4][39][0].apply(t,arguments)},{dup:39}],376:[function(e,n,t){(function(l){function o(r){if((typeof r=="string"||r instanceof String)&&(r=document.getElementById(r)),r instanceof HTMLFormElement)this.htmlForm=r;else throw new TypeError("FormNapper requires an HTMLFormElement element or the id string of one.")}o.prototype.hijack=function(r){this.submitHandler||(this.submitHandler=function(i){i.preventDefault?i.preventDefault():i.returnValue=!1,r(i)},l.addEventListener!=null?this.htmlForm.addEventListener("submit",this.submitHandler,!1):l.attachEvent!=null?this.htmlForm.attachEvent("onsubmit",this.submitHandler):this.htmlForm.onsubmit=this.submitHandler)},o.prototype.inject=function(r,i){var s=this.htmlForm.querySelector('input[name="'+r+'"]');return s==null&&(s=document.createElement("input"),s.type="hidden",s.name=r,this.htmlForm.appendChild(s)),s.value=i,s},o.prototype.submit=function(){HTMLFormElement.prototype.submit.call(this.htmlForm)},o.prototype.detach=function(){!this.submitHandler||(l.removeEventListener!=null?this.htmlForm.removeEventListener("submit",this.submitHandler,!1):l.detachEvent!=null?this.htmlForm.detachEvent("onsubmit",this.submitHandler):this.htmlForm.onsubmit=null,delete this.submitHandler)},n.exports=o}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],377:[function(e,n,t){var l=e("./lib/external"),o=e("./lib/shared/constants").events,r="1.0.0";n.exports={create:function(i){return new l(i)},events:o,VERSION:r}},{"./lib/external":379,"./lib/shared/constants":381}],378:[function(e,n,t){var l=e("../shared/constants");n.exports=function(r,i){return r+"/hosted-fields/"+l.VERSION+"/hosted-fields-frame.html#"+i}},{"../shared/constants":381}],379:[function(e,n,t){var l=e("destructor"),o=e("classlist"),r=e("iframer"),i=e("braintree-bus"),s=e("./compose-url"),a=e("../shared/constants"),p=e("nodelist-to-array"),m=e("braintree-utilities"),h=e("../shared/find-parent-tags"),y=e("./should-use-label-focus"),g=a.events;function S(T,N){var v=document.createElement("div");return v.style.clear="both",N=N||document.body,N.appendChild(T),N.appendChild(v),{parent:N,children:[T,v]}}function x(T,N){return function(v){var _=T[v.fieldKey].containerElement,P=o(_);v.target={fieldKey:v.fieldKey,container:_},P.toggle(a.externalClasses.FOCUSED,v.isFocused).toggle(a.externalClasses.VALID,v.isValid),v.isStrictlyValidating?P.toggle(a.externalClasses.INVALID,!v.isValid):P.toggle(a.externalClasses.INVALID,!v.isPotentiallyValid),delete v.fieldKey,delete v.isStrictlyValidating,N&&N(v)}}function C(T){var N,v,_,P,R,U,D={},b=0;for(this.injectedNodes=[],this.destructor=new l,this.bus=new i({channel:T.channel,merchantUrl:location.href}),this.destructor.registerFunctionForTeardown(m.bind(function(){this.bus.teardown()},this)),this.bus.emit(i.events.ASYNC_DEPENDENCY_INITIALIZING),this.bus.emit(i.events.SEND_ANALYTICS_EVENTS,"hosted-fields.initialized"),R=0;R<a.whitelistedFields.length;R++)if(N=a.whitelistedFields[R],v=T.merchantConfiguration.hostedFields[N],!!v){if(_=document.querySelector(v.selector),_){if(_.querySelector('iframe[name^="braintree-"]')){this.bus.emit(i.events.ERROR,{message:'Cannot place two elements in "'+v.selector+'"'});continue}}else{U='Unable to find element with selector "'+v.selector+'" for hostedFields.'+N,this.bus.emit(i.events.ERROR,{message:U});continue}P=r({type:N,name:"braintree-hosted-field-"+N,style:a.defaultIFrameStyle}),this.injectedNodes.push(S(P,_)),this.setupLabelFocus(N,_),D[N]={frameElement:P,containerElement:_},b++,setTimeout(function(A){return function(){A.src=s(T.gatewayConfiguration.assetsUrl,T.channel)}}(P),0)}this.bus.on(g.FRAME_READY,function(A){b--,A(b===0)}),this.bus.on(g.INPUT_EVENT,x(D,T.merchantConfiguration.hostedFields.onFieldEvent)),this.destructor.registerFunctionForTeardown(m.bind(function(){var A,L,k;for(A=0;A<this.injectedNodes.length;A++){for(k=this.injectedNodes[A],L=0;L<k.children.length;L++)k.parent.removeChild(k.children[L]);o(k.parent).remove(a.externalClasses.FOCUSED,a.externalClasses.INVALID,a.externalClasses.VALID)}},this))}C.prototype.setupLabelFocus=function(T,N){var v,_,P=this.bus;if(!y()||N.id==null)return;function R(){P.emit(g.TRIGGER_INPUT_FOCUS,T)}for(v=p(document.querySelectorAll('label[for="'+N.id+'"]')),v=v.concat(h(N,"label")),_=0;_<v.length;_++)m.addEventListener(v[_],"click",R,!1);this.destructor.registerFunctionForTeardown(function(){for(_=0;_<v.length;_++)m.removeEventListener(v[_],"click",R,!1)})},C.prototype.teardown=function(T){this.destructor.teardown(T)},n.exports=C},{"../shared/constants":381,"../shared/find-parent-tags":382,"./compose-url":378,"./should-use-label-focus":380,"braintree-bus":383,"braintree-utilities":395,classlist:396,destructor:399,iframer:402,"nodelist-to-array":417}],380:[function(e,n,t){n.exports=function(){return!/(iPad|iPhone|iPod)/i.test(navigator.userAgent)}},{}],381:[function(e,n,t){var l="1.0.0";n.exports={VERSION:l,events:{FRAME_READY:"hosted-fields:FRAME_READY",VALIDATE_STRICT:"hosted-fields:VALIDATE_STRICT",CONFIGURATION:"hosted-fields:CONFIGURATION",TOKENIZATION_REQUEST:"hosted-fields:TOKENIZATION_REQUEST",INPUT_EVENT:"hosted-fields:INPUT_EVENT",TRIGGER_INPUT_FOCUS:"hosted-fields:TRIGGER_INPUT_FOCUS"},externalEvents:{FOCUS:"focus",BLUR:"blur",FIELD_STATE_CHANGE:"fieldStateChange"},defaultMaxLengths:{number:19,postalCode:8,expirationDate:7,expirationMonth:2,expirationYear:4,cvv:3},externalClasses:{FOCUSED:"braintree-hosted-fields-focused",INVALID:"braintree-hosted-fields-invalid",VALID:"braintree-hosted-fields-valid"},defaultIFrameStyle:{border:"none",width:"100%",height:"100%",float:"left"},whitelistedFields:["number","cvv","expirationDate","expirationMonth","expirationYear","postalCode"],whitelistedStyles:["-moz-osx-font-smoothing","-moz-transition","-webkit-font-smoothing","-webkit-transition","color","font","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-weight","line-height","opacity","outline","text-shadow","transition"],passwordManagerFields:{number:{name:"credit-card-number",label:"Credit Card Number"},expirationDate:{name:"expiration",label:"Expiration Date"},postalCode:{name:"postal-code",label:"Postal Code"}}}},{}],382:[function(e,n,t){function l(o,r){for(var i=o.parentNode,s=[];i!=null;)i.tagName!=null&&i.tagName.toLowerCase()===r&&s.push(i),i=i.parentNode;return s}n.exports=l},{}],383:[function(e,n,t){arguments[4][52][0].apply(t,arguments)},{"./lib/check-origin":384,"./lib/events":385,dup:52,framebus:386}],384:[function(e,n,t){arguments[4][53][0].apply(t,arguments)},{dup:53}],385:[function(e,n,t){arguments[4][54][0].apply(t,arguments)},{dup:54}],386:[function(e,n,t){arguments[4][55][0].apply(t,arguments)},{dup:55}],387:[function(e,n,t){arguments[4][35][0].apply(t,arguments)},{dup:35}],388:[function(e,n,t){arguments[4][36][0].apply(t,arguments)},{dup:36}],389:[function(e,n,t){arguments[4][22][0].apply(t,arguments)},{dup:22}],390:[function(e,n,t){arguments[4][38][0].apply(t,arguments)},{dup:38}],391:[function(e,n,t){arguments[4][39][0].apply(t,arguments)},{dup:39}],392:[function(e,n,t){arguments[4][40][0].apply(t,arguments)},{dup:40}],393:[function(e,n,t){arguments[4][41][0].apply(t,arguments)},{"./array":387,dup:41}],394:[function(e,n,t){arguments[4][42][0].apply(t,arguments)},{dup:42}],395:[function(e,n,t){arguments[4][43][0].apply(t,arguments)},{"./lib/array":387,"./lib/base64":388,"./lib/dom":389,"./lib/events":390,"./lib/fn":391,"./lib/string":392,"./lib/url":393,"./lib/uuid":394,dup:43}],396:[function(e,n,t){n.exports=i;var l=e("component-indexof"),o=e("trim"),r=Array.prototype;function i(s){if(!(this instanceof i))return new i(s);var a=o(s.className).split(/\s+/),p;for(this._elem=s,this.length=0,p=0;p<a.length;p+=1)a[p]&&r.push.call(this,a[p])}i.prototype.add=function(){var s,a;for(a=0;a<arguments.length;a+=1)s=""+arguments[a],!(l(this,s)>=0)&&r.push.call(this,s);return this._elem.className=this.toString(),this},i.prototype.remove=function(){var s,a,p;for(p=0;p<arguments.length;p+=1)a=""+arguments[p],s=l(this,a),!(s<0)&&r.splice.call(this,s,1);return this._elem.className=this.toString(),this},i.prototype.contains=function(s){return s+="",l(this,s)>=0},i.prototype.toggle=function(s,a){return s+="",a===!0?this.add(s):a===!1?this.remove(s):this[this.contains(s)?"remove":"add"](s)},i.prototype.toString=function(){return r.join.call(this," ")}},{"component-indexof":397,trim:398}],397:[function(e,n,t){n.exports=function(l,o){if(l.indexOf)return l.indexOf(o);for(var r=0;r<l.length;++r)if(l[r]===o)return r;return-1}},{}],398:[function(e,n,t){t=n.exports=l;function l(o){return o.replace(/^\s*|\s*$/g,"")}t.left=function(o){return o.replace(/^\s*/,"")},t.right=function(o){return o.replace(/\s*$/,"")}},{}],399:[function(e,n,t){arguments[4][80][0].apply(t,arguments)},{"batch-execute-functions":400,"braintree-utilities/lib/fn":401,dup:80}],400:[function(e,n,t){arguments[4][81][0].apply(t,arguments)},{dup:81}],401:[function(e,n,t){arguments[4][39][0].apply(t,arguments)},{dup:39}],402:[function(e,n,t){arguments[4][83][0].apply(t,arguments)},{"./lib/default-attributes":403,dup:83,"lodash.assign":406,"lodash.isstring":404,setattributes:405}],403:[function(e,n,t){arguments[4][84][0].apply(t,arguments)},{dup:84}],404:[function(e,n,t){arguments[4][51][0].apply(t,arguments)},{dup:51}],405:[function(e,n,t){arguments[4][97][0].apply(t,arguments)},{dup:97}],406:[function(e,n,t){arguments[4][85][0].apply(t,arguments)},{dup:85,"lodash._baseassign":407,"lodash._createassigner":409,"lodash.keys":413}],407:[function(e,n,t){arguments[4][86][0].apply(t,arguments)},{dup:86,"lodash._basecopy":408,"lodash.keys":413}],408:[function(e,n,t){arguments[4][87][0].apply(t,arguments)},{dup:87}],409:[function(e,n,t){arguments[4][88][0].apply(t,arguments)},{dup:88,"lodash._bindcallback":410,"lodash._isiterateecall":411,"lodash.restparam":412}],410:[function(e,n,t){arguments[4][89][0].apply(t,arguments)},{dup:89}],411:[function(e,n,t){arguments[4][90][0].apply(t,arguments)},{dup:90}],412:[function(e,n,t){arguments[4][91][0].apply(t,arguments)},{dup:91}],413:[function(e,n,t){arguments[4][48][0].apply(t,arguments)},{dup:48,"lodash._getnative":414,"lodash.isarguments":415,"lodash.isarray":416}],414:[function(e,n,t){arguments[4][49][0].apply(t,arguments)},{dup:49}],415:[function(e,n,t){arguments[4][45][0].apply(t,arguments)},{dup:45}],416:[function(e,n,t){arguments[4][46][0].apply(t,arguments)},{dup:46}],417:[function(e,n,t){function l(o){try{return Array.prototype.slice.call(o)}catch{for(var r=[],i=0;i<o.length;i++)r.push(o[i]);return r}}typeof n!="undefined"&&(n.exports=l)},{}],418:[function(e,n,t){var l=e("lodash._baseclone"),o=e("lodash._bindcallback");function r(i,s,a){return typeof s=="function"?l(i,!0,o(s,a,3)):l(i,!0)}n.exports=r},{"lodash._baseclone":419,"lodash._bindcallback":429}],419:[function(e,n,t){(function(l){var o=e("lodash._arraycopy"),r=e("lodash._arrayeach"),i=e("lodash._baseassign"),s=e("lodash._basefor"),a=e("lodash.isarray"),p=e("lodash.keys"),m="[object Arguments]",h="[object Array]",y="[object Boolean]",g="[object Date]",S="[object Error]",x="[object Function]",C="[object Map]",T="[object Number]",N="[object Object]",v="[object RegExp]",_="[object Set]",P="[object String]",R="[object WeakMap]",U="[object ArrayBuffer]",D="[object Float32Array]",b="[object Float64Array]",A="[object Int8Array]",L="[object Int16Array]",k="[object Int32Array]",H="[object Uint8Array]",X="[object Uint8ClampedArray]",ne="[object Uint16Array]",ae="[object Uint32Array]",le=/\w*$/,Z={};Z[m]=Z[h]=Z[U]=Z[y]=Z[g]=Z[D]=Z[b]=Z[A]=Z[L]=Z[k]=Z[T]=Z[N]=Z[v]=Z[P]=Z[H]=Z[X]=Z[ne]=Z[ae]=!0,Z[S]=Z[x]=Z[C]=Z[_]=Z[R]=!1;var ce=Object.prototype,Me=ce.hasOwnProperty,Ne=ce.toString,Oe=l.ArrayBuffer,ke=l.Uint8Array;function ye(Y,J,ue,ve,be,fe,we){var de;if(ue&&(de=be?ue(Y,ve,be):ue(Y)),de!==void 0)return de;if(!ut(Y))return Y;var Ue=a(Y);if(Ue){if(de=ot(Y),!J)return o(Y,de)}else{var Ce=Ne.call(Y),qe=Ce==x;if(Ce==N||Ce==m||qe&&!be){if(de=st(qe?{}:Y),!J)return i(de,Y)}else return Z[Ce]?at(Y,Ce,J):be?Y:{}}fe||(fe=[]),we||(we=[]);for(var _e=fe.length;_e--;)if(fe[_e]==Y)return we[_e];return fe.push(Y),we.push(de),(Ue?r:it)(Y,function(lt,je){de[je]=ye(lt,J,ue,je,Y,fe,we)}),de}function it(Y,J){return s(Y,J,p)}function Fe(Y){var J=new Oe(Y.byteLength),ue=new ke(J);return ue.set(new ke(Y)),J}function ot(Y){var J=Y.length,ue=new Y.constructor(J);return J&&typeof Y[0]=="string"&&Me.call(Y,"index")&&(ue.index=Y.index,ue.input=Y.input),ue}function st(Y){var J=Y.constructor;return typeof J=="function"&&J instanceof J||(J=Object),new J}function at(Y,J,ue){var ve=Y.constructor;switch(J){case U:return Fe(Y);case y:case g:return new ve(+Y);case D:case b:case A:case L:case k:case H:case X:case ne:case ae:var be=Y.buffer;return new ve(ue?Fe(be):be,Y.byteOffset,Y.length);case T:case P:return new ve(Y);case v:var fe=new ve(Y.source,le.exec(Y));fe.lastIndex=Y.lastIndex}return fe}function ut(Y){var J=typeof Y;return!!Y&&(J=="object"||J=="function")}n.exports=ye}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"lodash._arraycopy":420,"lodash._arrayeach":421,"lodash._baseassign":422,"lodash._basefor":424,"lodash.isarray":425,"lodash.keys":426}],420:[function(e,n,t){function l(o,r){var i=-1,s=o.length;for(r||(r=Array(s));++i<s;)r[i]=o[i];return r}n.exports=l},{}],421:[function(e,n,t){function l(o,r){for(var i=-1,s=o.length;++i<s&&r(o[i],i,o)!==!1;);return o}n.exports=l},{}],422:[function(e,n,t){arguments[4][86][0].apply(t,arguments)},{dup:86,"lodash._basecopy":423,"lodash.keys":426}],423:[function(e,n,t){arguments[4][87][0].apply(t,arguments)},{dup:87}],424:[function(e,n,t){var l=o();function o(s){return function(a,p,m){for(var h=r(a),y=m(a),g=y.length,S=s?g:-1;s?S--:++S<g;){var x=y[S];if(p(h[x],x,h)===!1)break}return a}}function r(s){return i(s)?s:Object(s)}function i(s){var a=typeof s;return!!s&&(a=="object"||a=="function")}n.exports=l},{}],425:[function(e,n,t){arguments[4][46][0].apply(t,arguments)},{dup:46}],426:[function(e,n,t){arguments[4][48][0].apply(t,arguments)},{dup:48,"lodash._getnative":427,"lodash.isarguments":428,"lodash.isarray":425}],427:[function(e,n,t){arguments[4][49][0].apply(t,arguments)},{dup:49}],428:[function(e,n,t){arguments[4][45][0].apply(t,arguments)},{dup:45}],429:[function(e,n,t){arguments[4][89][0].apply(t,arguments)},{dup:89}],430:[function(e,n,t){var l=e("lodash._baseassign"),o=e("lodash._basecreate"),r=e("lodash._isiterateecall");function i(s,a,p){var m=o(s);return p&&r(s,a,p)&&(a=void 0),a?l(m,a):m}n.exports=i},{"lodash._baseassign":431,"lodash._basecreate":437,"lodash._isiterateecall":438}],431:[function(e,n,t){arguments[4][86][0].apply(t,arguments)},{dup:86,"lodash._basecopy":432,"lodash.keys":433}],432:[function(e,n,t){arguments[4][87][0].apply(t,arguments)},{dup:87}],433:[function(e,n,t){arguments[4][48][0].apply(t,arguments)},{dup:48,"lodash._getnative":434,"lodash.isarguments":435,"lodash.isarray":436}],434:[function(e,n,t){arguments[4][49][0].apply(t,arguments)},{dup:49}],435:[function(e,n,t){arguments[4][45][0].apply(t,arguments)},{dup:45}],436:[function(e,n,t){arguments[4][46][0].apply(t,arguments)},{dup:46}],437:[function(e,n,t){var l=function(){function r(){}return function(i){if(o(i)){r.prototype=i;var s=new r;r.prototype=void 0}return s||{}}}();function o(r){var i=typeof r;return!!r&&(i=="object"||i=="function")}n.exports=l},{}],438:[function(e,n,t){arguments[4][90][0].apply(t,arguments)},{dup:90}],439:[function(e,n,t){function l(r){var i,s={};if(!!r){for(i in r)r.hasOwnProperty(i)&&(s[o(i)]=r[i]);return s}}function o(r){return r.replace(/([A-Z])/g,function(i){return"_"+i.toLowerCase()})}n.exports={convertToLegacyShippingAddress:l}},{}],440:[function(e,n,t){n.exports={ROOT_SUCCESS_CALLBACK:"onPaymentMethodReceived",ROOT_ERROR_CALLBACK:"onError",ROOT_READY_CALLBACK:"onReady"}},{}],441:[function(e,n,t){(function(l){var o=e("lodash.clonedeep"),r=e("braintree-api"),i=e("braintree-bus"),s=e("destructor"),a=e("braintree-utilities").bind,p=e("../constants"),m=e("../lib/sanitize-payload"),h=e("../lib/lookup-callback-for"),y=e("../lib/fallback-error-handler"),g=e("../lib/node-type"),S=g.isJQueryElement,x=g.isHTMLElement;function C(){}function T(){this._dependenciesRemaining++}function N(){this._dependenciesRemaining--,this._dependenciesRemaining===0&&(delete this._dependenciesRemaining,this.bus.off(i.events.ASYNC_DEPENDENCY_INITIALIZING,this._handleDependencyInitializing),this.bus.off(i.events.ASYNC_DEPENDENCY_READY,this._handleDependencyReady),this._onIntegrationReady())}function v(_){this.configuration=_,this.isReady=!1,this.destructor=new s,this.bus=new i({channel:this.configuration.channel,merchantUrl:l.location.href}),this._createApiClient(),this._configureCallbacks(),this._configureAnalytics(),this._attachEvents(),this._emitInitializing()}v.prototype._emitInitializing=function(){this.bus.emit(i.events.ASYNC_DEPENDENCY_INITIALIZING)},v.prototype._createApiClient=function(){var _={clientToken:this.configuration.gatewayConfiguration,integration:this.configuration.integrationType,analyticsConfiguration:this.configuration.analyticsConfiguration};this.configuration.merchantConfiguration.enableCORS&&(_.enableCORS=!0),this.apiClient=new r.Client(_)},v.prototype._configureCallbacks=function(){var _=h(this.configuration.merchantConfiguration);function P(R){return function(U){R(m(U))}}this.onSuccess=P(_(p.ROOT_SUCCESS_CALLBACK)),this.onError=_(p.ROOT_ERROR_CALLBACK,y),this.onReady=_(p.ROOT_READY_CALLBACK)},v.prototype._configureAnalytics=function(){var _="web."+this.configuration.integrationType+".",P=this.apiClient;this.bus.on(i.events.SEND_ANALYTICS_EVENTS,function(R,U){var D;for(R instanceof Array||(R=[R]),D=0;D<R.length;D++)R[D]=_+R[D];P.sendAnalyticsEvents(R,U)})},v.prototype._attachEvents=function(){var _,P=this.configuration;this.bus.on(i.events.ERROR,this.onError),this.bus.on(i.events.PAYMENT_METHOD_RECEIVED,this.onSuccess),this.bus.on(i.events.WARNING,function(R){try{console.warn(R)}catch{}}),_={enableCORS:P.merchantConfiguration.enableCORS,configuration:P.gatewayConfiguration,integration:P.integrationType,analyticsConfiguration:P.analyticsConfiguration,merchantConfiguration:o(P.merchantConfiguration,function(R){if(S(R)||x(R))return{}})},this.bus.on(i.events.CONFIGURATION_REQUEST,function(R){R(_)}),this._dependenciesRemaining=0,this._handleDependencyInitializing=a(T,this),this._handleDependencyReady=a(N,this),this.bus.on(i.events.ASYNC_DEPENDENCY_INITIALIZING,this._handleDependencyInitializing),this.bus.on(i.events.ASYNC_DEPENDENCY_READY,this._handleDependencyReady)},v.prototype._onIntegrationReady=function(){var _={teardown:a(function(P){var R,U="Cannot call teardown while in progress";P=P||C;function D(){throw new Error(U)}for(R in _)_.hasOwnProperty(R)&&(_[R]=D);this.destructor.teardown(a(function(){U="Cannot teardown integration more than once",this.bus.teardown(),P()},this))},this)};this.isReady=!0,this.onReady(_)},n.exports=v}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../constants":440,"../lib/fallback-error-handler":447,"../lib/lookup-callback-for":449,"../lib/node-type":450,"../lib/sanitize-payload":451,"braintree-api":21,"braintree-bus":52,"braintree-utilities":372,destructor:373,"lodash.clonedeep":418}],442:[function(e,n,t){var l=e("lodash.clonedeep"),o=e("lodash.create"),r=e("braintree-api"),i=e("braintree-utilities").bind,s=e("braintree-coinbase"),a=e("braintree-bus"),p=e("./base-integration");function m(){var h,y;p.apply(this,arguments),h=l(this.configuration.merchantConfiguration),this._attachBusEvents(),h.channel=this.configuration.channel,h.configuration=l(this.configuration.gatewayConfiguration),h.coinbase=l(h.coinbase||{}),h.apiClient=new r.Client({enableCORS:this.configuration.merchantConfiguration.enableCORS||!1,clientToken:this.configuration.gatewayConfiguration,integration:"coinbase"}),y=s.create(h),this.destructor.registerFunctionForTeardown(function(g){y.teardown(g)}),this.bus.emit(a.events.ASYNC_DEPENDENCY_READY)}m.prototype=o(p.prototype,{constructor:m}),m.prototype._attachBusEvents=function(){this.bus.on(a.events.PAYMENT_METHOD_GENERATED,i(this._onPaymentMethodGenerated,this))},m.prototype._onPaymentMethodGenerated=function(h){this.bus.emit(a.events.PAYMENT_METHOD_RECEIVED,h)},n.exports=m},{"./base-integration":441,"braintree-api":21,"braintree-bus":52,"braintree-coinbase":56,"braintree-utilities":372,"lodash.clonedeep":418,"lodash.create":430}],443:[function(e,n,t){var l=e("lodash.clonedeep"),o=e("lodash.create"),r=e("braintree-form"),i=e("braintree-paypal"),s=e("braintree-coinbase"),a=e("braintree-utilities"),p=e("hosted-fields"),m=e("form-napper"),h=e("../constants"),y=e("braintree-bus"),g=e("../compatibility").convertToLegacyShippingAddress,S=e("./base-integration"),x=e("../lib/node-type"),C=x.isJQueryElement,T=x.isHTMLElement,N=e("../lib/hosted-fields-nonce-manager");function v(){S.apply(this,arguments),this.configuration.merchantConfiguration.hostedFields!=null?this._setupHostedFields():this._setupForm(),this._setupPayPal(),this._setupCoinbase(),this.bus.emit(y.events.ASYNC_DEPENDENCY_READY)}v.prototype=o(S.prototype,{constructor:v}),v.prototype._setupHostedFields=function(){var P,R=this.configuration.merchantConfiguration,U=R[h.ROOT_SUCCESS_CALLBACK],D=new m(R.id),b=p.create(this.configuration),A=new N({formNapper:D,rootCallback:U,channel:this.configuration.channel});if(D.htmlForm==null){this.bus.emit(y.events.ERROR,{type:"CONFIGURATION",message:"options.id does not reference a valid DOM element"});return}P=a.bind(A.handleSubmitRequest,A),D.hijack(P),this.bus.on(y.events.USER_FORM_SUBMIT_REQUEST,P),this.destructor.registerFunctionForTeardown(a.bind(function(L){A.teardown(),D.detach(),b.teardown(L)},this))},v.prototype._setupForm=function(){var P=this.configuration.merchantConfiguration,R,U,D;P.id?(D=r.setup(this.apiClient,this.configuration),R=!a.isFunction(P[h.ROOT_SUCCESS_CALLBACK]),R||(U=this.onSuccess,D.onNonceReceived=a.bind(function(b,A){b?this.bus.emit(y.events.ERROR,b):U(A)},this)),this.destructor.registerFunctionForTeardown(function(){D.teardown()})):this.bus.on(y.events.PAYMENT_METHOD_GENERATED,a.bind(function(b){this.bus.emit(y.events.PAYMENT_METHOD_RECEIVED,b)},this))},v.prototype._setupPayPal=function(){var P,R,U,D,b,A,L=this.configuration.merchantConfiguration;!L.paypal||(A=l(L.paypal,function(k){if(C(k))return k[0];if(T(k))return k}),P=_(L,"paypal"),R=P("onSuccess"),U=P("onCancelled"),A.paymentMethodNonceInputField||(D=document.createElement("input"),D.id="braintree-custom-integration-dummy-input",A.paymentMethodNonceInputField=D),A.onSuccess=function(k){R(k.nonce,k.details.email,g(k.details.shippingAddress))},A.onCancelled=a.bind(function(){this.bus.emit(y.events.PAYMENT_METHOD_CANCELLED),U()},this),L.enableCORS&&(A.enableCORS=!0),b=i.create(this.configuration.gatewayConfiguration,A,this.configuration.channel),b!=null&&this.destructor.registerFunctionForTeardown(function(){b.teardown()}))},v.prototype._setupCoinbase=function(){var P,R;!this.configuration.merchantConfiguration.coinbase||navigator.userAgent.match(/MSIE 8\.0/)||(P=l(this.configuration.merchantConfiguration),P.channel=this.configuration.channel,P.configuration=this.configuration.gatewayConfiguration,P.apiClient=this.apiClient,delete P.paypal,R=s.create(P),this.destructor.registerFunctionForTeardown(function(U){R.teardown(U)}))};function _(P,R){return function(U){return R in P&&a.isFunction(P[R][U])?P[R][U]:function(){}}}n.exports=v},{"../compatibility":439,"../constants":440,"../lib/hosted-fields-nonce-manager":448,"../lib/node-type":450,"./base-integration":441,"braintree-bus":52,"braintree-coinbase":56,"braintree-form":245,"braintree-paypal":344,"braintree-utilities":372,"form-napper":376,"hosted-fields":377,"lodash.clonedeep":418,"lodash.create":430}],444:[function(e,n,t){var l=e("lodash.create"),o=e("braintree-dropin"),r=e("braintree-utilities"),i=e("braintree-bus"),s=e("../constants"),a=e("../lib/sanitize-payload"),p=e("./base-integration");function m(g){return r.isFunction(g.paymentMethodNonceReceived)?g.paymentMethodNonceReceived:null}function h(g){return r.isFunction(g[s.ROOT_SUCCESS_CALLBACK])}function y(){var g,S,x,C;p.apply(this,arguments),g=this.configuration.merchantConfiguration,S=m(g),x=h(g),(S||x)&&(g.paymentMethodNonceReceived=r.bind(function(T){S&&S(T.originalEvent,T.nonce),this.bus.emit(i.events.PAYMENT_METHOD_RECEIVED,a(T))},this)),C=o.create(this.configuration),this.destructor.registerFunctionForTeardown(function(T){C.teardown(T)}),this.bus.emit(i.events.ASYNC_DEPENDENCY_READY)}y.prototype=l(p.prototype,{constructor:y}),n.exports=y},{"../constants":440,"../lib/sanitize-payload":451,"./base-integration":441,"braintree-bus":52,"braintree-dropin":236,"braintree-utilities":372,"lodash.create":430}],445:[function(e,n,t){n.exports={custom:e("./custom"),dropin:e("./dropin"),paypal:e("./paypal"),coinbase:e("./coinbase")}},{"./coinbase":442,"./custom":443,"./dropin":444,"./paypal":446}],446:[function(e,n,t){var l=e("lodash.create"),o=e("braintree-paypal"),r=e("braintree-utilities"),i=e("../constants"),s=e("braintree-bus"),a=e("../compatibility").convertToLegacyShippingAddress,p=e("./base-integration");function m(g){return"onSuccess"in g&&r.isFunction(g.onSuccess)?g.onSuccess:"paypal"in g&&r.isFunction(g.paypal.onSuccess)?g.paypal.onSuccess:null}function h(g){return r.isFunction(g[i.ROOT_SUCCESS_CALLBACK])}function y(){var g,S,x,C;p.apply(this,arguments),g=this.configuration.merchantConfiguration,S=m(g),x=h(g),(S||x)&&(g.onSuccess=r.bind(function(T){S&&S(T.nonce,T.details.email,a(T.details.shippingAddress)),this.bus.emit(s.events.PAYMENT_METHOD_RECEIVED,T)},this)),C=o.create(this.configuration.gatewayConfiguration,g,this.configuration.channel),this.destructor.registerFunctionForTeardown(function(){C.teardown()}),this.bus.emit(s.events.ASYNC_DEPENDENCY_READY)}y.prototype=l(p.prototype,{constructor:y}),n.exports=y},{"../compatibility":439,"../constants":440,"./base-integration":441,"braintree-bus":52,"braintree-paypal":344,"braintree-utilities":372,"lodash.create":430}],447:[function(e,n,t){n.exports=function(o){if(o.type==="CONFIGURATION"||o.type==="IMMEDIATE")throw new Error(o.message);try{console.error(JSON.stringify(o))}catch{}}},{}],448:[function(e,n,t){var l=e("braintree-bus"),o=e("hosted-fields"),r="web.custom.hosted-fields.via.",i="payment_method_nonce";function s(a){this.paymentMethod=null,this.nonceInputElement=null,this.bus=new l({channel:a.channel}),this.formNapper=a.formNapper,this.rootCallback=a.rootCallback,this._attachEvents()}s.prototype._clearNonce=function(){this.paymentMethod=null,this.nonceInputElement=this.formNapper.inject(i,"")},s.prototype._attachEvents=function(){var a=this;this.bus.on(l.events.PAYMENT_METHOD_CANCELLED,function(){a._clearNonce()}),this.bus.on(l.events.PAYMENT_METHOD_GENERATED,function(p){a.paymentMethod=p,a.nonceInputElement=a.formNapper.inject(i,a.paymentMethod.nonce)})},s.prototype.handleSubmitRequest=function(){var a=this;this.bus.emit(o.events.TOKENIZATION_REQUEST,function(p){var m=p[0],h=p[1];if(m){a.bus.emit(l.events.ERROR,m);return}if(a.paymentMethod=h||a.paymentMethod,a.paymentMethod==null){a.bus.emit(o.events.VALIDATE_STRICT),a.bus.emit(l.events.ERROR,{type:"VALIDATION",message:"User did not enter a payment method"});return}a.rootCallback?a.bus.emit(l.events.SEND_ANALYTICS_EVENTS,r+"callback.success",function(){a.rootCallback(a.paymentMethod)}):a.bus.emit(l.events.SEND_ANALYTICS_EVENTS,r+"formsubmit.success",function(){a.nonceInputElement=a.formNapper.inject(i,a.paymentMethod.nonce),a.formNapper.submit()})})},s.prototype.teardown=function(){this._clearNonce()},n.exports=s},{"braintree-bus":52,"hosted-fields":377}],449:[function(e,n,t){var l=e("braintree-utilities").isFunction;function o(){}n.exports=function(i){return function(s,a){return l(i[s])?i[s]:l(a)?a:o}}},{"braintree-utilities":372}],450:[function(e,n,t){function l(r){return typeof r=="object"&&"jquery"in r&&r.length!==0}function o(r){return r&&r.nodeType===1}n.exports={isJQueryElement:l,isHTMLElement:o}},{}],451:[function(e,n,t){n.exports=function(o){return{nonce:o.nonce,details:o.details,type:o.type}}},{}]},{},[1])(1)})})(re);var kt=re.exports;ee("submit",".js-braintree-encrypt",function({currentTarget:E}){const I=E.getAttribute("data-braintree-key");if(!I)throw new Error("Missing `data-braintree-key` attribute on element");window.Braintree.create(I).encryptForm(E)});var Ft=Object.defineProperty,Le=(E,I)=>Ft(E,"name",{value:I,configurable:!0});ee("submit",".js-find-coupon-form",function(E){const I=E.target;if(!(I instanceof HTMLFormElement))return;const e=I.action,n=document.querySelector("#code");window.location.href=`${e}/${encodeURIComponent(n.value)}`,E.preventDefault()}),ee("click",".js-choose-account",function(E){for(const n of document.querySelectorAll(".js-plan-row, .js-choose-plan"))n.classList.remove("selected");const I=document.querySelector(".js-plan");I.value="";for(const n of document.querySelectorAll(".js-billing-section"))n.classList.add("has-removed-contents");const e=E.currentTarget.closest(".js-account-row");e&&Ye(e)}),ee("click",".js-choose-plan",function(E){if(!(E.target instanceof Element))return;const I=E.target.closest(".js-plan-row");Te(I)}),se(".js-choose-plan-radio:checked",{add(E){Te(E.closest(".js-plan-row"))}}),se(".js-plan-row.selected",{add:Ve}),se(".js-choose-account.selected",{add:Ve});function Ve(E){const I=E.closest("form");if(!I)return;const e=I.querySelector(".js-redeem-button");e instanceof HTMLButtonElement&&(e.disabled=E.classList.contains("free-plan"))}Le(Ve,"enableNextButton");function Ye(E){const I=E.getAttribute("data-login"),e=E.getAttribute("data-plan");if(!I||!e)return;for(const s of document.querySelectorAll(".js-account-row, .js-choose-account"))s.classList.remove("selected");E.classList.add("selected");const n=E.querySelector(".js-choose-account");n&&n.classList.add("selected");const t=document.querySelector(".js-account");t&&(t.value=I);const l=document.querySelector(".js-plan-section");l&&(l.hidden=!1);for(const s of document.querySelectorAll(".js-billing-plans"))s.hidden=!0;const o=document.querySelector(`.js-billing-plans[data-login='${I}']`);if(!o)return;o.hidden=!1;const r=o.querySelectorAll(".js-plan-row"),i=r.length===1?r[0]:o.querySelector(`[data-name='${e}']`);i instanceof Element&&Te(i)}Le(Ye,"selectAccount");function ht(E){const I=E.getAttribute("data-login"),e=E.getAttribute("data-plan");if(!I||!e)return;for(const o of document.querySelectorAll(".js-billing-plans"))o.hidden=!0;const n=document.querySelector(`.js-billing-plans[data-login='${I}']`);if(!n)return;n.hidden=!1;const t=n.querySelectorAll(".js-plan-row"),l=t.length===1?t[0]:n.querySelector(`[data-name='${e}']`);l instanceof Element&&Te(l)}Le(ht,"selectPlanForDataCollection");function Te(E){const I=E.getAttribute("data-name"),e=E.closest(".js-billing-plans");if(!e)return;const n=e.getAttribute("data-login");if(!n)return;const t=e.getAttribute("data-has-billing")==="true",l=parseInt(E.getAttribute("data-cost")||"",10);for(const a of document.querySelectorAll(".js-plan-row, .js-choose-plan"))a.classList.remove("selected");E.classList.add("selected");const o=E.querySelector(".js-choose-plan");o&&o.classList.add("selected");const r=E.querySelector(".js-choose-plan-radio");r instanceof HTMLInputElement&&(r.checked=!0);const i=document.querySelector(".js-plan");if(i&&(i.value=I||""),!document.querySelector(".js-coupons-data-collection-wrapper")){if(l===0||t){const a=document.querySelector(".js-billing-section");a&&a.classList.add("has-removed-contents")}else if(n){const a=document.querySelector(`.js-billing-section[data-login='${n}']`);a&&a.classList.remove("has-removed-contents")}}}Le(Te,"selectPlan"),async function(){await He;const E=document.querySelector(".js-account-row.selected");E&&Ye(E);const I=document.querySelector(".js-coupons-data-collection-wrapper");if(I)ht(I);else{const e=document.querySelector(".js-plan-row.selected");e instanceof Element&&Te(e)}}();var Ut=Object.defineProperty,qt=(E,I)=>Ut(E,"name",{value:I,configurable:!0});ee("click",".js-enter-new-card",function(E){const I=E.currentTarget.closest(".js-zuora-existing-card"),e=document.querySelector(".js-billing-section"),n=document.querySelector(".js-enter-new-card");I.classList.add("d-none"),e.hidden=!1;const t=e.querySelector("iframe");t.setAttribute("width","100%");const l=n.getAttribute("data-sdn-data-collection")==="true"?"237":"677";t.setAttribute("height",l)}),ee("click",".js-edit-card-details",function(E){const I=document.getElementById("zuora_payment"),e=E.currentTarget.closest(".js-zuora-billing-info"),n=document.querySelector(".js-billing-section");I.classList.toggle("d-none"),e.classList.toggle("d-none"),n.classList.remove("PaymentMethod--creditcard-added"),n.classList.add("PaymentMethod--creditcard")});const jt={Australia:"AU00 000 000 000",Austria:"ATU000000000",Belgium:"BE0000000000",Bulgaria:"BG000000000",Croatia:"HR00000000000",Cyprus:"CY000000000X","Czech Republic":"CZ00000000...",Denmark:"DK00 00 00 00",Estonia:"EE000000000",Finland:"FI00000000",France:"FRXX 000000000",Germany:"DE000000000",Greece:"EL000000000",Hungary:"HU00000000",Iceland:"IS...",India:"IN00000000000",Ireland:"IE0000000XA",Italy:"IT00000000000",Japan:"000000000000",Latvia:"LV00000000000",Lithuania:"LT000000000...",Luxembourg:"LU00000000",Malta:"MT00000000",Netherlands:"NL000000000B00","New Zealand":"NZ0000000000000",Norway:"NO000000000MVA",Poland:"PL0000000000",Portugal:"PT000000000",Romania:"RO0000000000",Russia:"RU0000000000",Slovakia:"SK0000000000",Slovenia:"SI00000000",Spain:"ES...",Sweden:"SE000000000000",Switzerland:"CHE000000000TVA",Taiwan:"00000000","United Kingdom":"GB000000000"},Bt=["Angola","Antigua and Barbuda","Aruba","Bahamas","Belize","Benin","Botswana","Cameroon","Comoros","Congo (Brazzaville)","Congo (Kinshasa)","Cook Islands","C\xF4te d'Ivoire","Djibouti","Dominica","Fiji","French Southern Lands","Ghana","Guyana","Hong Kong","Ireland","Kiribati","Korea, North","Malawi","Maritania","Mauritius","Montserrat","Nauru","Niue","Qatar","Saint Kitts and Nevis","Saint Lucia","Sao Tome and Principe","Seychelles","Sierra Leone","Sint Maarten (Dutch part)","Solomon Islands","Somalia","Suriname","Syria","Togo","Tokelau","Tonga","United Arab Emirates","Vanuatu","Yemen","Zimbabwe"],Ge="United States of America",mt="Canada";function We(E){let I;const e=E.options[E.selectedIndex];e&&(I=e.textContent);const n=I?jt[I]:null,t=E.closest(".js-setup-creditcard");t.classList.toggle("is-vat-country",n!=null);const l=t.querySelector(".js-vat-help-text");l.textContent=n?`(${n})`:"";const o=t.querySelector(".js-select-state");if(t.classList.toggle("is-international",I!==Ge&&I!==mt),o.required=I===Ge,I!==Ge&&(o.value=""),I===mt){const s=t.querySelector(".js-select-province"),a=t.querySelector(".js-region-label");a.textContent="Province",s.disabled=!1,s.required=!0,o.classList.add("d-none"),s.classList.remove("d-none")}else{const s=t.querySelector(".js-select-province"),a=t.querySelector(".js-region-label");a.textContent="State",s.disabled=!0,s.required=!1,s.value="",o.classList.remove("d-none"),s.classList.add("d-none")}const r=t.querySelector(".js-postal-code-field"),i=Bt.indexOf(I||"")>=0;t.classList.toggle("no-postcodes",i),r.required=!i,i&&(r.value="")}qt(We,"setupCountryFields"),se(".js-select-country",{constructor:HTMLSelectElement,initialize(E){We(E),E.form&&Be(E.form,"change"),E.addEventListener("change",function(){We(E)})}});var zt=Object.defineProperty,Ht=(E,I)=>zt(E,"name",{value:I,configurable:!0});ee("change",".js-payment-methods .js-payment-method",$e),ee("click",".js-payment-method-href",$e);function $e(E){if(!(E.currentTarget instanceof Element))return;const I=E.currentTarget.closest(".js-payment-methods"),e=E.currentTarget.getAttribute("data-selected-tab"),n=I.querySelectorAll(".js-selected-payment-method");for(const l of n)l.classList.remove("active");I.querySelector(`.${e}`).classList.add("active");const t=I.closest(".js-billing-section");if(t)if(e==="pay-with-paypal"){t.classList.add("PaymentMethod--paypal"),t.classList.remove("PaymentMethod--creditcard"),t.classList.remove("PaymentMethod--creditcard-added");const l=document.querySelector(".js-zuora-billing-info"),o=document.querySelector(".js-zuora-payment-page");l.classList.add("d-none"),o.classList.remove("d-none")}else e==="pay-by-credit-card"&&(t.classList.remove("PaymentMethod--paypal"),t.classList.add("PaymentMethod--creditcard"))}Ht($e,"handlePaymentMethodChange"),se(".js-selected-payment-method:not(.active)",{add(E){E.classList.add("has-removed-contents")},remove(E){E.classList.remove("has-removed-contents")}}),se(".js-billing-payment-methods",function(E){E.classList.remove("disabled")});var Vt=Object.defineProperty,De=(E,I)=>Vt(E,"name",{value:I,configurable:!0});const gt=["paypal-loading","paypal-logged-in","paypal-logged-out","paypal-down"];function yt(E,I,e){const{onSuccess:n}=e;return new Promise(t=>kt.setup(E,I,Object.assign({},e,{onSuccess:()=>{n(),t()}})))}De(yt,"braintreeSetup");function Pe(E,I){E.classList.remove(...gt),gt.indexOf(I)>=0&&E.classList.add(I)}De(Pe,"setPaypalState");async function bt(E){const I=E.getAttribute("data-token");if(I)return I;const e=await fetch("/account/billing/client_token",{headers:{"X-Requested-With":"XMLHttpRequest"}});if(!e.ok)throw new Error("Response is not OK");return await e.text()}De(bt,"getClientToken");async function Ke(E){const I=E.closest(".js-payment-methods");if(!I.classList.contains("paypal-loading")&&!I.classList.contains("paypal-logged-in")){E.innerHTML="",Pe(I,"paypal-loading");try{const e=await bt(I);I.hasAttribute("data-token")||I.setAttribute("data-token",e);const n=E.getAttribute("data-nonce-field"),t=I.querySelector(n);await yt(e,"paypal",{container:E,displayName:"GitHub",paymentMethodNonceInputField:t,enableCORS:!0,onSuccess(){Pe(I,"paypal-logged-in");const r=document.querySelector(".js-awaiting-payment");r&&r.getAttribute("data-toggle-plan-upgrade-visibility")==="true"&&r.toggleAttribute("hidden")},onReady(){Pe(I,"paypal-logged-out")}});const l=document.querySelector("#bt-pp-cancel");l.setAttribute("type","button");const o=document.querySelector(".js-paypal-cancel-icon").cloneNode(!0);o instanceof Element&&o.classList.remove("d-none"),l.appendChild(o)}catch(e){throw Pe(I,"paypal-down"),e}}}De(Ke,"setupBraintreePaypal"),ee("click","#bt-pp-cancel",function(E){const I=E.currentTarget.closest(".js-payment-methods");Pe(I,"paypal-logged-out");const e=E.currentTarget.closest(".js-paypal-container");Ke(e)}),se(".js-paypal-container",{add(E){E.closest(".active")!=null&&Ke(E)}}),se("input.js-plan-choice:checked",{constructor:HTMLInputElement,add(E){const I=E.value==="free";for(const o of document.querySelectorAll(".js-plan-choice-label"))o.classList.toggle("open",o===E);const e=E.closest(".js-plan-choice-label");if(e){const o=e.querySelector(".js-addon-purchase-field");o instanceof HTMLInputElement&&ct(o),E.checked&&e.classList.add("open")}const n=E.classList.contains("js-data-ghe-cloud-trial")&&E.value==="business_plus",t=I||n;for(const o of document.querySelectorAll(".js-billing-section"))o.classList.toggle("has-removed-contents",t);if(I){const o=document.querySelector(".js-contact-us");o!=null&&o.classList.add("d-none");const r=document.querySelector(".js-purchase-button");r!=null&&r.removeAttribute("disabled")}if((document.querySelector("input.js-enterprise-choice[value=server]:checked")&&E.value==="business_plus")===!0){const o=document.querySelector(".SignUpContinueActions");o!=null&&o.classList.add("has-removed-contents")}}}),ee("change","input.js-duration-change",function({currentTarget:E}){const I=document.querySelector(".js-upgrade-plan-change:checked"),e=document.querySelector("#js-pjax-container");let n=`?plan_duration=${E.value}`;document.querySelector(".js-transform-user")&&(n=`${n}&transform_user=1`),I instanceof HTMLInputElement?xe({url:`${n}&new_plan=${I.value}`,container:e}):xe({url:n,container:e})}),ee("change","input.js-upgrade-plan-change",function({currentTarget:E}){const I=document.querySelector("#js-pjax-container");let e=`?new_plan=${E.value}`;document.querySelector(".js-transform-user")&&(e=`${e}&transform_user=1`),xe({url:e,container:I})}),ee("change","input.js-org-duration-change",function({currentTarget:E}){const I=document.querySelector("#js-pjax-container"),e=new URL(document.location.href,window.location.origin).searchParams;if(document.querySelectorAll(".js-experiment-seats").length>0){const n=document.querySelector("#seats");e.set("plan_duration",E.value),e.set("memberships",n.value)}else{const n=document.querySelector(".js-upgrade-org-plan-change:checked"),t=document.querySelector(".js-account-name");e.set("plan",n.value),e.set("plan_duration",E.value),e.set("org",t.value)}E.hasAttribute("data-show-team-as-link")&&e.set("source","trial_upgrade"),xe({url:`?${e.toString()}`,container:I})}),ee("change","input.js-upgrade-org-plan-change",function({currentTarget:E}){const I=document.querySelector(".js-account-name"),e=document.querySelector("#js-pjax-container"),n=new URL(document.location.href,window.location.origin).searchParams;n.set("plan",E.value),n.set("org",I.value),xe({url:`?${n.toString()}`,container:e})});var Yt=Object.defineProperty,Gt=(E,I)=>Yt(E,"name",{value:I,configurable:!0});let Qe=null,Ze="month";async function Ee(E){var I;const e=E.value,n=new URL(E.getAttribute("data-url"),window.location.origin),t=new URLSearchParams(n.search.slice(1));t.append("seats",e),document.querySelectorAll(".js-experiment-seats").length>0&&(Ze=((I=document.querySelector(".js-org-duration-change:checked"))==null?void 0:I.value)||"month",t.append("experiment","true"),t.append("plan_duration",Ze)),n.search=t.toString(),Qe==null||Qe.abort();const{signal:l}=Qe=new AbortController;let o=null;try{const i=await fetch(n.toString(),{signal:l,headers:{Accept:"application/json"}});if(!i.ok)return;o=await i.json()}catch{}if(l.aborted||!o)return;const r=o.selectors;for(const i in r)for(const s of document.querySelectorAll(i))s.innerHTML=r[i]}Gt(Ee,"updateTotals"),se(".js-trial-upgrade-seats",{constructor:HTMLInputElement,add(E){Ee(E),dt(E,function(){Ee(E)})}});let ge=1;(async function(){await He;const E=document.getElementById("seats"),I=document.getElementById("plan_duration_month");I&&(Ze=I.checked?"month":"year"),E&&(ge=Number(E.getAttribute("data-minimum")),Number(E.value)<ge&&(E.value=ge.toString()),Ee(E))})(),ee("click","#increase-seats-number",function(){const E=document.getElementById("seats");if(!E)return;const I=Number(E.value)+1;E.value=I.toString(),document.querySelector(".js-minimum-seats").hidden=I>=ge,Ee(E)}),ee("click","#decrease-seats-number",function(){const E=document.getElementById("seats");if(!E)return;const I=Number(E.value)-1;E.value=I>=ge?I.toString():ge.toString(),document.querySelector(".js-minimum-seats").hidden=I>=ge,Ee(E)});const Wt=ze(E=>{const I=E.target;if(!I)return;const e=Number(I.value);(!e||e<ge)&&(I.value=ge.toString(),document.querySelector(".js-minimum-seats").hidden=!1),Ee(I)},200);se("#seats",E=>{E.addEventListener("keyup",Wt)});var Ie={exports:{}};(function(E,I){(function(e,n){n(I)})(self,function(e){var n="z_hppm_iframe",t=!1,l=function(){var s="zlog_level",a="error",p="warn",m="info",h="debug",y=p,g=[a,p,m,h];function S(N){var v;for(v=0;v<g.length;v++)if(g[v]===N)return v;return-1}function x(){var N=document.location.href,v=N.indexOf("?");if(v<0)return y;var _=N.indexOf("#");_<0&&(_=N.length);var P=N.slice(v+1,_);if(!P)return y;var R=P.split("&"),U;for(U=0;U<R.length;U++){var D=R[U].split("="),b=D[0],A=D[1];if(b===s&&S(A)>=0)return A}return p}function C(){return S(x())>=S(h)}function T(){return S(x())>=S(m)}return{getLevel:function(){return x()},debug:function(N){console&&console.log&&C()&&console.log(N)},info:function(N){console&&console.info&&T()&&console.info(N)},warn:function(N){console&&console.warn&&console.warn(N)},error:function(N){console&&console.error&&console.error(N)}}}(),o=function(){var s,a,p=1,m;return{postMessage:function(h,y,g){l.debug("Posting message[O]: target_url="+y+", payload="+h),!!y&&(g=g||parent,window.postMessage?g.postMessage(h,y.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):y&&(g.location=y.replace(/#.*$/,"")+"#"+ +new Date+p+++"&"+h))},receiveMessage:function(h){window.postMessage?(h&&(m=function(y){function g(C){var T=/^https:\/\/([a-z0-9]+(-[a-z0-9]+)*\.)*zuora\.com$/;return!!T.test(C.toLowerCase())}var S=/^https?:\/\/localhost(:\d{4,5})?$/;function x(C){return S.test(C)}if(l.debug("Received message[O]: origin="+y.origin),typeof y.origin=="string"&&!(g(y.origin)||x(y.origin)))return l.info("Stopped processing none-zuora message."),!1;h(y)}),window.addEventListener?window[h?"addEventListener":"removeEventListener"]("message",m,!1):window[h?"attachEvent":"detachEvent"]("onmessage",m)):(s&&clearInterval(s),s=null,h&&(s=setInterval(function(){var y=document.location.hash,g=/^#?\d+&/;y!==a&&g.test(y)&&(a=y,h({data:y.replace(g,"")}))},100)))}}}(),r=function(){var s="#z-overlay {filter: alpha(opacity=50);opacity:0.5;display:inline-block;position:fixed;top:0;left:0;width:100%;height:100%;background-color: #000;z-index: 1001;}",a="#z-container {border:1px;float:left; overflow: visible; position: absolute;padding: 0px; display: inline-block; top:5%; left:34%; margin: 0 auto;-webkit-border-radius: 5px;-moz-border-radius: 5px;border-radius:5px;background-color: #FAFAFA; border:1px solid #FAFAFA;border-top-color:#EDEDED;behavior: url(js/PIE.htc);z-index: 1002;}",p="#z-data {height: 100%; outline: 0px; width: 100%; overflow: visible;display: inline-block;border:1px; -webkit-border-radius: 5px;-moz-border-radius: 5px;border-radius:5px;}",m="#reset{*, *:before, *:after {display: inline-block;-webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box;}}",h="#z_hppm_iframe {background-color: #FAFAFA;vertical-align:bottom;z-index:9999;display:block;padding:0px;margin: 0px; border:0px solid #DDD;}",y,g,S,x,C,T=["tenantId","id","token","signature","key","style","submitEnabled","url"],N=["creditCardNumber","cardSecurityCode","creditCardExpirationYear","creditCardExpirationMonth","bankAccountNumber","bankAccountName","ipAddress"],v={},_=null,P=null;function R(b){return b&&typeof b=="function"}function U(b){var A={};for(var L in b)b.hasOwnProperty(L)&&(A[L]=b[L]);return A}o.receiveMessage(function(b){try{var A=b.data;l.debug("Received message[O]: payload="+A),A=JSON.parse(A),A.success?R(v.init)&&v.init(A):A.success==!1?(r.deactivateOverlay("z-overlay"),r.deactivateOverlay("z-container"),v.init&&v.init(A)):A.action=="close"?(r.deactivateOverlay("z-overlay"),r.deactivateOverlay("z-container")):A.action=="resize"?r.receive(A):A.action=="allowScroll"&&r.allowScroll(A),A.action==="validate"&&R(v.validate)?v.validate(A):A.action=="customizeErrorMessage"&&R(v.customizeErrorMessage)?v.customizeErrorMessage(A.key,A.code,A.message):A.action&&R(v[A.action])&&v[A.action](A)}catch{return}});var D;return{validateRequiredParams:function(b){var A,L=T.length;for(A=0;A<L;A++)if(!b.hasOwnProperty(T[A])){if(T[A]=="submitEnabled"&&b.style.toLowerCase()=="overlay")continue;var k="Param with key ["+T[A]+"] is required.";return alert(k),r.isIE()||console.log(k),!1}return!0},isIE:function(){var b=window.navigator.userAgent,A=b.indexOf("MSIE "),L=b.indexOf("Trident/");return A>0?!0:L>0?(b.indexOf("rv:"),!0):!1},validatePCIParams:function(b){var A,L=N.length;for(A=0;A<L;A++){var k="field_"+N[A];if(b.hasOwnProperty(k)&&0<b[k].trim().length&&b[k].trim().length<300){var H="Field ["+k+"] for Credit Card payment method type should be encrypted for pre-population";return alert(H),r.isIE()||console.log(H),!1}}return!0},init:function(b,A){S="?method=requestPage&host="+encodeURIComponent(document.location.href)+"&",S=S+"fromHostedPage=true&";var L=r.validateRequiredParams(b);if(!L||(L=r.validatePCIParams(b),!L))return!1;var k=JSON.stringify(b,function(ae,le){if(ae!="")if(ae=="key")C=le;else if(ae=="url"){var Z=/^https:\/\/([a-z0-9]+(-[a-z0-9]+)*\.)+zuora\.com\/.+$/;l.info("HPM integration[O]: url="+le),Z.test(le)||l.warn("HPM integration[O]: None-official zuora HPM integration url is detected: "+le),y=le}else S=S+ae+"="+encodeURIComponent(le)+"&";return le});D=JSON.parse(k),v.init=A;var H=N.length;if(b)for(var X=0;X<H;X++){var ne="field_"+N[X];b.hasOwnProperty(ne)&&(b[ne]="")}return!0},prepopulate:function(b){if(!t){var A=r.createIframeURL();if(A==document.getElementById(n).src||document.getElementById(n).src.indexOf(A)>=0&&D.hasOwnProperty("customizeErrorRequired")&&D.customizeErrorRequired=="true"){JSON.stringify(b,function(k,H){if(k!=""){var X="setField("+k+":"+H+")";r.post(n,X)}return H});var L="setField(key:"+C+")";r.post(n,L),r.post(n,"setField(style:"+D.style+")"),D.hasOwnProperty("customizeErrorRequired")&&D.customizeErrorRequired=="true"&&(r.post(n,"customizeErrorRequired"),D.customizeErrorRequired="false"),r.post(n,"resize"),g&&g()}g&&(g=null)}},contains:function(b,A){for(var L=0;L<b.length;L++)if(b[L]===A)return!0;return!1},renderWithErrorHandler:function(b,A,L,k,H,X){b.customizeErrorRequired="true",r.render(b,A,L,H,X),r.customizeErrorHandler(k)},runAfterRender:function(b){g=b},render:function(b,A,L,k,H){k!=null&&k!=null&&(_=k),H!=null&&H!=null&&(P=H);var X=N.length;if(t=!1,A&&A.creditCardCountry&&(A.creditCardCountry==="USA"||A.creditCardCountry==="CAN")&&(A.creditCardState=A.creditCardState||" "),A)for(var ne=0;ne<X;ne++){var ae="field_"+N[ne];A.hasOwnProperty(N[ne])&&(b[ae]=A[N[ne]])}var le=r.init(b,L);if(!!le){if(A)for(X=Object.keys(A).length,x=U(A),ne=0;ne<X;ne++){var Z=Object.keys(A)[ne];r.contains(N,Z)&&delete x[Z]}else x=null;var ce=document.getElementById("zuora_payment");if(typeof ce=="undefined"||!ce)return{error:"invalid_request",error_description:"The container you specified does not exist"};if(ce.innerHTML="",r.cleanUp(ce,"z-overlay"),r.cleanUp(ce,"z-container"),D.style=="inline"){r.addInlineStyles(),r.createIframe(ce);return}if(D.style=="overlay"){r.addOverlayStyles();var Me=r.generateDiv("z-overlay","z-overlay");ce.appendChild(Me);var Ne=r.generateDiv("z-container","z-container");ce.appendChild(Ne);var Oe=r.generateDiv("z-data","z-data");Oe.tabindex="-1",Ne.appendChild(Oe),r.createIframe(document.getElementById("z-data")),r.activateOverlay("z-overlay")}}},cleanUp:function(b,A){var L=document.getElementById(A);L!=null&&b.removeChild(L)},activateOverlay:function(b){try{document.getElementById(b).style.display="inline"}catch{}},deactivateOverlay:function(b){try{document.getElementById(b).style.display="none"}catch{}},generateDiv:function(b,A,L){var k=document.createElement("div");return k.id=b,k.className=A,k.border="0",k.addEventListener?k.addEventListener("click",L,!1):k.attachEvent("click",L),k},addOverlayStyles:function(){var b=document.createElement("style");b.type="text/css";var A=document.createTextNode(s),L=document.createTextNode(a),k=document.createTextNode(p),H=document.createTextNode(h),X=document.createTextNode(m);b.styleSheet?b.styleSheet.cssText=A.nodeValue+" "+L.nodeValue+" "+k.nodeValue+" "+X.nodeValue+" "+H.nodeValue:(b.appendChild(A),b.appendChild(L),b.appendChild(k),b.appendChild(H),b.appendChild(X)),document.getElementsByTagName("head")[0].appendChild(b)},addInlineStyles:function(){var b=document.createElement("style");b.type="text/css";var A=document.createTextNode(h);b.styleSheet?b.styleSheet.cssText=A.nodeValue:b.appendChild(A),document.getElementsByTagName("head")[0].appendChild(b)},createIframe:function(b,A){var L=r.createIframeURL(),k=document.createElement("iframe");k.setAttribute("src",L),k.setAttribute("id",n),k.setAttribute("overflow","visible"),k.setAttribute("scrolling","no"),k.setAttribute("frameBorder","0"),k.setAttribute("allowtransparency","true"),k.setAttribute("class","z_hppm_iframe"),k.setAttribute("width","100%"),k.setAttribute("height","100%"),k.addEventListener?k.addEventListener("load",function(H){return r.prepopulate(x),!1},!1):k.attachEvent("onload",function(){return r.prepopulate(x),!1}),typeof A!="undefined"&&typeof A.vertical!="undefined"&&A.vertical&&(k.style.width="100%",k.style.height="100%"),b.appendChild(k)},createIframeURL:function(){var b=y;return b.concat(S).concat("zlog_level="+l.getLevel())},post:function(b,A){var L=document.getElementById(b),k=encodeURIComponent(document.location.href),H=L.src;return H.indexOf(k)<=-1&&(L.src=H+"#"+k),o.postMessage(A,H,L.contentWindow),!1},allowScroll:function(b){{var A=document.getElementById(n);A&&(A.setAttribute("scrolling","yes"),t=!0)}},receive:function(b){i.resizeCaller(n,b.action,b.height,b.width,_,P)},validate:function(b){if(b==null||b==null){r.closeWindow();var A="Validate function required.";return alert(A),r.isIE()||console.log(A),!1}v.validate=b;var L="validate";r.post(n,L)},customizeErrorHandler:function(b){if(b==null||b==null){r.closeWindow();var A="Customized error message function required.";return alert(A),r.isIE()||console.log(A),!1}v.customizeErrorMessage=b},sendErrorMessageToHpm:function(b,A){var L={action:"customizeErrorMessage",key:b,message:A},k=JSON.stringify(L);r.post(n,k)},closeWindow:function(){r.deactivateOverlay("z-overlay"),r.deactivateOverlay("z-container")},submit:function(){var b=document.getElementById(n).src+"#"+encodeURIComponent(document.location.href);return document.getElementById(n).src=b,o.postMessage("postPage",b,document.getElementById(n).contentWindow),!0},setEventHandler:function(b,A){b&&A&&(v[b]=A)}}}(),i=function(){var s="yes";return navigator.userAgent.substring(navigator.userAgent.indexOf("Firefox")).split("/")[1],{resizeCaller:function(a,p,m,h,y,g){if(i.resizeIframe(a,p,m,h,y,g),(document.all||document.getElementById)&&s=="no"){var S=document.all?document.all[a]:document.getElementById(a);S.style.display="block"}},resizeIframe:function(a,p,m,h,y,g){var S=document.getElementById(a);if(S){if(S.style.display="block",y!=null&&y!=null)try{!isNaN(y)&&y.length>0?S.width=Number(y):S.width=Number(h)}catch{S.width=Number(h)}else S.width=Number(h);if(g!=null&&g!=null)try{!isNaN(g)&&g.length>0?S.height=Number(g):S.height=Number(m)}catch{S.height=Number(m)}else S.height=Number(m)}}}}();e.Z=r,Object.defineProperty(e,"__esModule",{value:!0})})})(Ie,Ie.exports);var $t=Object.defineProperty,he=(E,I)=>$t(E,"name",{value:I,configurable:!0});async function vt(E){const I=E.getAttribute("data-url"),e=E.getAttribute("data-organization-id"),n=E.getAttribute("data-signature-view-context"),t=E.getAttribute("data-manual-payment"),l=new URLSearchParams;e&&l.append("organization_id",e),n&&l.append("view_context",n),t&&l.append("manual_payment",t);const o=await fetch(`${I}?${l.toString()}`,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!o.ok){const i=E.getAttribute("data-general-signature-error-message")||"";et(i);const s=new Error,a=o.statusText?` ${o.statusText}`:"";throw s.message=`HTTP ${o.status}${a}`,s}const r=await o.json();if(E.classList.contains("js-zuora-payment-page")){if(r.error){et(r.error);return}const i=E.getAttribute("data-id");Je(E,r,{creditCardHolderName:i},Ct)}else Je(E,r,{creditCardHolderName:"GitHub Organization"},At)}he(vt,"retrieveSignature");async function _t(E,I,e){const n=new URLSearchParams;n.append("payment_method_id",E.refId),I&&n.append("organization_id",I);const t=await fetch(`/settings/billing/payment_method?${n.toString()}`,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!t.ok){const l=new Error,o=t.statusText?` ${t.statusText}`:"";throw l.message=`HTTP ${t.status}${o}`,l}e(await t.json())}he(_t,"fetchPaymentMethodDetails");function Et(E){return(I,e,n)=>{let t=n;switch(I){case"error":pt(E),t=E.getAttribute("data-processor-declined-message")||"";break}Ie.exports.Z.sendErrorMessageToHpm(I,t)}}he(Et,"errorMessageCallback");async function Xe(E,I,e=5,n=1e3){if(e===0)throw new Error("Max retries exhausted");let t=`/settings/billing/bill_pay/${E}`;if(I){const o=new URLSearchParams;o.append("organization_id",I),t=`${t}?${o.toString()}`}const l=await fetch(t,{headers:{"X-Requested-With":"XMLHttpRequest"}});if(l.status===200)return l;if(l.status===202)return await new Promise(o=>setTimeout(o,n)),Xe(E,I,e-1,n*1.5);throw new Error(`Unexpected ${l.status} response from poll endpoint`)}he(Xe,"pollPayment");function wt(E,I){return async e=>{if(I(e),e.success==="true"){const n=document.querySelector(".js-payment-method-form");if(n){if(!(n instanceof HTMLFormElement))return;const t=E.getAttribute("data-redirect-to");if(t)if(e.AuthorizeResult==="Approved"){const l=E.getAttribute("data-organization-id"),o=document.querySelector(".js-payment-verification-spinner"),r=document.querySelector(".js-payment-verification-success"),i=document.querySelector(".js-payment-method-section-wrapper"),s=document.querySelector(".js-payment-still-processing");try{i.hidden=!0,o.hidden=!1,await Xe(e.PaymentId,l),o.hidden=!0,r.hidden=!1}catch{o.hidden=!0,s.hidden=!1,await new Promise(p=>setTimeout(p,3e3))}await new Promise(a=>setTimeout(a,150)),window.location.replace(t)}else{const l=new ErrorEvent("Unknown auth result",{error:new Error(`Unknown AuthorizationResult ${e.AuthorizeResult}`)});ft(l),window.location.replace(t)}else n.submit()}else{const t=E.getAttribute("data-organization-id");_t(e,t,l=>{const o=document.querySelector(".js-zuora-billing-info"),r=o.querySelector(".js-new-card-type"),i=o.querySelector(".js-new-card-number"),s=l.masked_number.replace(/\*/g,""),a=E.closest(".js-billing-section"),p=document.querySelector(".js-awaiting-payment");r.textContent=l.card_type,i.textContent=s,E.classList.add("d-none"),o.classList.remove("d-none"),p&&p.toggleAttribute("hidden"),a.classList.remove("PaymentMethod--creditcard"),a.classList.add("PaymentMethod--creditcard-added")})}}}}he(wt,"zuoraSuccessCallback");function Je(E,I,e,n){const t=Object.assign({},I.prepopulate,e);delete I.prepopulate,Ie.exports.Z.renderWithErrorHandler(I,t,wt(E,n),Et(E))}he(Je,"loadZuora");function Ct(E){if(E.success==="true"){const I=document.querySelector(".js-zuora-billing-info"),e=I.querySelector(".js-zuora-payment-method-id"),n=I.querySelector(".js-zuora-select-country"),t=I.querySelector(".js-zuora-select-region"),l=I.querySelector(".js-zuora-select-postal-code");e.value=E.refId,n.value=n.value||E.creditCardCountry,t.value=t.value||E.creditCardState,l.value=l.value||E.creditCardPostalCode}}he(Ct,"paymentMethodPageCallback");function At(E){const I=new URLSearchParams;I.append("success",E.success),I.append("response_from",E.responseFrom),E.success?I.append("ref_id",E.refId):(I.append("error_code",E.errorCode),I.append("error_message",E.errorMessage));const e=`pay?${I.toString()}`;window.location.replace(e)}he(At,"invoicePaymentCallback");function St(){const E=document.getElementById("z_hppm_iframe");E!=null&&(E.setAttribute("height","100%"),E.setAttribute("width","100%"),Ie.exports.Z.post(E.id,"resize"))}he(St,"resizeZuoraIframe");function et(E){const I=document.querySelector(".js-zuora-spinner");I&&(I.textContent=E)}he(et,"replaceSpinnerWithMessage"),se("#zuora_payment",{constructor:HTMLElement,add(E){if(E.classList.contains("js-zuora-payment-page")){const e=document.querySelector(".js-zuora-spinner");e&&e.classList.remove("d-none"),E.style.opacity="0",Ie.exports.Z.runAfterRender(()=>{e&&e.classList.add("d-none"),E.style.opacity="1",window.addEventListener("resize",ze(St,200))})}vt(E)}});var Kt=Object.defineProperty,oe=(E,I)=>Kt(E,"name",{value:I,configurable:!0});const xt="United States of America",Tt="Canada";ee("click",".js-edit-user-personal-profile",Pt),ee("click",".js-edit-paypal-method",It),ee("click",".js-enter-new-card",Nt),ee("click",".js-edit-payment-method-btn",Ot),ee("click",".js-cancel-edit-payment-method-btn",Rt),ee("click",".js-add-billing-information-btn",Mt),ee("click",".js-cancel-submit-personal-profile-btn",Lt),ee("click",".js-dismiss-flash-message",Dt);function tt(E,I){var e;const n=(e=E.options[E.selectedIndex])==null?void 0:e.textContent,t=E.closest(".js-name-address-collection"),l=t.querySelector(".js-select-state"),o=t.querySelector(".js-name-address-state"),r=t.querySelector(".js-name-address-select-province"),i=document.getElementsByClassName("js-region-label");n===xt?(l.required=!0,l.id="user_personal_profile_region",l.disabled=!1,l.hidden=!1):(l.disabled=!0,l.required=!1,l.value="",l.removeAttribute("id"),l.hidden=!0),n===Tt?(r.disabled=!1,r.required=!0,r.id="user_personal_profile_region",r.hidden=!1):(r.disabled=!0,r.required=!1,r.value="",r.removeAttribute("id"),r.hidden=!0),n===xt||n===Tt?(o.disabled=!0,o.value="",o.removeAttribute("id"),o.hidden=!0,i[0].classList.add("required-asterisked")):(o.disabled=!1,o.id="user_personal_profile_region",o.hidden=!1,i[0].classList.remove("required-asterisked")),nt(t).handleSaveButtonState(I)}oe(tt,"setupCountryFields"),se(".js-name-address-select-country",{constructor:HTMLSelectElement,initialize(E){tt(E,!0),E.form&&Be(E.form,"change"),E.addEventListener("change",function(){tt(E)})}}),se(".js-name-address-collection",{constructor:HTMLElement,initialize(E){const I=nt(E);I.addEventListenersForNameAddressForm(),I.handleSaveButtonState(!0)}});function nt(E){const I=document.getElementById("user_personal_profile_first_name"),e=document.getElementById("user_personal_profile_last_name"),n=document.getElementById("user_personal_profile_address1"),t=document.getElementById("user_personal_profile_city"),l=E.querySelector(".js-select-state"),o=E.querySelector(".js-name-address-state"),r=E.querySelector(".js-name-address-select-province"),i=document.getElementById("user_personal_profile_country_code");function s(){I.addEventListener("input",function(){p()}),e.addEventListener("input",function(){p()}),n.addEventListener("input",function(){p()}),t.addEventListener("input",function(){p()}),l.addEventListener("input",function(){p()}),o.addEventListener("input",function(){p()}),r.addEventListener("input",function(){p()})}oe(s,"addEventListenersForNameAddressForm");function a(){return!!(m(I)||m(e)||m(n)||m(t)||m(i)||i.value==="US"&&m(l)||i.value==="CA"&&m(r))}oe(a,"isNameAddressCollectionFormInvalid");function p(h){const y=document.getElementById("submit_personal_profile");h&&y.disabled?y.disabled=!0:y.disabled=a()}oe(p,"handleSaveButtonState");function m(h){const y=h.value;return!y||y.trim()===""}return oe(m,"isInputEmpty"),{addEventListenersForNameAddressForm:s,isNameAddressCollectionFormInvalid:a,handleSaveButtonState:p}}oe(nt,"validateNameAddressForm");function Pt(E){if(!(E.currentTarget instanceof Element))return;const I=document.querySelector(".js-edit-user-personal-profile-wrapper");I.hidden=!0;const e=document.querySelector(".js-name-address-collection-wrapper");e.hidden=!1;const n=document.querySelector(".js-user-personal-profile-summary");n.hidden=!0;const t=document.querySelector(".js-awaiting-payment");t&&(t.hasAttribute("hidden")||(t.hidden=!0));const l=document.querySelector(".js-sponsors-form");l&&(l.hidden=!0);const o=document.querySelector(".js-marketplace-form-wrapper");o&&(o.hidden=!0);const r=document.querySelector(".js-sdn-screening-error-wrapper");r&&(r.hidden=!0);const i=document.querySelector(".js-payment-methods-wrapper");i&&(i.hidden=!0);const s=document.querySelector(".js-coupons-form-wrapper");s&&(s.hidden=!0)}oe(Pt,"handleEditUserPersonalProfile");function It(E){if(!(E.currentTarget instanceof Element))return;const I=document.querySelector(".js-awaiting-payment");I&&(I.hidden=!0);const e=document.querySelector(".js-sponsors-form");e&&(e.hidden=!0);const n=document.querySelector(".js-marketplace-form-wrapper");n&&(n.hidden=!0);const t=document.querySelector(".js-payment-methods-radio");t.hidden=!1;const l=document.querySelector(".js-billing-pay-with");l.hidden=!1;const o=document.querySelector(".js-existing-paypal-summary");o.hidden=!0;const r=document.querySelector(".js-paypal-method-details");r.hidden=!1;const i=document.querySelector(".js-paypal-payment-method-form");i.hidden=!1}oe(It,"handleEditPayPalPaymentMethod");function Nt(E){if(!(E.currentTarget instanceof Element))return;const I=document.querySelector(".js-awaiting-payment");I&&(I.hidden=!0);const e=document.querySelector(".js-sponsors-form");e&&(e.hidden=!0);const n=document.querySelector(".js-marketplace-form-wrapper");n&&(n.hidden=!0);const t=document.querySelector(".js-billing-pay-with");t.hidden=!1;const l=document.querySelector(".js-payment-methods-radio");l.hidden=!1}oe(Nt,"handleEditCreditCardPaymentMethod");function Ot(E){if(!(E.currentTarget instanceof Element))return;const I=document.querySelector(".js-update-billing-information-banner");if(!document.querySelector(".js-billing-information-summary"))I.hidden=!1,rt();else{I.hidden=!0;const n=document.querySelector(".js-payment-summary-wrapper");n.hidden=!0;const t=document.querySelector(".js-payment-method-section-wrapper");t.hidden=!1;const l=document.querySelector(".js-edit-payment-method-btn");l.hidden=!0;const o=document.querySelector("#z_hppm_iframe");o!=null&&(o.setAttribute("height","100%"),o.setAttribute("width","100%")),window.dispatchEvent(new Event("resize"))}}oe(Ot,"handleEditPaymentMethod");function Rt(E){if(!(E.currentTarget instanceof Element))return;const I=document.querySelector(".js-payment-summary-wrapper");I.hidden=!1;const e=document.querySelector(".js-payment-method-section-wrapper");e.hidden=!0;const n=document.querySelector(".js-edit-payment-method-btn");n.hidden=!1}oe(Rt,"handleCancelEditPaymentMethod");function Mt(E){E.currentTarget instanceof Element&&rt()}oe(Mt,"handleAddBillingInformation");function rt(){const E=document.querySelector(".js-billing-information-summary-wrapper");E.hidden=!0;const I=document.querySelector(".js-billing-information-collection-wrapper");I.hidden=!1;const e=document.querySelector(".js-add-billing-information-btn");e.hidden=!0;const n=document.querySelector(".js-no-billing-information-message");n.hidden=!0}oe(rt,"addBillingInformationHelper");function Lt(E){if(!(E.currentTarget instanceof Element))return;const I=document.querySelector(".js-billing-information-summary-wrapper");I.hidden=!1;const e=document.querySelector(".js-billing-information-collection-wrapper");e.hidden=!0;const n=document.querySelector(".js-add-billing-information-btn");n.hidden=!1;const t=document.querySelector(".js-no-billing-information-message");t.hidden=!1}oe(Lt,"handleCancelAddBillingInformation");function Dt(E){if(!(E.currentTarget instanceof Element))return;const I=document.querySelector(".js-update-billing-information-banner");I.hidden=!0}oe(Dt,"handleDismissMessage")}}});
//# sourceMappingURL=billing-2e5dfd48.js.map
